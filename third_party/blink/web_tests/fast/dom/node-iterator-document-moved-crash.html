<html>
    <head>
        <script src="../../resources/gc.js"></script>
        <script>
            if (window.testRunner) {
                testRunner.dumpAsText();
                testRunner.waitUntilDone();
            }
            
            function runTest()
            {
                aElement = document.createElement('a');
                divElement = document.createElement('div');
                document.body.appendChild(divElement);
                nodeIterator = win.document.createNodeIterator(aElement);
                win.document.body.appendChild(aElement);

                delete nodeIterator;
                gc();
                document.body.removeChild(divElement);
                gc();
                
                if (window.testRunner)
                    testRunner.notifyDone();
            }
        </script>
    </head>
    <body>
        <iframe onload="this.onload = null; win = this.contentWindow; runTest();"></iframe>
        Test passes if it does not crash.
    </body>
</html>

