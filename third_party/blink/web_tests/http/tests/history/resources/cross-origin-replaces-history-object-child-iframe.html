<html>
<script>
if (window.testRunner)
    testRunner.dumpAsText();

window.onmessage = function(evt)
{
    if (evt.data == "setHistoryLength") {
        setHistoryLength();
        return;
    } else
        console.log("Unknown message.");
}

function setHistoryLength()
{
    console.log("About to shadow child window's history object: " + window.history);
    window.history = "";
    console.log("Child window's history object should not be shadowed: " + window.history);
    parent.window.postMessage("done", "*");
}

</script>
<body>
HELLO THERE
</body>
</html>
