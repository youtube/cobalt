buffers {
  size_kb: 65536
  fill_policy: RING_BUFFER
}

data_sources {
  config {
    name: "linux.ftrace"
    target_buffer: 0
    ftrace_config {
      buffer_size_kb: 8192
      drain_period_ms: 500
      ftrace_events: "binder_lock"
      ftrace_events: "binder_locked"
      ftrace_events: "binder_set_priority"
      ftrace_events: "binder_transaction_received"
      ftrace_events: "binder_transaction"
      ftrace_events: "binder_unlock"
      ftrace_events: "block_bio_backmerge"
      ftrace_events: "block_bio_bounce"
      ftrace_events: "block_bio_complete"
      ftrace_events: "block_bio_frontmerge"
      ftrace_events: "block_bio_queue"
      ftrace_events: "block_bio_remap"
      ftrace_events: "block_dirty_buffer"
      ftrace_events: "block_getrq"
      ftrace_events: "block_plug"
      ftrace_events: "block_rq_abort"
      ftrace_events: "block_rq_complete"
      ftrace_events: "block_rq_insert"
      ftrace_events: "block_rq_issue"
      ftrace_events: "block_rq_remap"
      ftrace_events: "block_rq_requeue"
      ftrace_events: "block_sleeprq"
      ftrace_events: "block_split"
      ftrace_events: "block_touch_buffer"
      ftrace_events: "block_unplug"
      ftrace_events: "cgroup_attach_task"
      ftrace_events: "cgroup_destroy_root"
      ftrace_events: "cgroup_mkdir"
      ftrace_events: "cgroup_release"
      ftrace_events: "cgroup_remount"
      ftrace_events: "cgroup_rename"
      ftrace_events: "cgroup_rmdir"
      ftrace_events: "cgroup_setup_root"
      ftrace_events: "cgroup_transfer_tasks"
      ftrace_events: "clock_disable"
      ftrace_events: "clock_enable"
      ftrace_events: "clock_set_rate"
      ftrace_events: "cpu_frequency_limits"
      ftrace_events: "cpu_frequency"
      ftrace_events: "cpu_idle"
      ftrace_events: "cpufreq_interactive_already"
      ftrace_events: "cpufreq_interactive_boost"
      ftrace_events: "cpufreq_interactive_notyet"
      ftrace_events: "cpufreq_interactive_setspeed"
      ftrace_events: "cpufreq_interactive_target"
      ftrace_events: "cpufreq_interactive_unboost"
      ftrace_events: "ext4_alloc_da_blocks"
      ftrace_events: "ext4_allocate_blocks"
      ftrace_events: "ext4_allocate_inode"
      ftrace_events: "ext4_begin_ordered_truncate"
      ftrace_events: "ext4_collapse_range"
      ftrace_events: "ext4_da_release_space"
      ftrace_events: "ext4_da_reserve_space"
      ftrace_events: "ext4_da_update_reserve_space"
      ftrace_events: "ext4_da_write_begin"
      ftrace_events: "ext4_da_write_end"
      ftrace_events: "ext4_da_write_pages_extent"
      ftrace_events: "ext4_da_write_pages"
      ftrace_events: "ext4_direct_IO_enter"
      ftrace_events: "ext4_direct_IO_exit"
      ftrace_events: "ext4_discard_blocks"
      ftrace_events: "ext4_discard_preallocations"
      ftrace_events: "ext4_drop_inode"
      ftrace_events: "ext4_es_cache_extent"
      ftrace_events: "ext4_es_find_delayed_extent_range_enter"
      ftrace_events: "ext4_es_find_delayed_extent_range_exit"
      ftrace_events: "ext4_es_insert_extent"
      ftrace_events: "ext4_es_lookup_extent_enter"
      ftrace_events: "ext4_es_lookup_extent_exit"
      ftrace_events: "ext4_es_remove_extent"
      ftrace_events: "ext4_es_shrink_count"
      ftrace_events: "ext4_es_shrink_scan_enter"
      ftrace_events: "ext4_es_shrink_scan_exit"
      ftrace_events: "ext4_es_shrink"
      ftrace_events: "ext4_evict_inode"
      ftrace_events: "ext4_ext_convert_to_initialized_enter"
      ftrace_events: "ext4_ext_convert_to_initialized_fastpath"
      ftrace_events: "ext4_ext_handle_unwritten_extents"
      ftrace_events: "ext4_ext_in_cache"
      ftrace_events: "ext4_ext_load_extent"
      ftrace_events: "ext4_ext_map_blocks_enter"
      ftrace_events: "ext4_ext_map_blocks_exit"
      ftrace_events: "ext4_ext_put_in_cache"
      ftrace_events: "ext4_ext_remove_space_done"
      ftrace_events: "ext4_ext_remove_space"
      ftrace_events: "ext4_ext_rm_idx"
      ftrace_events: "ext4_ext_rm_leaf"
      ftrace_events: "ext4_ext_show_extent"
      ftrace_events: "ext4_fallocate_enter"
      ftrace_events: "ext4_fallocate_exit"
      ftrace_events: "ext4_find_delalloc_range"
      ftrace_events: "ext4_forget"
      ftrace_events: "ext4_free_blocks"
      ftrace_events: "ext4_free_inode"
      ftrace_events: "ext4_get_implied_cluster_alloc_exit"
      ftrace_events: "ext4_get_reserved_cluster_alloc"
      ftrace_events: "ext4_ind_map_blocks_enter"
      ftrace_events: "ext4_ind_map_blocks_exit"
      ftrace_events: "ext4_insert_range"
      ftrace_events: "ext4_invalidatepage"
      ftrace_events: "ext4_journal_start_reserved"
      ftrace_events: "ext4_journal_start"
      ftrace_events: "ext4_journalled_invalidatepage"
      ftrace_events: "ext4_journalled_write_end"
      ftrace_events: "ext4_load_inode_bitmap"
      ftrace_events: "ext4_load_inode"
      ftrace_events: "ext4_mark_inode_dirty"
      ftrace_events: "ext4_mb_bitmap_load"
      ftrace_events: "ext4_mb_buddy_bitmap_load"
      ftrace_events: "ext4_mb_discard_preallocations"
      ftrace_events: "ext4_mb_new_group_pa"
      ftrace_events: "ext4_mb_new_inode_pa"
      ftrace_events: "ext4_mb_release_group_pa"
      ftrace_events: "ext4_mb_release_inode_pa"
      ftrace_events: "ext4_mballoc_alloc"
      ftrace_events: "ext4_mballoc_discard"
      ftrace_events: "ext4_mballoc_free"
      ftrace_events: "ext4_mballoc_prealloc"
      ftrace_events: "ext4_other_inode_update_time"
      ftrace_events: "ext4_punch_hole"
      ftrace_events: "ext4_read_block_bitmap_load"
      ftrace_events: "ext4_readpage"
      ftrace_events: "ext4_releasepage"
      ftrace_events: "ext4_remove_blocks"
      ftrace_events: "ext4_request_blocks"
      ftrace_events: "ext4_request_inode"
      ftrace_events: "ext4_sync_file_enter"
      ftrace_events: "ext4_sync_file_exit"
      ftrace_events: "ext4_sync_fs"
      ftrace_events: "ext4_trim_all_free"
      ftrace_events: "ext4_trim_extent"
      ftrace_events: "ext4_truncate_enter"
      ftrace_events: "ext4_truncate_exit"
      ftrace_events: "ext4_unlink_enter"
      ftrace_events: "ext4_unlink_exit"
      ftrace_events: "ext4_write_begin"
      ftrace_events: "ext4_write_end"
      ftrace_events: "ext4_writepage"
      ftrace_events: "ext4_writepages_result"
      ftrace_events: "ext4_writepages"
      ftrace_events: "ext4_zero_range"
      ftrace_events: "f2fs_sync_file_enter"
      ftrace_events: "f2fs_sync_file_exit"
      ftrace_events: "f2fs_write_begin"
      ftrace_events: "f2fs_write_end"
      ftrace_events: "i2c_read"
      ftrace_events: "i2c_reply"
      ftrace_events: "i2c_result"
      ftrace_events: "i2c_write"
      ftrace_events: "ipi_entry"
      ftrace_events: "ipi_exit"
      ftrace_events: "ipi_raise"
      ftrace_events: "irq_handler_entry"
      ftrace_events: "irq_handler_exit"
      ftrace_events: "lowmemory_kill"
      ftrace_events: "mdp_cmd_kickoff"
      ftrace_events: "mdp_cmd_pingpong_done"
      ftrace_events: "mdp_cmd_readptr_done"
      ftrace_events: "mdp_cmd_release_bw"
      ftrace_events: "mdp_cmd_wait_pingpong"
      ftrace_events: "mdp_commit"
      ftrace_events: "mdp_compare_bw"
      ftrace_events: "mdp_misr_crc"
      ftrace_events: "mdp_mixer_update"
      ftrace_events: "mdp_perf_prefill_calc"
      ftrace_events: "mdp_perf_set_ot"
      ftrace_events: "mdp_perf_set_panic_luts"
      ftrace_events: "mdp_perf_set_qos_luts"
      ftrace_events: "mdp_perf_set_wm_levels"
      ftrace_events: "mdp_perf_update_bus"
      ftrace_events: "mdp_sspp_change"
      ftrace_events: "mdp_sspp_set"
      ftrace_events: "mdp_trace_counter"
      ftrace_events: "mdp_video_underrun_done"
      ftrace_events: "mm_compaction_begin"
      ftrace_events: "mm_compaction_defer_compaction"
      ftrace_events: "mm_compaction_defer_reset"
      ftrace_events: "mm_compaction_deferred"
      ftrace_events: "mm_compaction_end"
      ftrace_events: "mm_compaction_finished"
      ftrace_events: "mm_compaction_isolate_freepages"
      ftrace_events: "mm_compaction_isolate_migratepages"
      ftrace_events: "mm_compaction_kcompactd_sleep"
      ftrace_events: "mm_compaction_kcompactd_wake"
      ftrace_events: "mm_compaction_migratepages"
      ftrace_events: "mm_compaction_suitable"
      ftrace_events: "mm_compaction_try_to_compact_pages"
      ftrace_events: "mm_compaction_wakeup_kcompactd"
      ftrace_events: "mm_filemap_add_to_page_cache"
      ftrace_events: "mm_filemap_delete_from_page_cache"
      ftrace_events: "mm_vmscan_direct_reclaim_begin"
      ftrace_events: "mm_vmscan_direct_reclaim_end"
      ftrace_events: "mm_vmscan_kswapd_sleep"
      ftrace_events: "mm_vmscan_kswapd_wake"
      ftrace_events: "print"
      ftrace_events: "regulator_disable_complete"
      ftrace_events: "regulator_disable"
      ftrace_events: "regulator_enable_complete"
      ftrace_events: "regulator_enable_delay"
      ftrace_events: "regulator_enable"
      ftrace_events: "regulator_set_voltage_complete"
      ftrace_events: "regulator_set_voltage"
      ftrace_events: "rotator_bw_ao_as_context"
      ftrace_events: "sched_blocked_reason"
      ftrace_events: "sched_cpu_hotplug"
      ftrace_events: "sched_process_exec"
      ftrace_events: "sched_process_exit"
      ftrace_events: "sched_process_fork"
      ftrace_events: "sched_process_free"
      ftrace_events: "sched_process_hang"
      ftrace_events: "sched_process_wait"
      ftrace_events: "sched_switch"
      ftrace_events: "sched_wakeup_new"
      ftrace_events: "sched_wakeup"
      ftrace_events: "sched_waking"
      ftrace_events: "smbus_read"
      ftrace_events: "smbus_reply"
      ftrace_events: "smbus_result"
      ftrace_events: "smbus_write"
      ftrace_events: "softirq_entry"
      ftrace_events: "softirq_exit"
      ftrace_events: "softirq_raise"
      ftrace_events: "suspend_resume"
      ftrace_events: "sync_pt"
      ftrace_events: "sync_timeline"
      ftrace_events: "sync_wait"
      ftrace_events: "task_newtask"
      ftrace_events: "task_rename"
      ftrace_events: "tracing_mark_write"
      ftrace_events: "workqueue_activate_work"
      ftrace_events: "workqueue_execute_end"
      ftrace_events: "workqueue_execute_start"
      ftrace_events: "workqueue_queue_work"
      ftrace_events: "signal_generate"
      ftrace_events: "signal_deliver"
    }
  }
}

data_sources {
  config {
    name: "linux.process_stats"
    target_buffer: 0
  }
}

data_sources {
  config {
    name: "linux.inode_file_map"
    target_buffer: 0
    inode_file_config {
      scan_delay_ms: 1000
      scan_interval_ms: 1000
      scan_batch_size: 500
      mount_point_mapping: {
        mountpoint: "/data"
        scan_roots: "/data/app"
        scan_roots: "/data/misc/bootstat"
        scan_roots: "/data/misc/update_engine_log"
        scan_roots: "/data/misc/update_engine"
        scan_roots: "/data/misc/profiles/ref"
        scan_roots: "/data/misc/profiles/cur"
        scan_roots: "/data/dalvik-cache"
        scan_roots: "/data/data/android"
        scan_roots: "/data/backup"
      }
    }
  }
}

data_sources {
  config {
    name: "perfetto.metatrace"
    target_buffer: 0
  }
}

producers {
  producer_name: "perfetto.traced_probes"
  shm_size_kb: 4096
  page_size_kb: 4
}

duration_ms: 10000
