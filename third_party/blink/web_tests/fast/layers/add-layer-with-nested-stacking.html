<style>
#test {
    overflow: hidden; /* Required to reproduce. */
}

#test::before {
    content: "";  /* Some content required to reproduce. */
    opacity: 0.999; /* Required to reproduce. */
    display: block;
    width: 100px;
    height: 100px;
    background-color: green;
}
</style>
<div id="test" style="display: none"></div>
<script src="../../resources/run-after-layout-and-paint.js"></script>
<script type="text/javascript">
    if (window.testRunner)
        testRunner.waitUntilDone();
    runAfterLayoutAndPaint(function() {
        document.getElementById("test").style.display = "block";
        if (window.testRunner)
            testRunner.notifyDone();
    });
</script>
