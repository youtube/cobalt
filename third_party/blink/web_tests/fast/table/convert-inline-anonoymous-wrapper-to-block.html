<!DOCTYPE html>
<style>
.green {
    width: 50px;
    height: 20px;
    background-color: green;
}
div, span {
    font: 10px/1 Ahem;
}
</style>
<div id="container" style="float:left" data-expected-height=50 data-expected-width=50>
    <span id="span">
        <div class="green"></div>
        <div style="display: table-cell;" id="cell"></div>
        <span></span>
    </span>
</div>
<p>crbug.com/372832: The div should be inserted before the anonymous table wrapper surrounding the table-row and the anonymous table wrapper
                should be in the last anonymous block, not the middle one.</p>
<script src="../../resources/check-layout.js"></script>
<script>
    document.body.offsetTop;
    div = document.createElement("div");
    div.setAttribute("class", "green");
    cell = document.getElementById("cell");
    span.insertBefore(div, cell);
    checkLayout("#container");
</script>
