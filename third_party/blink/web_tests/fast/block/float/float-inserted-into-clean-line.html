<!-- <!DOCTYPE html> - This test is run in quirks mode. -->
<style>
.float { float: right; }
</style>
<script>
var docElement = document.documentElement;
var text;
function runTest() {
    docElement.appendChild(foo);
    style = document.createElementNS("http://www.w3.org/TR/REC-html40", "style");
    docElement.appendChild(style);
    text = document.createTextNode("uuO,*MkR41 KE? , Wm?_8)}ej  0r{H!= ^.Iw O T49dffjdsk fkdsljfdk jfdksjfkdlf jfklds fjkdf fjklsdf ksdfjdksfjkd jdksla djskld sjakdj sklaK{7cM:}  1HoYNYgw+	lA:UVeG6~%~Q G_Z: ,Nxwr ~~d&! ILugpV4yR 7Q=zX  iFhmm2 ;WSubT4o0 t` -F=. qsDYER U6Pm({x g=Q	O, .V Au : ] ;/X57^{ k14[1p%{))kT-X. 1h%{T  J$%~ u@ hHcWwy`CO($3Dd");
    docElement.appendChild(text);
    form = document.createElement("form");
    form.setAttribute("class", "float");
    docElement.appendChild(form);
    setTimeout("attemptToCrash()");
}
document.addEventListener("DOMContentLoaded", runTest, false);
function attemptToCrash() {
    caption = document.createElement("figcaption");
    caption.setAttribute("class", "float");
    style.appendChild(caption);
    span = document.createElement("span");
    foo.parentNode.appendChild(span);
}
</script>
<foo id="foo" data-expected-height=0></foo>
<p>crbug.com/449986: A float inserted into a clean line should dirty the line otherwise it may avoid layout. </p>
<div id="result">Test passes if it does not crash.</div>
<script src="../../../resources/check-layout.js"></script>
<script>
    checkLayout("foo", document.getElementById("result"));
</script>
