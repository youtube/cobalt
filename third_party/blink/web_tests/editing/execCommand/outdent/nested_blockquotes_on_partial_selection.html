<!doctype html>
<script src="../../../resources/testharness.js"></script>
<script src="../../../resources/testharnessreport.js"></script>
<script src="../../assert_selection.js"></script>
<script>
selection_test(
  [
  '<div contenteditable>',
    '<blockquote>',
      '<div>',
        '<blockquote>',
          '<div>first line</div>',
          '^<div>Outdent me!!!!</div>|',
          '<div>third line</div>',
        '</blockquote>',
      '</div>',
    '</blockquote>',
  '</div>'
  ],
  'Outdent',
  [
  '<div contenteditable>',
    '<blockquote>',
      '<blockquote>',
        '<div>first line</div>',
      '</blockquote>',
      '^Outdent me!!!!|<br>',
      '<blockquote>',
        '<div>third line<br></div>',
      '</blockquote>',
    '</blockquote>',
  '</div>'
  ],
  'Nested blockquote with partial selection');

  // After the above first iteration of outdentation, notice the blockquotes.
  // In this iteration |Outdent me| has gone out of the blockquote
  // should be mantained.
  selection_test(
  [
  '<div contenteditable>',
    '<blockquote>',
      '<blockquote>',
        '<div>first line</div>',
      '</blockquote>',
      '^Outdent me!!!!|<br>',
      '<blockquote>',
        '<div>third line<br></div>',
      '</blockquote>',
    '</blockquote>',
  '</div>'
  ],
  'Outdent',
  [
  '<div contenteditable>',
    '<blockquote>',
      '<blockquote>',
        '<div>first line</div>',
      '</blockquote>',
    '</blockquote>',
    '^Outdent me!!!!|<br>',
    '<blockquote>',
      '<blockquote>',
        '<div>third line<br></div>',
      '</blockquote>',
    '</blockquote>',
  '</div>'
  ],
  'Nested blockquote with different indentation and partial selection');
</script>

