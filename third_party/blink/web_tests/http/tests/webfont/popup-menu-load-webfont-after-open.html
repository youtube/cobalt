<!DOCTYPE html>
<script src="/resources/testdriver.js"></script>
<script src="/resources/testdriver-vendor.js"></script>
<script src="../../forms-test-resources/picker-common.js"></script>

<style>
  @font-face {
      font-family: 'TestFont';
      src: url(slow-ahem-loading.cgi);
  }
  option {
      font-family: TestFont;
  }
</style>
  
<script>
  // Test that fonts loaded after a popup menu is opened triggers a style recalc.
  let fontsReady = new Promise(resolve => document.fonts.ready.then(resolve));
  window.onload = () => {
    openPickerAppearanceOnly(document.querySelector('select'), () => {
      return fontsReady;
    });
  };
</script>

<select>
  <option>foo</option>
  <option>bar</option>
</select>
