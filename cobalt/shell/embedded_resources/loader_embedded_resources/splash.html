<html>
  <head>
    <style>
      body {
        margin: 0;
        background: #0d0d0d;
      }

      video {
        height: 100%;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <video class="video" id="video" muted disableRemotePlayback></video>
    <div class="placeholder" id="placeholder"></div>
  </body>
  <footer>
    <script>
      const maybeDestroyVideoInstance = () => {};
      const getPlaceholderEl = () => document.getElementById('placeholder');
      const getVideoEl = () => document.getElementById('video');

      function animate(onAnimationEnd) {
        const videoEl = getVideoEl();
        if (!videoEl) {
          return;
        }

        videoEl.addEventListener('ended', () => {
          maybeDestroyVideoInstance();
          onAnimationEnd && onAnimationEnd();
          window.close();
        });

        const showPlaceholderImage = () => {
          const placeholderEl = getPlaceholderEl && getPlaceholderEl();
          if (placeholderEl) {
            placeholderEl.style.opacity = '100%';
          }
        };
        playSplashAnimation(/*afterVideoStart=*/ showPlaceholderImage);
      }

      /**
       * Plays the splash animation video in the given video element.
       * @param afterVideoStart Callback function when the video starts playing.
       */
      function playSplashAnimation(afterVideoStart) {
        const videoEl = getVideoEl();
        if (!videoEl) {
          return;
        }
        videoEl.src = 'h5vcc-embedded://splash.webm';
        videoEl.play();
        afterVideoStart && afterVideoStart();
      }

      animate(() => console.log('splash animation completed!'));
    </script>
  </footer>
</html>
