<!doctype HTML>
<div style="width: 300px; height: 300px; background: green; margin-top: 1500px"></div>
<div id=spacer style="position: relative; width: 10px; height: 300px"></div>
<script>
if (window.testRunner)
  testRunner.waitUntilDone();
onload = function() {
  window.scrollTo(0, 3000);

  requestAnimationFrame(() =>
    requestAnimationFrame(() =>
        requestAnimationFrame(() =>
            go())));
}
function go() {
  spacer.style.height = '1000px';
  spacer.offsetWidth;
  window.scrollTo(0, 3000);
  spacer.offsetWidth;
  spacer.style.height = '300px';
  spacer.offsetWidth;
  if (window.testRunner)
    testRunner.notifyDone();
}
</script>
