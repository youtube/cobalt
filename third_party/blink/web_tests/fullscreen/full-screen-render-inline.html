<!DOCTYPE html>
<html>
<body>
<div>a<span>b<div>c</div>d</span>e</div>
<script>
    // This test turns fullscreen on and off quickly,
    // then see if it renderes just like as before.
    if (window.testRunner)
        testRunner.waitUntilDone();
    document.body.offsetTop;
    var span = document.getElementsByTagName('span')[0];

    var fullscreenChangeEvent = function(event) {
        if (document.webkitIsFullScreen) {
            setTimeout(function () {
                document.webkitCancelFullScreen();
            }, 0);
        } else {
            if (window.testRunner)
                testRunner.notifyDone();
        }
    };

    document.addEventListener('webkitfullscreenchange', fullscreenChangeEvent);

    document.addEventListener('keydown', function () {
        span.webkitRequestFullScreen();
    });
    if (window.eventSender)
        eventSender.keyDown('a');
</script>
</body>
</html>
