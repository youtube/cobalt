<!DOCTYPE html>
<script src="../../resources/run-after-layout-and-paint.js"></script>
<script>
if (window.testRunner)
    internals.settings.setPreferCompositingToLCDTextEnabled(true);
</script>
<style>
#parent {
  position: absolute;
  background-color: red;
}
</style>
<div id="parent">
  <div id="child"></div>
</div>
This test passes if it doesn't crash.
<script>
if (window.testRunner) {
  testRunner.dumpAsText();
  testRunner.waitUntilDone();
}

runAfterLayoutAndPaint(function() {
  document.getElementById('parent').style.visibility = 'hidden';
  runAfterLayoutAndPaint(function() {
    testRunner.notifyDone();
  });
});
</script>
