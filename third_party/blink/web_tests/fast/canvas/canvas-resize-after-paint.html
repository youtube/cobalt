<!DOCTYPE html>
<script src="../../resources/run-after-layout-and-paint.js"></script>
<canvas id="c" width=100 height=100></canvas>
<!-- Tests that resizing a canvas to very large dimensions after a composite does not crash -->
<script>
if (window.testRunner) {
    testRunner.dumpAsText();
    testRunner.waitUntilDone();
}
var c = document.getElementById("c");

function resize() {
    c.width  =  "5000";
    c.height = "10000";
    document.write("PASS");
    if (window.testRunner)
        testRunner.notifyDone();
}

// Force a composite at normal width/height to ensure we have a compositing layer for the canvas.
runAfterLayoutAndPaint(resize);
</script>

