<!--
Copyright 2020 The Chromium Authors
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<!--
This file is used to generate a comprehensive list of Borealis histograms
along with a detailed description for each histogram.

For best practices on writing histogram descriptions, see
https://chromium.googlesource.com/chromium/src.git/+/HEAD/tools/metrics/histograms/README.md

Please follow the instructions in the OWNERS file in this directory to find a
reviewer. If no OWNERS file exists, please consider signing up at
go/reviewing-metrics (Googlers only), as all subdirectories are expected to
have an OWNERS file. As a last resort you can send the CL to
chromium-metrics-reviews@google.com.
-->

<histogram-configuration>

<histograms>

<histogram name="Borealis.Disk.HighestDirtyPagesDaily" units="KiB"
    expires_after="2023-10-09">
  <owner>danielng@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    The highest dirty page value observed in Borealis that day (taken
    from`/proc/meminfo`). Reported daily.
  </summary>
</histogram>

<histogram name="Borealis.Disk.InodeRatioAtStartup" units="KiB"
    expires_after="2023-10-09">
  <owner>danielng@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    The amount of bytes used per an inode, on average, in Borealis. This is
    recorded once during each startup, when maitred emits disk related metrics.
  </summary>
</histogram>

<histogram name="Borealis.Disk.StatefulReadsDaily" units="KiB"
    expires_after="2023-10-09">
  <owner>philpearson@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>Borealis stateful KiB read per day. Reported daily.</summary>
</histogram>

<histogram name="Borealis.Disk.StatefulWritesDaily" units="KiB"
    expires_after="2023-10-09">
  <owner>philpearson@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>Borealis stateful KiB written per day. Reported daily.</summary>
</histogram>

<histogram name="Borealis.Disk.SwapReadsDaily" units="KiB"
    expires_after="2023-10-09">
  <owner>philpearson@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>Borealis swap file KiB read per day. Reported daily.</summary>
</histogram>

<histogram name="Borealis.Disk.SwapWritesDaily" units="KiB"
    expires_after="2023-10-09">
  <owner>philpearson@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>Borealis swap file KiB written per day. Reported daily.</summary>
</histogram>

<histogram name="Borealis.Disk.VMUsageToTotalSpacePercentageAtStartup"
    units="%" expires_after="2023-10-09">
  <owner>danielng@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    The percent of space that the VM is using in comparison to the total size of
    the disk (i.e VM_usage/total_disk_size). This is recorded once during each
    startup, when maitred emits disk related metrics.
  </summary>
</histogram>

<histogram name="Borealis.Disk.VMUsageToTotalUsagePercentageAtStartup"
    units="%" expires_after="2023-10-09">
  <owner>danielng@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    The percent of space that the VM is using in comparison to the total amount
    of space being used (i.e VM_usage/total_usage). This is recorded once during
    each startup, when maitred emits disk related metrics.
  </summary>
</histogram>

<histogram name="Borealis.EngagementTime.{Variant}" units="ms"
    expires_after="2023-10-09">
  <owner>lqu@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    {Variant} Engagement time metrics, along with foreground and background
    time, are only collected on users with Borealis enabled. All four metrics
    are accumulated and recorded to UMA once a day.
  </summary>
  <token key="Variant">
    <variant name="Background"
        summary="Times when a user is engaged and Borealis apps are running
                 in the background, but the user isn't focusing on an
                 Borealis app window."/>
    <variant name="BorealisTotal"
        summary="Total of Borealis.EngagementTime.Background and .Foreground,
                 which is the time the user is engaged and Borealis is
                 running either in the foreground or background."/>
    <variant name="Foreground"
        summary="Times when a user is engaged and focuses on a Borealis GUI
                 window."/>
    <variant name="Total" summary="Should be same as BorealisTotal."/>
  </token>
</histogram>

<histogram name="Borealis.Install.NumAttempts" enum="BooleanAttempted"
    expires_after="2023-10-09">
  <owner>danielng@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    The number of Borealis installation attempts. This is recorded each time a
    user tries to install Borealis. Specifically, this metric is recorded when a
    user clicks on the install or retry button in the Borealis installer. It is
    intended that this metric is compared against the sum of
    Borealis.Install.Result as a way to measure silent failures.
  </summary>
</histogram>

<histogram name="Borealis.Install.OverallTime" units="ms"
    expires_after="2023-10-09">
  <owner>danielng@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    Time taken for a successful installation. An install starts when the
    &quot;install&quot; or &quot;retry&quot; installer buttons are clicked and
    ends when the install completes successfully, at which point this metric is
    recorded. Note that retries are considered as their own individual
    installation attempts.
  </summary>
</histogram>

<histogram name="Borealis.Install.Result" enum="BorealisInstallResult"
    expires_after="2023-10-09">
  <owner>danielng@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    The installation result, for example, a successful install, a cancelled
    install, or an error. This is recorded after an installation attempt has
    ended.
  </summary>
</histogram>

<histogram name="Borealis.Install.Retries" units="retries"
    expires_after="2023-10-09">
  <obsolete>
    Code moved to GuestOs, no longer recorded.
  </obsolete>
  <owner>hollingum@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    The number of times the borealis DLC installation was retried by the
    installer. The main use of this is to determine if 1 and 2 appear often, and
    significantly more often than 3 (the maximum), i.e. to see whether retrying
    leads to success or changes nothing.
  </summary>
</histogram>

<histogram name="Borealis.Shutdown.Attempt" enum="BooleanAttempted"
    expires_after="2023-10-09">
  <owner>lqu@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    Recording every attempt to exit Borealis given the that VM was launched.
    Recorded regardless of if the shutdown is successful.
  </summary>
</histogram>

<histogram name="Borealis.Stability" enum="GuestOsFailureClasses"
    expires_after="2023-10-09">
  <owner>cpelling@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    A record of post-startup failures in Borealis components. Buckets are
    recorded to when we become aware that the corresponding component has
    failed.
  </summary>
</histogram>

<histogram name="Borealis.Startup.fsckResult" enum="BorealisStartupFsckResult"
    expires_after="2023-10-09">
  <owner>danielng@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    Return code from running fsck during VM startup. This is recorded once
    during each startup, when maitred emits disk related metrics.
  </summary>
</histogram>

<histogram name="Borealis.Startup.fsckTime" units="ms"
    expires_after="2023-10-09">
  <owner>danielng@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    The time taken for fsck to complete during VM startup. This is recorded once
    during each startup, when maitred emits disk related metrics.
  </summary>
</histogram>

<histogram name="Borealis.Startup.NumAttempts" enum="BooleanAttempted"
    expires_after="2023-10-09">
  <owner>danielng@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>Recording every attempt to start Borealis (via the UI).</summary>
</histogram>

<histogram name="Borealis.Startup.OverallTime" units="ms"
    expires_after="2023-10-09">
  <owner>danielng@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    Recording the time taken for each successful attempt to start Borealis (via
    the UI).
  </summary>
</histogram>

<histogram name="Borealis.Startup.Result" enum="BorealisStartupResult"
    expires_after="2023-10-09">
  <owner>danielng@google.com</owner>
  <owner>src/chrome/browser/ash/borealis/OWNERS</owner>
  <summary>
    Recording the result of each attempt to start Borealis, whether it was
    successful or the error that it faced.
  </summary>
</histogram>

</histograms>

</histogram-configuration>
