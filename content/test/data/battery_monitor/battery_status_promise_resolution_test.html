<html>
  <head>
    <title>Battery Status API test : promise resolution</title>
    <script type="text/javascript">

      function checkBatteryInfo(battery) {
        return battery.charging &&
               battery.chargingTime == 100 &&
               battery.dischargingTime == Infinity &&
               battery.level == 0.5;
      }

      function testBattery() {
        navigator.getBattery().then(
          function(battery) {
            if (checkBatteryInfo(battery))
              pass();
            else
              fail();
          }, fail());
      }

      function pass() {
        document.getElementById('status').innerHTML = 'PASS';
        document.location = '#pass';
      }

      function fail() {
        document.location = '#fail';
      }
    </script>
  </head>
  <body onLoad="testBattery()">
    <div id="status">FAIL</div>
  </body>
</html>
