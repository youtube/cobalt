# Copyright 2025 The Chromium Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

assert(!is_android)

import("//build/config/chromeos/ui_mode.gni")
import("//mojo/public/tools/bindings/mojom.gni")
import("//ui/webui/resources/tools/build_webui.gni")

mojom("mojo_bindings") {
  sources = [ "reload_button.mojom" ]
  webui_module_path = "/"
  public_deps = [ "//mojo/public/mojom/base" ]
}

source_set("reload_button") {
  sources = [
    "reload_button_page_handler.h",
    "reload_button_ui.h",
  ]
  public_deps = [
    ":mojo_bindings",
    "//chrome/browser/ui/webui/metrics_reporter",
    "//chrome/browser/ui/webui/top_chrome",
    "//chrome/common:constants",
    "//content/public/browser",
  ]
  deps = [ "//chrome/browser:primitives" ]
}

source_set("impl") {
  sources = [
    "reload_button_page_handler.cc",
    "reload_button_ui.cc",
  ]
  public_deps = [ "//chrome/browser:browser_public_dependencies" ]
  deps = [
    ":mojo_bindings",
    ":reload_button",
    "//chrome/app:command_ids",
    "//chrome/browser:primitives",
    "//chrome/browser/resources/reload_button:resources_grit",
    "//chrome/browser/ui:ui_features",
    "//chrome/browser/ui/browser_window",
    "//chrome/browser/ui/webui:webui_util",
    "//chrome/common",
    "//content/public/browser",
    "//ui/webui",
  ]
}
source_set("unit_tests") {
  testonly = true
  sources = [
    "reload_button_page_handler_unittest.cc",
    "reload_button_test_utils.cc",
    "reload_button_test_utils.h",
    "reload_button_ui_unittest.cc",
  ]

  deps = [
    ":reload_button",
    "//base",
    "//base/test:test_support",
    "//chrome/browser",
    "//chrome/browser/ui/webui:webui_util",
    "//chrome/browser/ui/webui/metrics_reporter:test_support",
    "//chrome/test:test_support",
    "//content/test:test_support",
    "//testing/gmock",
    "//testing/gtest",
    "//url",
  ]
}
