<html>
<head>
<script>
function test()
{
    document.querySelector('iframe').addEventListener('load', function () {
        if (window.testRunner)
            testRunner.notifyDone();
    });
    window.frames['crossDomainFrame'].location.replace("http://127.0.0.1:8000/misc/resources/success.html");
}

if (window.testRunner)
    testRunner.waitUntilDone();

</script>
</head>
<body onload="test();">
<iframe name="crossDomainFrame" src="http://localhost:8000/misc/resources/failure.html"></iframe>
</body>
</html>
<!--
<rdar://problem/4808039>
http://bugs.webkit.org/show_bug.cgi?id=11230
-->
