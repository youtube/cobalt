<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebPage">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cobalt / Porting Cobalt to your Platform with Starboard</title>

            <!-- Webfont -->
    <link href='http://fonts.googleapis.com/css?family=Kavoon|Material+Icons' rel='stylesheet' type='text/css'>
    
    <!-- Material Design Lite -->
    <link href="/cobalt/assets/material-design-lite/material.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- Bootstrap -->
    <link href="/cobalt/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Styles -->
    <link rel="stylesheet" type="text/css" href="/cobalt/css/site.css" />

    <!-- Font Awesome icons -->
    <link href="/cobalt/assets/font-awesome-4.4.0/css/font-awesome.min.css"
          rel="stylesheet"
          type="text/css">
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/cobalt/assets/bootstrap/js/bootstrap.min.js"></script>

    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

    <!-- material design lite -->
    <script src="/cobalt/assets/material-design-lite/material.min.js"></script>

    <!-- Include the common site javascript -->
    <script src="/cobalt/js/common.js" type="text/javascript" charset="utf-8"></script>

    <!-- metadata -->
    <meta name="og:title" content="Cobalt / "/>
    <meta name="og:image" content="/cobalt/images/cobalt-logo.png"/>
    <meta name="og:description" content="A high-performance, small-footprint platform that implements a subset of HTML5/CSS/JS to run applications, including the YouTube TV app."/>
  </head>
  <body class="" id="top_of_page">

    <span id="toc-depth" data-toc-depth="h2,h3"></span>
    <nav id="common-nav" class="navbar navbar-fixed-top inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">
        <img class="logo" src="/cobalt/images/cobalt-logo.png" alt="Cobalt">
      </a>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right" id="standard-menu-links">
      <li><a href="/cobalt/starboard/porting.html">Porters</a></li>
      <li><a href="/cobalt/development/setup-linux.html">Developers</a></li>
      <li><a href="/cobalt/contributors/index.html">Contributors</a></li>
      <li><a href="https://cobalt.googlesource.com/cobalt"><i class="fa fa-github"></i> Code Repo</a></li>
      </ul>
      <ul class="nav nav-stacked mobile-left-nav-menu" id="collapsed-left-menu">
        
  
<li class="expand-container" data-expander-target-search="relative">
          <h4 class="submenu no-top-margin">Porters</h4>
  <ul class="content">
    <li><b>Guides</b>
      <ul>
        <li><a href="/cobalt/starboard/porting.html">Port Cobalt to your platform</a></li>
        <li><a href="/cobalt/starboard/testing.html">Testing with NPLB</a></li>
      </ul>
    </li>
    <li><b>Reference</b>
      <ul>
        <li><a href="/cobalt/reference/starboard/configuration-public.html">configuration_public.h</a></li>
        <li><a href="/cobalt/reference/starboard/gyp-configuration.html">gyp_configuration.gypi</a></li>
                <li><b>Starboard modules</b>
          <ul>
                      <li><a href="/cobalt/reference/starboard/modules/atomic.html">atomic.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/audio_sink.html">audio_sink.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/blitter.html">blitter.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/byte_swap.html">byte_swap.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/character.html">character.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/condition_variable.html">condition_variable.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/configuration.html">configuration.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/directory.html">directory.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/double.html">double.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/drm.html">drm.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/event.html">event.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/export.html">export.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/file.html">file.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/input.html">input.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/key.html">key.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/log.html">log.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/media.html">media.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/memory.html">memory.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/mutex.html">mutex.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/once.html">once.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/player.html">player.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/queue.html">queue.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/socket.html">socket.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/socket_waiter.html">socket_waiter.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/spin_lock.html">spin_lock.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/storage.html">storage.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/string.html">string.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/system.html">system.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/thread.html">thread.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/thread_types.html">thread_types.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/time.html">time.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/time_zone.html">time_zone.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/types.html">types.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/user.html">user.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/window.html">window.h</a></li>
          </ul>
      </ul>
    </li>
  </ul>
</li>
  
<li class="expand-container" data-expander-target-search="relative">
          <h4 class="submenu">Developers</h4>
  <ul class="content">
    <li><b>Guides</b>
      <ul>
        <li><a href="/cobalt/development/setup-linux.html">Setup - Linux</a></li>
        <li><a href="/cobalt/development/setup-raspi.html">Setup - RasPi</a></li>
      </ul>
    </li>
    <li><b>Reference</b>
      <ul>
        <li><a href="/cobalt/development/reference/supported-features.html">Cobalt support</a></li>
      </ul>
    </li>
  </ul>
</li>
  

<li class="expand-container" data-expander-target-search="relative">
<h4 class="no-submenu"><a href="/cobalt/contributors/index.html">Contributors</a></h4>
</li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container -->
</nav>
    
<div id="masthead">
  <div class="container">
    <div class="row">
      <div class="col-md-11">
        <h1>Porting Cobalt to your Platform with Starboard</h1>
      </div>
    </div>
  </div>
</div>


<div class="container">
    <div class="row scroll-margin" id="toc-content-row">
    <div class="col-md-2" id="leftCol">
      <ul class="nav nav-stacked mobile-left-nav-menu" id="sidebar">
        
<li class="expand-container" data-expander-target-search="relative">
<h4 class="no-submenu no-top-margin"><a href="/cobalt/overview.html">Overview</a></h4>
</li>
        
  
<li class="expand-container" data-expander-target-search="relative">
          <h4 class="submenu no-top-margin">Porters</h4>
  <ul class="content">
    <li><b>Guides</b>
      <ul>
        <li><a href="/cobalt/starboard/porting.html">Port Cobalt to your platform</a></li>
        <li><a href="/cobalt/starboard/testing.html">Testing with NPLB</a></li>
      </ul>
    </li>
    <li><b>Reference</b>
      <ul>
        <li><a href="/cobalt/reference/starboard/configuration-public.html">configuration_public.h</a></li>
        <li><a href="/cobalt/reference/starboard/gyp-configuration.html">gyp_configuration.gypi</a></li>
                <li><b>Starboard modules</b>
          <ul>
                      <li><a href="/cobalt/reference/starboard/modules/atomic.html">atomic.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/audio_sink.html">audio_sink.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/blitter.html">blitter.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/byte_swap.html">byte_swap.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/character.html">character.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/condition_variable.html">condition_variable.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/configuration.html">configuration.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/directory.html">directory.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/double.html">double.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/drm.html">drm.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/event.html">event.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/export.html">export.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/file.html">file.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/input.html">input.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/key.html">key.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/log.html">log.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/media.html">media.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/memory.html">memory.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/mutex.html">mutex.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/once.html">once.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/player.html">player.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/queue.html">queue.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/socket.html">socket.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/socket_waiter.html">socket_waiter.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/spin_lock.html">spin_lock.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/storage.html">storage.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/string.html">string.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/system.html">system.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/thread.html">thread.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/thread_types.html">thread_types.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/time.html">time.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/time_zone.html">time_zone.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/types.html">types.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/user.html">user.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/window.html">window.h</a></li>
          </ul>
      </ul>
    </li>
  </ul>
</li>
<li class="expand-container" data-expander-target-search="relative">
          <h4 class="submenu">Developers</h4>
  <ul class="content">
    <li><b>Guides</b>
      <ul>
        <li><a href="/cobalt/development/setup-linux.html">Setup - Linux</a></li>
        <li><a href="/cobalt/development/setup-raspi.html">Setup - RasPi</a></li>
      </ul>
    </li>
    <li><b>Reference</b>
      <ul>
        <li><a href="/cobalt/development/reference/supported-features.html">Cobalt support</a></li>
      </ul>
    </li>
  </ul>
</li>
<li class="expand-container" data-expander-target-search="relative">
<h4 class="no-submenu"><a href="/cobalt/contributors/index.html">Contributors</a></h4>
</li>
      </ul>
    </div>
    <div class="col-md-3 show-share-buttons-bottom" id="rightCol">
      <div class="nav nav-stacked" id="tocSidebar">
        
        <div id="toc"></div>
        
        
      </div>
    </div>
    <div class="col-md-7" id="centerCol">
      <div id="content">
        <p>This document provides step-by-step instructions for porting Cobalt to run
on your platform. To do so, you&#39;ll use Starboard, which is Cobalt&#39;s porting
layer and OS abstraction. Starboard encapsulates only the platform-specific
functionality that Cobalt uses.</p>

<p>To complete a port, you need to add code to the Cobalt source tree. We
recognize that many porters will not want to actually share details of
their Starboard implementation with external users. These porters likely
have their own source control and will fork Cobalt into their software
configuration management (SCM) tools. These instructions take that use
case into account and explain how to add your port in a way that will not
conflict with future Cobalt source code changes.</p>

<h2 id="porting-steps">Porting steps</h2>

<h3 id="1-enumerate-and-name-your-platform-configurations">1. Enumerate and name your platform configurations</h3>

<p>Your first step is to define canonical names for your set of platform
configurations. You will later use these names to organize the code
for your platforms.</p>

<p>A platform configuration has a one-to-one mapping to a production binary.
As such, you will need to create a new platform configuration any time you
need to produce a new binary.</p>

<p>A platform configuration name has two components:</p>

<ul>
<li>  The <code class="prettyprint">&lt;family-name&gt;</code> is a name that encompasses a group of products that
you are porting to Starboard.</li>
<li>  The <code class="prettyprint">&lt;binary-variant&gt;</code> is a string that uniquely describes specifics
of the binary being produced for that configuration.</li>
</ul>

<p>The recommended naming convention for a platform configuration is:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;family-name&gt;-&lt;binary-variant&gt;
</code></pre></div>
<p>For example, suppose a company named BobCo produces a variety of BobBox
devices. Some of the devices use big-endian MIPS chips, while others use
little-endian MIPS chips. BobCo might define two platform configurations:</p>

<ul>
<li>  <code class="prettyprint">bobbox-mipseb</code></li>
<li>  <code class="prettyprint">bobbox-mipsel</code></li>
</ul>

<p>In this example, <code class="prettyprint">bobbox</code> is the family name and is used in both (all)
of BobCo&#39;s platform configurations. The <code class="prettyprint">binary-variant</code> for devices with
big-endian MIPS chips is <code class="prettyprint">mipseb</code>. For devices with little-endian MIPS chips,
the <code class="prettyprint">binary-variant</code> is <code class="prettyprint">mipsel</code>.</p>

<p>Starboard also supports sub-variant configurations to maximize your ability
to share code between configurations. For example, if some of BobCo's devices
that use little-endian chips use DirectFB, but other devices use OpenGL ES,
BobCo could create two different configurations for little-endian chips:

<ul>
<li>  <code class="prettyprint">bobbox-mipsel-gles</code></li>
<li>  <code class="prettyprint">bobbox-mipsel-dfb</code></li>
</ul>

<h3 id="2-add-source-tree-directories-for-your-starboard-port">2. Add Source Tree Directories for your Starboard Port</h3>

<p>Add the following directories to the source tree for the <code class="prettyprint">&lt;family-name&gt;</code>
that you selected in step 1:</p>

<ul>
<li><p><code class="prettyprint">src/third_party/starboard/&lt;family-name&gt;/</code></p></li>
<li><p><code class="prettyprint">src/third_party/starboard/&lt;family-name&gt;/shared/</code></p>

<p>This subdirectory contains code that is shared between architectures
within a product family. For example, if BobBox devices run on many
different platforms, then BobCo needs to define a different configuration
for each platform. However, if all of the configurations can use the same
Starboard function implementation, BobCo can put that function in the
<code class="prettyprint">shared</code>
directory to make it accessible in every binary variant.
<li><p><code class="prettyprint">src/third_party/starboard/&lt;family-name&gt;/&lt;binary-variant&gt;/</code></p>

<p>You should create one directory for <em>each</em> <code class="prettyprint">&lt;binary-variant&gt;</code>. So, for
example, BobCo could create the following directories:</p>

<ul>
<li>  <code class="prettyprint">src/third_party/starboard/bobbox/shared/</code></li>
<li>  <code class="prettyprint">src/third_party/starboard/bobbox/mipseb/</code></li>
<li>  <code class="prettyprint">src/third_party/starboard/bobbox/mipsel/</code></li>
<li>  <code class="prettyprint">src/third_party/starboard/bobbox/mipsel/dfb/</code></li>
<li>  <code class="prettyprint">src/third_party/starboard/bobbox/mipsel/gles/</code></li>
</ul></li>
</ul>

<p>Again, functions that work for all of the configurations would go in the
<code class="prettyprint">shared</code> directory. Functions that work for all
little-endian devices would go in the <code class="prettyprint">mipsel</code>
directory. And functions specific to little-endian devices that use DirectFB
or that use OpenGL ES would go in the
<code class="prettyprint">mipsel/dfb</code> or
<code class="prettyprint">mipsel/gles</code> directory.</p>


<h3 id="3-add-required-binary-variant-files">3. Add required <code class="prettyprint">binary-variant</code> files</h3>

<p>Each <code class="prettyprint">binary-variant</code> directory that you created in step 2 must contain
the following files:</p>

<ul>
<li>  <code class="prettyprint">atomic_public.h</code></li>
<li>  <code class="prettyprint">configuration_public.h</code></li>
<li>  <code class="prettyprint">gyp_configuration.gypi</code></li>
<li>  <code class="prettyprint">gyp_configuration.py</code></li>
<li>  <code class="prettyprint">starboard_platform.gyp</code></li>
<li>  <code class="prettyprint">thread_types_public.h</code></li>
</ul>

<p>We recommend that you copy the files from the Stub reference implementation,
located at <code class="prettyprint">src/third_party/stub/</code> to your <code class="prettyprint">binary-variant</code> directories.
In this approach, you will essentially start with a clean slate of stub
interfaces that need to be modified to work with your platform.</p>

<p>An alternate approach is to copy either the Desktop Linux or Raspberry Pi
ports and then work backward to fix the things that don&#39;t compile or work
on your platform.</p>

<p>If you are copying the Stub implementation, you would run the following
command for each <code class="prettyprint">binary-variant</code> directory:</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">cp -R src/starboard/stub
      src/third_party/starboard/&lt;family-name&gt;/&lt;binary-variant&gt;
</code></pre></div>
<p>After copying these files, you should be able to compile Cobalt and link it
with your toolchain even though the code itself will not yet work.</p>

<h4 id="3a-additional-files-in-the-stub-implementation">3a. Additional files in the stub implementation</h4>

<p>The stub implementation contains three additional files that are not listed
among the required files for each <code class="prettyprint">binary-variant</code> directory:</p>

<ul>
<li>  <code class="prettyprint">application_stub.cc</code></li>
<li>  <code class="prettyprint">application_stub.h</code></li>
<li>  <code class="prettyprint">main.cc</code></li>
</ul>

<p>The Starboard <code class="prettyprint">Application</code> class is designed to do the following:</p>

<ul>
<li>  Integrate a generic message loop function with a system message pump that
can deliver either input or application lifecycle events like
suspend/resume.</li>
<li>  Provide a place for graceful platform-specific initialization and teardown.</li>
<li>  Provide a universally accessible place to store global platform-specific
state, such as managed UI windows.</li>
</ul>

<p>Thus, these files provide a framework for fulfilling Starboard&#39;s event
dispatching requirements, even though they don&#39;t implement any specific
Starboard interface and aren&#39;t strictly necessary for any given port. Even so,
anyone who is porting Cobalt will likely need to adapt a copy of
<code class="prettyprint">application_stub.cc</code> and <code class="prettyprint">application_stub.h</code> to their platforms needs.</p>

<p>The <code class="prettyprint">application</code> files do not necessarily need to be per-variant files. Even
if you have multiple variants, it&#39;s still possible that you only need one copy
of these files in your <code class="prettyprint">shared</code> directory. Similarly, you might have a shared
base class along with variant-specific subclasses.</p>

<h3 id="4-make-required-file-modifications">4. Make required file modifications</h3>

<p>To port your code, you must make the following modifications to the files
that you copied in step 3:</p>

<ol>
<li><p><strong><code class="prettyprint">atomic_public.h</code></strong> - Ensure that this file points at the appropriate
shared or custom implementation.</p></li>
<li><p><strong><code class="prettyprint">configuration_public.h</code></strong> - Adjust all of the <a href="../../reference/starboard/configuration-public.html">configuration values</a> as appropriate for
your platform.</p></li>
<li><p><strong><code class="prettyprint">gyp_configuration.py</code></strong></p>

<ol>
<li><p>Modify the <code class="prettyprint">CreatePlatformConfig()</code> function to return the platform
configuration that you defined in step 1. The example below shows that
function as it appears in the Stub implementation and the Desktop
Linux port:</p>

<pre>
# Stub:
def CreatePlatformConfig():
  try:
    return PlatformConfig('<b>stub</b>')
  except RuntimeError as e:
    logging.critical(e)
    return None

# Desktop Linux
def CreatePlatformConfig():
  try:
    return gyp_configuration.PlatformConfig('<b>linux-x64x11</b>')
  except RuntimeError as e:
    logging.critical(e)
    return None
</pre>

<p>Note that the third line is the only one that is different. The
key difference in terms of these instructions is changing <code class="prettyprint">stub</code>
to <code class="prettyprint">linux-x64x11</code>. The Desktop Linux port also uses a shared copy
of <code class="prettyprint">gyp_configuration.py</code>, which is why the rest of the line is
different.</p></li>
<li><p>In the <code class="prettyprint">GetVariables</code> function, ensure that the <code class="prettyprint">clang</code> variable
is set to <code class="prettyprint">1</code> if your toolchain uses clang:</p>

<pre>
variables = super(PlatformConfig, self).GetVariables(configuration)
<b>variables.update({'clang': 1,})</b>
return variables
</pre></li>
<li><p>In the <code class="prettyprint">GetEnvironmentVariables</code> function, set these dictionary values
to the toolchain analogs for your platform. Note that &quot;target platform&quot;
refers to the platform being targeted by the port (e.g. Android TV,
Raspberry Pi) and &quot;host platform&quot; is the workstation platform running
the cross-compiler to the target (e.g. desktop Linux, desktop Windows).</p>

<ul>
<li>  <code class="prettyprint">CC</code> - the C compiler for the target platform. Example: <code class="prettyprint">clang</code>.</li>
<li>  <code class="prettyprint">CXX</code> - the C++ compiler for the target platform.
Example: <code class="prettyprint">clang++</code>.</li>
<li>  <code class="prettyprint">CC_HOST</code> - the C compiler for the host platform. Example: <code class="prettyprint">clang</code>.</li>
<li>  <code class="prettyprint">CXX_HOST</code> - the C++ compiler for the host platform.
Example: <code class="prettyprint">clang++</code>.</li>
<li>  <code class="prettyprint">LD_HOST</code> - the C++ linker for the host platform.
Example: <code class="prettyprint">clang++</code>.</li>
<li>  <code class="prettyprint">ARFLAGS_HOST</code> - Archiver flags for the host platform. The
archiver is the toolchain program that creates static libraries.
Example: <code class="prettyprint">rcs</code>.</li>
<li>  <code class="prettyprint">ARTHINFLAGS_HOST</code> - Archiver flags for the host platform for
creating &quot;thin&quot; archives, which are faster for intermediate
libraries that aren&#39;t for direct publishing. Example: <code class="prettyprint">rcsT</code>.</li>
</ul></li>
</ol></li>
<li><p><strong><code class="prettyprint">gyp_configuration.gypi</code></strong></p>

<ol>
<li><p>Update the value of the <code class="prettyprint">default_configuration</code> property and the keys
in the <code class="prettyprint">configurations</code> property to be
<code class="prettyprint">&lt;platform-configuration&gt;_&lt;build-type&gt;</code> where:</p>

<ol>
<li> <code class="prettyprint">&lt;platform-configuration&gt;</code> is the value that you defined in step 1.</li>
<li> <code class="prettyprint">&lt;build-type&gt;</code> is one of the following values:

<ul>
<li>  <code class="prettyprint">debug</code></li>
<li>  <code class="prettyprint">devel</code></li>
<li>  <code class="prettyprint">qa</code></li>
<li>  <code class="prettyprint">gold</code></li>
</ul></li>
</ol>

<p>The following snippet from the configuration file shows how these
properties appear in the Stub implementation. The Desktop Linux port
replaces the string <code class="prettyprint">stub</code> with <code class="prettyprint">linux-x64x11</code> everywhere that it
appears:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&#39;target_defaults&#39;: {
  &#39;default_configuration&#39;: &#39;stub_debug&#39;,
  &#39;configurations&#39;: {
    &#39;stub_debug&#39;: {
      &#39;inherit_from&#39;: [&#39;debug_base&#39;],
    },
    &#39;stub_devel&#39;: {
      &#39;inherit_from&#39;: [&#39;devel_base&#39;],
    },
    &#39;stub_qa&#39;: {
      &#39;inherit_from&#39;: [&#39;qa_base&#39;],
    },
    &#39;stub_gold&#39;: {
      &#39;inherit_from&#39;: [&#39;gold_base&#39;],
    },
  }, # end of configurations
  ...
}
</code></pre></div></li>
<li><p>Update the following properties in the <code class="prettyprint">variables</code> dictionary:</p>

<ul>
<li>  <code class="prettyprint">target_arch</code> - Identifies your architecture. Supported values
are <code class="prettyprint">arm</code>, <code class="prettyprint">mips</code>, <code class="prettyprint">ppc</code>, <code class="prettyprint">x64</code>, and <code class="prettyprint">x86</code>.</li>
<li>  <code class="prettyprint">target_os</code> - Set to <code class="prettyprint">linux</code> if your platform is Linux-based.
Otherwise, remove this variable.</li>
<li>  <code class="prettyprint">gl_type</code> - Set to <code class="prettyprint">system_gles2</code> if you are using the system EGL

<ul>
<li>GLES2 implementation or to <code class="prettyprint">system_gles3</code> if you are using the
system EGL + GLES3 implementation. Otherwise, set the value to
<code class="prettyprint">none</code>.</li>
</ul></li>
<li>  <code class="prettyprint">in_app_dial</code> - Enables (or disables) the DIAL server that runs
inside Cobalt. (This server only runs when Cobalt is running.)
The <a href="http://www.dial-multiscreen.org/home">DIAL
protocol</a> enables
second-screen devices (like tablets and phones) to discover,
launch, and interface with applications on first-screen devices
(like televisions, set-top boxes, and Blu-ray players).
<ul>
  <li>Set this value to <code class="prettyprint">0</code> if you already have system-wide DIAL support. In that case, a DIAL server running inside Cobalt would
be redundant.</li>
  <li>Set this value to <code class="prettyprint">1</code> if you want Cobalt
to run a DIAL server whenever it is running. That server could only be used to
connect with the current Cobalt application (e.g. YouTube).</li>
</ul>
</li>
</ul></li>
<li><p>Update your toolchain command-line flags and libraries. Ensure that
you do not assume a particular workstation layout since that layout
may vary from user to user.</p></li>
<li><p>Update the global defines in the <code class="prettyprint">target_defaults.defines</code> dictionary,
if necessary.</p></li>
</ol></li>
<li><p><strong><code class="prettyprint">thread_types_public.h</code></strong> - Ensure that this file points at the
appropriate shared or custom implementation.</p></li>
</ol>

<h3 id="5-port-modules-to-work-on-your-platform">5. Port modules to work on your platform</h3>

<p>The <code class="prettyprint">starboard_platform.gyp</code> file points to all of the source files included
in your new Starboard implementation. If you are starting with a copy of the
Stub implementation, then that file will initially include a lot of files
from the <code class="prettyprint">src/starboard/shared/stub/</code> directory. Similarly, if you are starting
starting with a copy of the Desktop Linux port, then that file will initially
point to files in the <code class="prettyprint">src/starboard/shared/posix</code> directory.</p>

<p>The modules are defined so that each one has a set of functions, and each
function is defined in its own file with a consistent naming convention.
For example, the <code class="prettyprint">SbSystemBreakIntoDebugger()</code> function is defined in the
<code class="prettyprint">system_break_into_debugger.cc</code> file. The list of files in the
<code class="prettyprint">src/starboard/shared/stub/</code> directory represents an authoritative list of
supported functions.</p>

<p>Function-by-function and module-by-module, you can now replace stub
implementations with either custom implementations or with other ported
implementations from the <code class="prettyprint">src/starboard/shared/</code> directory until you have
gone through all of the modules. As you do, update the
<code class="prettyprint">starboard_platform.gyp</code> file to identify the appropriate source files.</p>

<p>Due to dependencies between modules, you will find it easier to get some
modules to pass the NPLB tests before other modules. We recommend porting
modules in the following order to account for such dependencies:</p>

<ol>
<li> Configuration</li>
<li> main(), Application, and Event Pump - This is the call into <code class="prettyprint">SbEventHandle</code>.</li>
<li> Memory</li>
<li> Byte Swap</li>
<li> Time</li>
<li> String/Character/Double</li>
<li> Log</li>
<li> File</li>
<li> Directory</li>
<li> System</li>
<li> Atomic</li>
<li> Thread &amp; Thread Types</li>
<li> Mutex</li>
<li> Condition Variable</li>
<li> Once</li>
<li> Socket</li>
<li> SocketWaiter</li>
<li> Window</li>
<li> Input</li>
<li> Blitter (if applicable)</li>
<li> Audio Sink</li>
<li> Media &amp; Player</li>
<li> DRM</li>
<li> TimeZone</li>
<li> User</li>
<li> Storage</li>
</ol>

        
          
            
          
        
      </div>
    </div>
  </div>

</div>


    

<footer>
<div class="container">
    <div class="row">
        <div class="col-md-5 column-left">
    <span class="copyright-text">Â© Cobalt Team 2016</span>
        </div>
        <div class="col-md-2 column-middle">
  <img class="footer-logo" src="/cobalt/images/cobalt-logo.png" alt="Cobalt"/>
        </div>
        <div class="col-md-5 column-right">&nbsp;</div>
            </div>
</div>
</footer>

    
  </body>
</html>
