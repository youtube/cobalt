<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebPage">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cobalt / Starboard Module Reference: drm.h</title>

            <!-- Webfont -->
    <link href='http://fonts.googleapis.com/css?family=Kavoon|Material+Icons' rel='stylesheet' type='text/css'>
    
    <!-- Material Design Lite -->
    <link href="/cobalt/assets/material-design-lite/material.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- Bootstrap -->
    <link href="/cobalt/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Styles -->
    <link rel="stylesheet" type="text/css" href="/cobalt/css/site.css" />

    <!-- Font Awesome icons -->
    <link href="/cobalt/assets/font-awesome-4.4.0/css/font-awesome.min.css"
          rel="stylesheet"
          type="text/css">
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/cobalt/assets/bootstrap/js/bootstrap.min.js"></script>

    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

    <!-- material design lite -->
    <script src="/cobalt/assets/material-design-lite/material.min.js"></script>

    <!-- Include the common site javascript -->
    <script src="/cobalt/js/common.js" type="text/javascript" charset="utf-8"></script>

    <!-- metadata -->
    <meta name="og:title" content="Cobalt / "/>
    <meta name="og:image" content="/cobalt/images/cobalt-logo.png"/>
    <meta name="og:description" content="A high-performance, small-footprint platform that implements a subset of HTML5/CSS/JS to run applications, including the YouTube TV app."/>
    <link rel="shortcut icon" type="image/png" href="/cobalt/favicon.ico">
  </head>
  <body class="" id="top_of_page">

    <span id="toc-depth" data-toc-depth="h2,h3"></span>
    <nav id="common-nav" class="navbar navbar-fixed-top inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/cobalt/">
        <img class="logo" src="/cobalt/images/cobalt-logo.png" alt="Cobalt">
      </a>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right" id="standard-menu-links">
      <li><a href="/cobalt/starboard/porting.html">Porters</a></li>
      <li><a href="/cobalt/development/setup-linux.html">Developers</a></li>
      <li><a href="/cobalt/contributors/index.html">Contributors</a></li>
      <li><a href="https://cobalt.googlesource.com/cobalt"><i class="fa fa-github"></i> Code Repo</a></li>
      </ul>
      <ul class="nav nav-stacked mobile-left-nav-menu" id="collapsed-left-menu">
        
  
<li class="expand-container" data-expander-target-search="relative">
          <h4 class="submenu no-top-margin">Porters</h4>
  <ul class="content">
    <li><b>Guides</b>
      <ul>
        <li><a href="/cobalt/starboard/porting.html">Port Cobalt to your platform</a></li>
        <li><a href="/cobalt/starboard/testing.html">Testing with NPLB</a></li>
      </ul>
    </li>
    <li><b>Reference</b>
      <ul>
        <li><a href="/cobalt/reference/starboard/configuration-public.html">configuration_public.h</a></li>
        <li><a href="/cobalt/reference/starboard/gyp-configuration.html">gyp_configuration.gypi</a></li>
                <li><b>Starboard modules</b>
          <ul>
                      <li><a href="/cobalt/reference/starboard/modules/atomic.html">atomic.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/audio_sink.html">audio_sink.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/blitter.html">blitter.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/byte_swap.html">byte_swap.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/character.html">character.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/condition_variable.html">condition_variable.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/configuration.html">configuration.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/directory.html">directory.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/double.html">double.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/drm.html">drm.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/event.html">event.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/export.html">export.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/file.html">file.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/input.html">input.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/key.html">key.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/log.html">log.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/media.html">media.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/memory.html">memory.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/mutex.html">mutex.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/once.html">once.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/player.html">player.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/queue.html">queue.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/socket.html">socket.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/socket_waiter.html">socket_waiter.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/spin_lock.html">spin_lock.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/storage.html">storage.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/string.html">string.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/system.html">system.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/thread.html">thread.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/thread_types.html">thread_types.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/time.html">time.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/time_zone.html">time_zone.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/types.html">types.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/user.html">user.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/window.html">window.h</a></li>
          </ul>
      </ul>
    </li>
  </ul>
</li>
  
<li class="expand-container" data-expander-target-search="relative">
          <h4 class="submenu">Developers</h4>
  <ul class="content">
    <li><b>Guides</b>
      <ul>
        <li><a href="/cobalt/development/setup-linux.html">Setup - Linux</a></li>
        <li><a href="/cobalt/development/setup-raspi.html">Setup - RasPi</a></li>
      </ul>
    </li>
    <li><b>Reference</b>
      <ul>
        <li><a href="/cobalt/development/reference/supported-features.html">Cobalt support</a></li>
      </ul>
    </li>
  </ul>
</li>
  

<li class="expand-container" data-expander-target-search="relative">
<h4 class="no-submenu"><a href="/cobalt/contributors/index.html">Contributors</a></h4>
</li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container -->
</nav>
    
<div id="masthead">
  <div class="container">
    <div class="row">
      <div class="col-md-11">
        <h1>Starboard Module Reference: drm.h</h1>
      </div>
    </div>
  </div>
</div>


<div class="container">
    <div class="row scroll-margin" id="toc-content-row">
    <div class="col-md-2" id="leftCol">
      <ul class="nav nav-stacked mobile-left-nav-menu" id="sidebar">
        
<li class="expand-container" data-expander-target-search="relative">
<h4 class="no-submenu no-top-margin"><a href="/cobalt/overview.html">Overview</a></h4>
</li>
        
  
<li class="expand-container" data-expander-target-search="relative">
          <h4 class="submenu no-top-margin">Porters</h4>
  <ul class="content">
    <li><b>Guides</b>
      <ul>
        <li><a href="/cobalt/starboard/porting.html">Port Cobalt to your platform</a></li>
        <li><a href="/cobalt/starboard/testing.html">Testing with NPLB</a></li>
      </ul>
    </li>
    <li><b>Reference</b>
      <ul>
        <li><a href="/cobalt/reference/starboard/configuration-public.html">configuration_public.h</a></li>
        <li><a href="/cobalt/reference/starboard/gyp-configuration.html">gyp_configuration.gypi</a></li>
                <li><b>Starboard modules</b>
          <ul>
                      <li><a href="/cobalt/reference/starboard/modules/atomic.html">atomic.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/audio_sink.html">audio_sink.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/blitter.html">blitter.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/byte_swap.html">byte_swap.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/character.html">character.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/condition_variable.html">condition_variable.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/configuration.html">configuration.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/directory.html">directory.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/double.html">double.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/drm.html">drm.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/event.html">event.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/export.html">export.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/file.html">file.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/input.html">input.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/key.html">key.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/log.html">log.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/media.html">media.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/memory.html">memory.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/mutex.html">mutex.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/once.html">once.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/player.html">player.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/queue.html">queue.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/socket.html">socket.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/socket_waiter.html">socket_waiter.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/spin_lock.html">spin_lock.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/storage.html">storage.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/string.html">string.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/system.html">system.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/thread.html">thread.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/thread_types.html">thread_types.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/time.html">time.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/time_zone.html">time_zone.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/types.html">types.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/user.html">user.h</a></li>
                      <li><a href="/cobalt/reference/starboard/modules/window.html">window.h</a></li>
          </ul>
      </ul>
    </li>
  </ul>
</li>
<li class="expand-container" data-expander-target-search="relative">
          <h4 class="submenu">Developers</h4>
  <ul class="content">
    <li><b>Guides</b>
      <ul>
        <li><a href="/cobalt/development/setup-linux.html">Setup - Linux</a></li>
        <li><a href="/cobalt/development/setup-raspi.html">Setup - RasPi</a></li>
      </ul>
    </li>
    <li><b>Reference</b>
      <ul>
        <li><a href="/cobalt/development/reference/supported-features.html">Cobalt support</a></li>
      </ul>
    </li>
  </ul>
</li>
<li class="expand-container" data-expander-target-search="relative">
<h4 class="no-submenu"><a href="/cobalt/contributors/index.html">Contributors</a></h4>
</li>
      </ul>
    </div>
    <div class="col-md-3 show-share-buttons-bottom" id="rightCol">
      <div class="nav nav-stacked" id="tocSidebar">
        
        <div id="toc"></div>
        
        
      </div>
    </div>
    <div class="col-md-7" id="centerCol">
      <div id="content">
        <p>This module provides definitions that allow for DRM support, which are common
between Player and Decoder interfaces.</p>

<h2 id="enums">Enums</h2>

<h3 id="sbdrmkeystatus">SbDrmKeyStatus</h3>

<p>Status of a particular media key.
<a href="https://w3c.github.io/encrypted-media/#idl-def-MediaKeyStatus">https://w3c.github.io/encrypted-media/#idl-def-MediaKeyStatus</a></p>

<p><strong>Values</strong></p>

<ul>
<li>  <code class="prettyprint">kSbDrmKeyStatusUsable</code></li>
<li>  <code class="prettyprint">kSbDrmKeyStatusExpired</code></li>
<li>  <code class="prettyprint">kSbDrmKeyStatusReleased</code></li>
<li>  <code class="prettyprint">kSbDrmKeyStatusRestricted</code></li>
<li>  <code class="prettyprint">kSbDrmKeyStatusDownscaled</code></li>
<li>  <code class="prettyprint">kSbDrmKeyStatusPending</code></li>
<li>  <code class="prettyprint">kSbDrmKeyStatusError</code></li>
</ul>

<h2 id="structs">Structs</h2>

<h3 id="sbdrmsampleinfo">SbDrmSampleInfo</h3>

<p>All the optional information needed per sample for encrypted samples.</p>

<p><strong>Members</strong></p>

<table class="responsive">
  <tr><th colspan="2">Members</th></tr>
  <tr>
    <td><code>uint8_t</code><br>        <code>initialization_vector[16]</code></td>    <td>The Initialization Vector needed to decrypt this sample.</td>  </tr>
  <tr>
    <td><code>int</code><br>        <code>initialization_vector_size</code></td>    <td></td>  </tr>
  <tr>
    <td><code>uint8_t</code><br>        <code>identifier[16]</code></td>    <td>The ID of the license (or key) required to decrypt this sample. For
PlayReady, this is the license GUID in packed little-endian binary form.</td>  </tr>
  <tr>
    <td><code>int</code><br>        <code>identifier_size</code></td>    <td></td>  </tr>
  <tr>
    <td><code>int32_t</code><br>        <code>subsample_count</code></td>    <td>The number of subsamples in this sample, must be at least 1.</td>  </tr>
  <tr>
    <td><code>const</code><br>        <code>SbDrmSubSampleMapping* subsample_mapping</code></td>    <td>The clear/encrypted mapping of each subsample in this sample. This must be
an array of <code>subsample_count</code> mappings.</td>  </tr>
</table>

<h3 id="sbdrmsubsamplemapping">SbDrmSubSampleMapping</h3>

<p>A mapping of clear and encrypted bytes for a single subsample. All
subsamples within a sample must be encrypted with the same encryption
parameters. The clear bytes always appear first in the sample.</p>

<p><strong>Members</strong></p>

<table class="responsive">
  <tr><th colspan="2">Members</th></tr>
  <tr>
    <td><code>int32_t</code><br>        <code>clear_byte_count</code></td>    <td>How many bytes of the corresponding subsample are not encrypted</td>  </tr>
  <tr>
    <td><code>int32_t</code><br>        <code>encrypted_byte_count</code></td>    <td>How many bytes of the corresponding subsample are encrypted.</td>  </tr>
</table>

<h3 id="sbdrmsystem">SbDrmSystem</h3>

<p>A handle to a DRM system which can be used with either an SbDecoder or a
SbPlayer.</p>

<h2 id="functions">Functions</h2>

<h3 id="sbdrmclosesession">SbDrmCloseSession</h3>

<p><strong>Description</strong></p>

<p>Clear any internal states/resources related to the specified <code class="prettyprint">session_id</code>.</p>

<p><strong>Declaration and definitions</strong></p>

<div class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">
  <div class="mdl-tabs__tab-bar">
    <a href="#SbDrmCloseSession-declaration" class="mdl-tabs__tab is-active">Declaration</a>
    <a href="#SbDrmCloseSession-stub" class="mdl-tabs__tab">stub</a>
  </div>
  <div class="mdl-tabs__panel is-active" id="SbDrmCloseSession-declaration">
<pre>
SB_EXPORT void SbDrmCloseSession(SbDrmSystem drm_system,
                                 const void* session_id,
                                 int session_id_size);
</pre>
</div>

<p><div class="mdl-tabs__panel" id="SbDrmCloseSession-stub"></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#include &quot;starboard/drm.h&quot;

void SbDrmCloseSession(SbDrmSystem drm_system,
                       const void* session_id,
                       int session_id_size) {
}
</code></pre></div>
<p></div>
</div></p>

<p><strong>Parameters</strong></p>

<table class="responsive">
  <tr><th colspan="2">Parameters</th></tr>
  <tr>
    <td><code>SbDrmSystem</code><br>        <code>drm_system</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>const void*</code><br>        <code>session_id</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>int</code><br>        <code>session_id_size</code></td>
    <td></td>
  </tr>
</table>

<h3 id="sbdrmcreatesystem">SbDrmCreateSystem</h3>

<p><strong>Description</strong></p>

<p>Creates a new DRM system that can be used when constructing an SbPlayer
or an SbDecoder.<br>
This function returns kSbDrmSystemInvalid if the <code class="prettyprint">key_system</code> is unsupported.<br>
Also see the documentation of <code><a href="#sbdrmgeneratesessionupdaterequest">SbDrmGenerateSessionUpdateRequest()</a></code> and
SbDrmUpdateSession() for more details.</p>

<p><strong>Declaration and definitions</strong></p>

<div class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">
  <div class="mdl-tabs__tab-bar">
    <a href="#SbDrmCreateSystem-declaration" class="mdl-tabs__tab is-active">Declaration</a>
    <a href="#SbDrmCreateSystem-stub" class="mdl-tabs__tab">stub</a>
  </div>
  <div class="mdl-tabs__panel is-active" id="SbDrmCreateSystem-declaration">
<pre>
SB_EXPORT SbDrmSystem
SbDrmCreateSystem(const char* key_system,
                  void* context,
                  SbDrmSessionUpdateRequestFunc update_request_callback,
                  SbDrmSessionUpdatedFunc session_updated_callback);
</pre>
</div>

<p><div class="mdl-tabs__panel" id="SbDrmCreateSystem-stub"></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#include &quot;starboard/drm.h&quot;

SbDrmSystem SbDrmCreateSystem(
    const char* key_system,
    void* context,
    SbDrmSessionUpdateRequestFunc update_request_callback,
    SbDrmSessionUpdatedFunc session_updated_callback) {
  return kSbDrmSystemInvalid;
}
</code></pre></div>
<p></div>
</div></p>

<p><strong>Parameters</strong></p>

<table class="responsive">
  <tr><th colspan="2">Parameters</th></tr>
  <tr>
    <td><code>const char*</code><br>        <code>key_system</code></td>
    <td>The system to be created. The value should be in the form of
"com.example.somesystem" as suggested by
https://w3c.github.io/encrypted-media/#key-system. All letters in the value
should be lowercase and will be matched exactly with known DRM key systems
of the platform.</td>
  </tr>
  <tr>
    <td><code>void*</code><br>        <code>context</code></td>
    <td>This value is passed when any of this function's callback
parameters are called.</td>
  </tr>
  <tr>
    <td><code>SbDrmSessionUpdateRequestFunc</code><br>        <code>update_request_callback</code></td>
    <td>A callback that is called every time after
SbDrmGenerateSessionUpdateRequest() is called.</td>
  </tr>
  <tr>
    <td><code>SbDrmSessionUpdatedFunc</code><br>        <code>session_updated_callback</code></td>
    <td>A callback that is called every time after
SbDrmUpdateSession() is called.</td>
  </tr>
</table>

<h3 id="sbdrmdestroysystem">SbDrmDestroySystem</h3>

<p><strong>Description</strong></p>

<p>Destroys <code class="prettyprint">drm_system</code>, which implicitly removes all keys installed in it and
invalidates all outstanding session update requests. A DRM system cannot be
destroyed unless any associated SbPlayer or SbDecoder has first been
destroyed.<br>
All callbacks are guaranteed to be finished when this function returns.
As a result, if this function is called from a callback that is passed
to <code><a href="#sbdrmcreatesystem">SbDrmCreateSystem()</a></code>, a deadlock will occur.</p>

<p><strong>Declaration and definitions</strong></p>

<div class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">
  <div class="mdl-tabs__tab-bar">
    <a href="#SbDrmDestroySystem-declaration" class="mdl-tabs__tab is-active">Declaration</a>
    <a href="#SbDrmDestroySystem-stub" class="mdl-tabs__tab">stub</a>
  </div>
  <div class="mdl-tabs__panel is-active" id="SbDrmDestroySystem-declaration">
<pre>
SB_EXPORT void SbDrmDestroySystem(SbDrmSystem drm_system);
</pre>
</div>

<p><div class="mdl-tabs__panel" id="SbDrmDestroySystem-stub"></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#include &quot;starboard/drm.h&quot;

void SbDrmDestroySystem(SbDrmSystem drm_system) {
}
</code></pre></div>
<p></div>
</div></p>

<p><strong>Parameters</strong></p>

<table class="responsive">
  <tr><th colspan="2">Parameters</th></tr>
  <tr>
    <td><code>SbDrmSystem</code><br>        <code>drm_system</code></td>
    <td>The system to be destroyed.</td>
  </tr>
</table>

<h3 id="sbdrmgeneratesessionupdaterequest">SbDrmGenerateSessionUpdateRequest</h3>

<p><strong>Description</strong></p>

<p>Asynchronously generates a session update request payload for
<code class="prettyprint">initialization_data</code>, of <code class="prettyprint">initialization_data_size</code>, in case sensitive
<code class="prettyprint">type</code>, extracted from the media stream, in <code class="prettyprint">drm_system</code>&#39;s key system.<br>
This function calls the <code class="prettyprint">drm_system</code>&#39;s <code class="prettyprint">update_request_callback</code> function,
which is defined when the system is created by <code><a href="#sbdrmcreatesystem">SbDrmCreateSystem</a></code>. When
calling that function, this function either sends <code class="prettyprint">context</code> (also from
<code class="prettyprint">SbDrmCreateSystem</code>) and a populated request, or it sends NULL <code class="prettyprint">session_id</code>
if an error occurred.<br>
The <code class="prettyprint">drm_system</code>&#39;s <code class="prettyprint">context</code> may be used to distinguish callbacks from
multiple concurrent calls to <code>SbDrmGenerateSessionUpdateRequest()</code>, and/or
to route callbacks back to an object instance.<br>
Callbacks may be called either from the current thread before this function
returns or from another thread.</p>

<p><strong>Declaration and definitions</strong></p>

<div class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">
  <div class="mdl-tabs__tab-bar">
    <a href="#SbDrmGenerateSessionUpdateRequest-declaration" class="mdl-tabs__tab is-active">Declaration</a>
    <a href="#SbDrmGenerateSessionUpdateRequest-stub" class="mdl-tabs__tab">stub</a>
  </div>
  <div class="mdl-tabs__panel is-active" id="SbDrmGenerateSessionUpdateRequest-declaration">
<pre>
SB_EXPORT void SbDrmGenerateSessionUpdateRequest(
    SbDrmSystem drm_system,
    const char* type,
    const void* initialization_data,
    int initialization_data_size);
</pre>
</div>

<p><div class="mdl-tabs__panel" id="SbDrmGenerateSessionUpdateRequest-stub"></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#include &quot;starboard/drm.h&quot;

void SbDrmGenerateSessionUpdateRequest(SbDrmSystem drm_system,
                                       const char* type,
                                       const void* initialization_data,
                                       int initialization_data_size) {
}
</code></pre></div>
<p></div>
</div></p>

<p><strong>Parameters</strong></p>

<table class="responsive">
  <tr><th colspan="2">Parameters</th></tr>
  <tr>
    <td><code>SbDrmSystem</code><br>        <code>drm_system</code></td>
    <td>The DRM system that defines the key system used for the
session update request payload as well as the callback function that is
called as a result of the function being called.</td>
  </tr>
  <tr>
    <td><code>const char*</code><br>        <code>type</code></td>
    <td>The case-sensitive type of the session update request payload.</td>
  </tr>
  <tr>
    <td><code>const void*</code><br>        <code>initialization_data</code></td>
    <td>The data for which the session update request payload
is created.</td>
  </tr>
  <tr>
    <td><code>int</code><br>        <code>initialization_data_size</code></td>
    <td>The size of the session update request payload.</td>
  </tr>
</table>

<h3 id="sbdrmgetkeycount">SbDrmGetKeyCount</h3>

<p><strong>Description</strong></p>

<p>Returns the number of keys installed in the given <code class="prettyprint">drm_system</code>.</p>

<p><strong>Declaration</strong></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">SB_EXPORT int SbDrmGetKeyCount(SbDrmSystem drm_system);
</code></pre></div>
<p><strong>Parameters</strong></p>

<table class="responsive">
  <tr><th colspan="2">Parameters</th></tr>
  <tr>
    <td><code>SbDrmSystem</code><br>        <code>drm_system</code></td>
    <td>The system for which the number of installed keys is retrieved.</td>
  </tr>
</table>

<h3 id="sbdrmgetkeystatus">SbDrmGetKeyStatus</h3>

<p><strong>Description</strong></p>

<p>Gets the <code class="prettyprint">out_key</code>, <code class="prettyprint">out_key_size</code>, and <code class="prettyprint">out_status</code> for key with <code class="prettyprint">index</code> in
the given <code class="prettyprint">drm_system</code> system. Returns whether a key is installed at <code class="prettyprint">index</code>.
If not, the output parameters, which all must not be NULL, will not be
modified.</p>

<p><strong>Declaration</strong></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">SB_EXPORT bool SbDrmGetKeyStatus(SbDrmSystem drm_system,
                                 const void* session_id,
                                 int session_id_size,
                                 int index,
                                 void** out_key,
                                 int* out_key_size,
                                 SbDrmKeyStatus* out_status);
</code></pre></div>
<p><strong>Parameters</strong></p>

<table class="responsive">
  <tr><th colspan="2">Parameters</th></tr>
  <tr>
    <td><code>SbDrmSystem</code><br>        <code>drm_system</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>const void*</code><br>        <code>session_id</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>int</code><br>        <code>session_id_size</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>int</code><br>        <code>index</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>void**</code><br>        <code>out_key</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>int*</code><br>        <code>out_key_size</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>SbDrmKeyStatus*</code><br>        <code>out_status</code></td>
    <td></td>
  </tr>
</table>

<h3 id="sbdrmremoveallkeys">SbDrmRemoveAllKeys</h3>

<p><strong>Description</strong></p>

<p>Removes all installed keys for <code class="prettyprint">drm_system</code>. Any outstanding session update
requests are also invalidated.</p>

<p><strong>Declaration</strong></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">SB_EXPORT void SbDrmRemoveAllKeys(SbDrmSystem drm_system);
</code></pre></div>
<p><strong>Parameters</strong></p>

<table class="responsive">
  <tr><th colspan="2">Parameters</th></tr>
  <tr>
    <td><code>SbDrmSystem</code><br>        <code>drm_system</code></td>
    <td>The system for which keys should be removed.</td>
  </tr>
</table>

<h3 id="sbdrmsystemisvalid">SbDrmSystemIsValid</h3>

<p><strong>Description</strong></p>

<p>Returns whether the <code class="prettyprint">drm_system</code> is a valid SbDrmSystem.</p>

<p><strong>Declaration</strong></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">static SB_C_FORCE_INLINE bool SbDrmSystemIsValid(SbDrmSystem drm) {
  return drm != kSbDrmSystemInvalid;
}
</code></pre></div>
<p><strong>Parameters</strong></p>

<table class="responsive">
  <tr><th colspan="2">Parameters</th></tr>
  <tr>
    <td><code>SbDrmSystem</code></td>
    <td><code>drm</code></td>
  </tr>
</table>

<h3 id="sbdrmupdatesession">SbDrmUpdateSession</h3>

<p><strong>Description</strong></p>

<p>Update session with <code class="prettyprint">key</code>, in <code class="prettyprint">drm_system</code>&#39;s key system, from the license
server response. <code class="prettyprint">request</code> must be the corresponding returned request from
SbDrmGenerateSessionUpdateRequest(). Calls <code class="prettyprint">session_updated_callback</code> with
<code class="prettyprint">context</code> and whether the update succeeded. <code class="prettyprint">context</code> may be used to
distinguish callbacks from multiple concurrent calls to <code>SbDrmUpdateSession()</code>,
and/or to route callbacks back to an object instance.<br>
Once the session is successfully updated, an SbPlayer or SbDecoder associated
with that system will be able to decrypt samples encrypted.<br>
The <code class="prettyprint">drm_system</code>&#39;s <code class="prettyprint">session_updated_callback</code> may called either from the
current thread before this function returns or from another thread.</p>

<p><strong>Declaration and definitions</strong></p>

<div class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">
  <div class="mdl-tabs__tab-bar">
    <a href="#SbDrmUpdateSession-declaration" class="mdl-tabs__tab is-active">Declaration</a>
    <a href="#SbDrmUpdateSession-stub" class="mdl-tabs__tab">stub</a>
  </div>
  <div class="mdl-tabs__panel is-active" id="SbDrmUpdateSession-declaration">
<pre>
SB_EXPORT void SbDrmUpdateSession(SbDrmSystem drm_system,
                                  const void* key,
                                  int key_size,
                                  const void* session_id,
                                  int session_id_size);
</pre>
</div>

<p><div class="mdl-tabs__panel" id="SbDrmUpdateSession-stub"></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#include &quot;starboard/drm.h&quot;

void SbDrmUpdateSession(SbDrmSystem drm_system,
                        const void* key,
                        int key_size,
                        const void* session_id,
                        int session_id_size) {
}
</code></pre></div>
<p></div>
</div></p>

<p><strong>Parameters</strong></p>

<table class="responsive">
  <tr><th colspan="2">Parameters</th></tr>
  <tr>
    <td><code>SbDrmSystem</code><br>        <code>drm_system</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>const void*</code><br>        <code>key</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>int</code><br>        <code>key_size</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>const void*</code><br>        <code>session_id</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>int</code><br>        <code>session_id_size</code></td>
    <td></td>
  </tr>
</table>

        
          
            
          
        
      </div>
    </div>
  </div>

</div>


    

<footer>
<div class="container">
    <div class="row">
        <div class="col-md-5 column-left">
    <span class="copyright-text">Â© Google 2016</span>
        </div>
        <div class="col-md-2 column-middle">
  <img class="footer-logo" src="/cobalt/images/cobalt-logo.png" alt="Cobalt"/>
        </div>
        <div class="col-md-5 column-right">&nbsp;</div>
            </div>
</div>
</footer>

    
  </body>
</html>
