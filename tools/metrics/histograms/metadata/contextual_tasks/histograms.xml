<!--
Copyright 2025 The Chromium Authors
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<!--
This file is used to generate a comprehensive list of
content_extraction histograms along with a detailed description for each
histogram.

For best practices on writing histogram descriptions, see
https://chromium.googlesource.com/chromium/src.git/+/HEAD/tools/metrics/histograms/README.md

Please follow the instructions in the OWNERS file in this directory to find a
reviewer. If no OWNERS file exists, please consider signing up at
go/reviewing-metrics (Googlers only), as all subdirectories are expected to
have an OWNERS file. As a last resort you can send the CL to
chromium-metrics-reviews@google.com.
-->

<histogram-configuration>

<histograms>

<histogram
    name="ContextualTasks.AiResponse.UserAction.LinkClicked.{ContextualTasksUiSurface}"
    enum="Boolean" expires_after="2026-03-22">
  <owner>sophiechang@chromium.org</owner>
  <owner>chrome-contextual-tasks-eng@google.com</owner>
  <summary>
    Recorded every time a user clicks on a link embedded in the AI response on
    the contextual tasks page. Split out by the contextual tasks form factor
    (panel or tab) that the link was clicked on.Always recorded as true.
  </summary>
  <token key="ContextualTasksUiSurface">
    <variant name="Panel"
        summary="The link was clicked when the contextual tasks panel was
                 open."/>
    <variant name="Tab"
        summary="The link was clicked when the contextual tasks UI was
                 displayed in full tab."/>
  </token>
</histogram>

<histogram name="ContextualTasks.Context.ContextCalculationLatency" units="ms"
    expires_after="2026-03-22">
  <owner>sophiechang@chromium.org</owner>
  <owner>abhayprakash@google.com</owner>
  <summary>
    Recorded every time a query is made in the contextual tasks framework and
    context was calculated successfully. Records the duration it took to
    calculate context for the query.
  </summary>
</histogram>

<histogram name="ContextualTasks.Context.ContextDeterminationStatus"
    enum="ContextualTasksContextDeterminationStatus" expires_after="2026-03-22">
  <owner>sophiechang@chromium.org</owner>
  <owner>abhayprakash@google.com</owner>
  <summary>
    Recorded every time a query is entered by the user (before being sent) in
    the contextual tasks framework. Records the status of context determination
    (success or failure reason).
  </summary>
</histogram>

<histogram name="ContextualTasks.Context.DurationSinceLastActive"
    units="seconds" expires_after="2026-03-22">
  <owner>sophiechang@chromium.org</owner>
  <owner>abhayprakash@google.com</owner>
  <summary>
    Recorded every time a query is successfully made in the contextual tasks.
    Records seconds (upto 3600) since each of the tab was active.
  </summary>
</histogram>

<histogram name="ContextualTasks.Context.EmbeddingSimilarityScore"
    units="count" expires_after="2026-03-22">
  <owner>sophiechang@chromium.org</owner>
  <owner>abhayprakash@google.com</owner>
  <summary>
    Recorded every time a query is successfully made in the contextual tasks.
    Records 100*best_similarity_score between query embeddings and passage
    embeddings for the page.
  </summary>
</histogram>

<histogram name="ContextualTasks.Context.ExplicitTabsCount" units="count"
    expires_after="2026-03-22">
  <owner>sophiechang@chromium.org</owner>
  <owner>abhayprakash@google.com</owner>
  <summary>
    Recorded every time a query is successfully made in the contextual tasks
    framework and context was calculated successfully. Records the number of
    tabs that were explicitly chosen to be uploaded by the user. Note that tabs
    with the same URL are only counted once.
  </summary>
</histogram>

<histogram name="ContextualTasks.Context.MatchingWordsCount" units="count"
    expires_after="2026-03-22">
  <owner>sophiechang@chromium.org</owner>
  <owner>abhayprakash@google.com</owner>
  <summary>
    Recorded every time a query is successfully made in the contextual tasks
    framework and context was calculated successfully. Records the number of
    words that were in common between the query and the tab title.
  </summary>
</histogram>

<histogram name="ContextualTasks.Context.RelevantTabsCount" units="count"
    expires_after="2026-03-22">
  <owner>sophiechang@chromium.org</owner>
  <owner>abhayprakash@google.com</owner>
  <summary>
    Recorded every time a query is successfully made in the contextual tasks
    framework and context was calculated successfully. Records the number of
    tabs that were determined to be relevant to the query.
  </summary>
</histogram>

<histogram name="ContextualTasks.Context.TabExcessCount" units="count"
    expires_after="2026-03-22">
  <owner>sophiechang@chromium.org</owner>
  <owner>abhayprakash@google.com</owner>
  <summary>
    Recorded every time a query is successfully made in the contextual tasks
    framework and context was calculated successfully. Records the number of
    tabs with unique URLs that were predicted by the model but were not in the
    explicitly chosen set.
  </summary>
</histogram>

<histogram name="ContextualTasks.Context.TabOverlapCount" units="count"
    expires_after="2026-03-22">
  <owner>sophiechang@chromium.org</owner>
  <owner>abhayprakash@google.com</owner>
  <summary>
    Recorded every time a query is successfully made in the contextual tasks
    framework and context was calculated successfully. Records the number of
    tabs with unique URLsthat were in both the explicitly chosen set and the set
    that was predicted by the model.
  </summary>
</histogram>

<histogram name="ContextualTasks.Context.TabOverlapPercentage" units="%"
    expires_after="2026-03-22">
  <owner>sophiechang@chromium.org</owner>
  <owner>abhayprakash@google.com</owner>
  <summary>
    Recorded every time a query is successfully made in the contextual tasks
    framework and context was calculated successfully. Records the percentage of
    tabs with unique URLs that were in both the explicitly chosen set and the
    set that was predicted by the model. This is calculated by dividing the
    number of tabs that were in both sets by the number of tabs in the
    explicitly chosen set.
  </summary>
</histogram>

<histogram name="ContextualTasks.Context.TabScore" units="count"
    expires_after="2026-03-22">
  <owner>sophiechang@chromium.org</owner>
  <owner>abhayprakash@google.com</owner>
  <summary>
    Recorded every time a query is successfully made in the contextual tasks
    framework when using multi-signal scoring. Records the final computed score
    for each tab, multiplied by 100.
  </summary>
</histogram>

</histograms>

</histogram-configuration>
