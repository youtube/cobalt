<!DOCTYPE html>
<script src="../../resources/run-after-layout-and-paint.js"></script>
<script>
if (window.testRunner)
  testRunner.waitUntilDone();

window.onload = function() {
  // Wait for a frame, then trigger animation.
  runAfterLayoutAndPaint(function() {
    document.querySelector('set').beginElement();
    if (window.testRunner)
      runAfterLayoutAndPaint(function() { testRunner.notifyDone(); });
  });
};
</script>
<svg>
  <filter id="f" primitiveUnits="objectBoundingBox" x="0" y="0" width="1" height="1">
    <feDiffuseLighting lighting-color="green">
      <feSpotLight x="0.5" y="0.5" z="-0.5" pointsAtX="0.5" pointsAtY="0.5" pointsAtZ="0">
        <set attributeName="z" to="10" begin="indefinite"/>
      </feSpotLight>
    </feDiffuseLighting>
  </filter>
  <rect width="100" height="100" fill="red" filter="url(#f)"/>
</svg>
