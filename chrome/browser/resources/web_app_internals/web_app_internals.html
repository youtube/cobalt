<!DOCTYPE HTML>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Web App Internals</title>
  <link rel="stylesheet" href="web_app_internals.css">

  <script type="module" src="web_app_internals.js"></script>
</head>

<body>
  <button id="download-button">Download</button>
  <button id="copy-button">Copy to Clipboard</button>

  <hr>

  <div id="iwa-container" style="display: none;">
    <h2>Isolated Web Apps</h2>
    <div id="iwa-updates-container" style="display: none;">
      <button id="iwa-updates-search-button">
        Discover updates of policy-installed IWAs now
      </button>
      <div id="iwa-updates-message"></div>
    </div>
    <div id="iwa-kr-container" style="display: none;">
      <h3>Key Rotation</h3>
      Set Rotated Key for Web Bundle ID:
      <div>
        <input type="text" id="iwa-kr-web-bundle-id" size="20" required
              placeholder="web-bundle-id...">
        <input type="text" id="iwa-kr-public-key-b64" size="20" required
              placeholder="public-key-b64...">
        <button id="iwa-rotate-key-button" type="submit">Rotate</button>
      </div>
      <div id="iwa-kr-message"></div>
    </div>
    <div id="iwa-dev-container" style="display: none;">
      <h3>Developer Mode</h3>
      <p>Install IWA via Dev Mode Proxy:
        <input type="url" id="iwa-dev-install-proxy-url" size="30" required
            placeholder="http://localhost:8000/">
        <button id="iwa-dev-install-proxy-button" type="submit">Install</button>
      </p>
      <p>
        Install IWA from Signed Web Bundle:
        <button id="iwa-dev-install-bundle-selector" type="submit">
          Select file...
        </button>
      </p>
      <p>Install IWA from Update Manifest:
        <input type="url" id="iwa-dev-update-manifest-url" size="50" required
            placeholder="http://localhost:8000/update_manifest.json">
        <button id="iwa-dev-update-manifest-fetch-button" type="submit">Fetch</button>
      </p>

      <dialog id="iwa-update-manifest-dialog">
        <div>Installing IWA</div>
        <div id="iwa-update-manifest-version">
          <div id="iwa-update-manifest-version-title">Select Version:</div>
          <select id="iwa-update-manifest-version-select"></select>
        </div>
        <div id="iwa-update-manifest-dialog-buttons">
          <button id="iwa-update-manifest-dialog-close">Close</button>
          <button id="iwa-update-manifest-dialog-install">Install</button>
        </div>
      </dialog>

      <dialog id="iwa-switch-channel-input-dialog">
        <div>Switching update channel for IWA</div>
        <div id="iwa-switch-channel">
          <div id="iwa-switch-channel-title">New Channel:</div>
          <input type="text" id="iwa-update-channel" size="15" required
              placeholder="default">
        </div>
        <div id="iwa-switch-channel-dialog-buttons">
          <button id="iwa-switch-channel-dialog-close">Close</button>
          <button id="iwa-switch-channel-dialog-switch">Switch</button>
        </div>
      </dialog>

      <div id="iwa-dev-install-message"></div>
      <h4>Installed Dev Mode IWAs</h4>
      <ul id="iwa-dev-updates-app-list"></ul>
      <div id="iwa-dev-updates-message"></div>
    </div>
    <hr>
  </div>

  <pre id="json"></pre>
</body>

</html>
