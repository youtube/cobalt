<html>
<head>
<script>

// Attempts a hash navigation while "about:blank" is being committed
// to the frame. The hash navigation should be ignored.
function doIt() {
  var VERY_SLOW_URL = "../xmlhttprequest/resources/endless.php?"
                      + window.randomNumber;  
  var xhr = new XMLHttpRequest();
  xhr.open("GET", VERY_SLOW_URL, true);
  xhr.onabort = function() {
      window.location.hash = "hashnav";
    };
  xhr.send();
  window.location = "about:blank";
}

</script>
</head>
<body onload="doIt()">
Thinking...
</body>
</html>