<!DOCTYPE html>
<html>
<head>
    <script>
        window.isOnErrorTest = true;
    </script>
    <script src="../../resources/js-test.js"></script>
    <script src="resources/onerror-test.js"></script>
</head>
<body>
    <!-- This script's body will be used to build a Blob URL to use as a Worker. -->
    <script id="workerCode" type="text/plain">
        var not_transferable = [{length: 3}];
        postMessage(2, not_transferable);
    </script>
    <script>
        description("This tests that unhandled exceptions in postMessage() are delivered to 'worker.onerror'.");

        checkErrorEventInHandler({
            message: "Uncaught DataCloneError: Failed to execute 'postMessage' on 'DedicatedWorkerGlobalScope': Value at index 0 does not have a transferable type.",
            filename: "[blob: URL]",
            lineno: 3,
            colno: 9,
        });
    </script>
</body>
</html>
