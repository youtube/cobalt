<!DOCTYPE html>
<html>
<head>
<script>
function runTest() {
    if (window.testRunner && window.location.hash != '#start') {
        // Setting ImagesAllowed is async. Reload to ensure it has been propagated to loaders.
        testRunner.dumpAsText();
        testRunner.setImagesAllowed(false);
        window.location.hash = '#start';
        testRunner.queueReload();
        return;
    }

    var image = document.getElementsByTagName('img')[0];
    if (image.naturalHeight != 0 || image.naturalWidth != 0)
        document.write('FAIL: images should not be loaded when images are disabled');
    else
        document.write('PASS');
}
</script>
</head>
<body onload="runTest()">
  Test for crbug.com/249013: data uri images should not load when images are disabled.<br/>
  FAIL
  <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAnklEQVR42u3QMQEAAAgDILV/51nBzwci0CmuRoEsWbJkyZKlQJYsWbJkyVIgS5YsWbJkKZAlS5YsWbIUyJIlS5YsWQpkyZIlS5YsBbJkyZIlS5YCWbJkyZIlS4EsWbJkyZKlQJYsWbJkyVIgS5YsWbJkKZAlS5YsWbIUyJIlS5YsWQpkyZIlS5YsBbJkyZIlS5YCWbJkyZIlS4EsWd8Wil4Bx2r6t7cAAAAASUVORK5CYII=">
</body>
</html>
