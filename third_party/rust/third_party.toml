# This file lists all dependencies used from first-party code. It should not
# include transitive dependencies, as those will be determined from Cargo.
#
# All versions should be specified as a version epoch (a single non-zero version
# component such as "2" or "0.3").
#   e.g.
#   santas-workshop = "2"
#
# Any features used by first-party code must be declared here in order to ensure
# they are included in the crate when it is built.
#   e.g.
#   santas-workshop = { version = "3", features = [ "candycanes" ] }
#
# We have some extensions in order to provide additional info for the BUILD.gn
# files that can't be derived from Cargo. Any extension should be added to
# the dependency crate's set of properties.
#   e.g.
#   santas-workshop = { version = "3", some-extension = true }
#
# Extensions:
#
# allow-first-party-usage: If false, the crate should not be visible to first
#   party code even though it is present in this file. It defaults to true. Use
#   this if you need to declare extensions for a crate that is only meant for
#   use as a transitive dependency of third-party crates.
#   e.g. allow-first-party-usage = false
#
# build-script-outputs: A list of file paths, rooted from where the BUILD.gn
#   file is located, of files generated by the crate's build script.
#   e.g. build-script-outputs = [ "crate/src/gen/gen_stuff.rs" ]

# Crates listed in dependencies will have a :lib GN target built for them in
# their BUILD.gn file. The :lib target can be depended on from Chromium
# production and test code. Third-party crates that are not listed in this
# file are not visible to Chromium code.

# Since cxx-gen is used as a standalone binary, rather than as a library, we
# can't depend on it in the usual way. Add it as a workspace member so cargo can
# resolve its dependencies.
[workspace]
members = [
    "cxxbridge_cmd/v1/crate",
]

[dependencies]
bitflags = "1"
cfg-if = "1"
cxx = "1"
cxxbridge-cmd = "1"
lazy_static = "1"
memoffset = { version = "0.6", features = [ "unstable_const" ] }
proc-macro2 = "1"
qr_code = "2"
quote = "1"
serde = "1"
static_assertions = "1"
syn = {version = "2", features = ["full"]}
read-fonts = "0.11"
font-types = "0.4"
skrifa = "0.10"
rustc-demangle-capi = "0.1"

[dependencies.serde_json_lenient]
version = "0.1"
features = [ "unbounded_depth", "float_roundtrip" ]

[dependencies.rustversion]
version = "1"
allow-first-party-usage = false
build-script-outputs = [ "version.rs" ]

[dependencies.unicode-linebreak]
version = "0.1"
allow-first-party-usage = false
build-script-outputs = [ "tables.rs" ]

# Crates listed in testonly-dependencies will have a :test_support GN target
# built for them in their BUILD.gn file, which is marked testonly=true. This
# allows them built in a configuration that can be used from Chromium tests, but
# not used from production.
#
# Note this is not the same as dev-dependencies: any features requested here
# also affect regular dependencies. They just have restricted visibility in GN.
[testonly-dependencies]
anyhow = "1"
hex = "0.4"
hex-literal = "0.4"
lazy_static = "1"
log = "0.4"
rand = "0.8"
rand_pcg = "0.3"
regex = "1"
rstest = {version = "0.17", default-features=false}
rstest_reuse = "0.5"
serde_json = "1"
small_ctor = "0.1"
wycheproof = "0.4"
