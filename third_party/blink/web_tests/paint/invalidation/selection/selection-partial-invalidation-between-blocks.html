<!DOCTYPE html>
<table width="100%">
 <tr>
    <td id="firstCell">First cell</td>
 </tr>
 <tr>
    <td id="secondCell">Second cell</td>
 </tr>
</table>
<script src="../../../resources/run-after-layout-and-paint.js" type="text/javascript"></script>
<script src="../resources/text-based-repaint.js" type="text/javascript"></script>
<script>
window.testIsAsync = true;
if (window.testRunner)
    testRunner.waitUntilDone();

document.execCommand("selectAll");

function repaintTest() {
    var selection = window.getSelection();
    var firstCell = document.getElementById("firstCell");
    selection.setBaseAndExtent(firstCell, 0, firstCell, 1);
    finishRepaintTest();
}
runAfterLayoutAndPaint(runRepaintAndPixelTest);
</script>
