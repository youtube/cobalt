<!DOCTYPE html>
<div id="fixed" style="position: fixed; width: 0; height: 0; top: 200px; left: 100px">
  <div id="child" style="position: relative">
    <!-- This is to isolate layout -->
    <div style="width: 200px; height: 200px; overflow: hidden">
      <div id="editable" contenteditable="true" style="outline: none; margin: 10px; width: 100px">ABCDE</div>
    </div>
  </div>
</div>
<script src="../../resources/run-after-layout-and-paint.js"></script>
<script src="resources/text-based-repaint.js"></script>
<script>
function repaintTest() {
  fixed.style.top = '100px';
  child.style.top = '100px';
  getSelection().collapse(editable.firstChild, 4);
}

onload = function() {
  editable.focus();
  runAfterLayoutAndPaint(repaintTest, true);
};
</script>
