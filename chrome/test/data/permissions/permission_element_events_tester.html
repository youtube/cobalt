<!DOCTYPE html>
<html>
<head>
<body>
  <div id="grandparent">
    <div id="parent">
      <permission id="camera" type="camera"></permission>
    </div>
  </div>
  <permission
    id="microphone"
    type="microphone"
    ondismiss="console.log(this.id + '-dismiss');"
    onresolve="console.log(this.id + '-resolve');"
    onpromptdismiss="console.log(this.id + '-promptdismiss');"
    onpromptaction="console.log(this.id + '-promptaction');">
  </permission>
  <script>
    function logEventToConsole(prefix, event) {
      console.log(prefix + event.target.id + '-' + event.type);
      console.log(prefix + event.target.id + '-cancelable-' + event.cancelable);
      console.log(prefix + event.target.id + '-bubbles-' + event.bubbles);
    }
    document.getElementById('parent').addEventListener('resolve', (event) => {
      logEventToConsole("parent-", event);
    });
    document.getElementById('parent').addEventListener('dismiss', (event) => {
      logEventToConsole("parent-", event);
    });
    document.getElementById('grandparent').addEventListener('resolve', (event) => {
      logEventToConsole("grandparent-", event);
    });
    document.getElementById('grandparent').addEventListener('dismiss', (event) => {
      logEventToConsole("grandparent-", event);
    });

    document.getElementById('parent').addEventListener('promptaction', (event) => {
      logEventToConsole("parent-", event);
    });
    document.getElementById('parent').addEventListener('promptdismiss', (event) => {
      logEventToConsole("parent-", event);
    });
    document.getElementById('grandparent').addEventListener('promptaction', (event) => {
      logEventToConsole("grandparent-", event);
    });
    document.getElementById('grandparent').addEventListener('promptdismiss', (event) => {
      logEventToConsole("grandparent-", event);
    });

    function clickById(element_id) {
      click(document.getElementById(element_id));
    }

    function click(element) {
      element.click();
    }
  </script>
</body>
</html>
