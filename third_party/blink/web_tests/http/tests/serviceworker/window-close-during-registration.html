<!DOCTYPE html>
<script src="/js-test-resources/js-test.js"></script>
<body>
<script>
window.jsTestIsAsync = true;
description('Test that closing the window during Service Worker registration does not assert or crash');

if (window.testRunner) {
    testRunner.setPopupBlockingEnabled(false);
    openWindow();
} else {
    document.write('<p>Click <a href="javascript:openWindow()">this link</a>.  A window should open and close without asserting or crashing.</p>');
}

function openWindow() {
    window.open('resources/window-close-during-registration.html');
}

function done() {
    setTimeout(function() {
        finishJSTest();
    }, 100);
}
</script>
</body>
