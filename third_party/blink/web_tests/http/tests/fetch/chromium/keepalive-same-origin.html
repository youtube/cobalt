<!doctype html>
<html>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script>
promise_test((t) => {
    const mode = 'same-origin';
    const keepalive = true;
    const headers = {'foo': 'bar'};
    return fetch('/', {mode, headers, keepalive});
  }, 'keepalive: non-simple request works with "same-origin" mode');
</script>
</html>
