<!doctype html>
<meta charset="utf-8">
<!-- This test will check whether an image moving via DOM manipulation will
     reset the drag source and potentially cancel dragend event emission. -->
<title>Drag and Drop: Image DOM Move</title>
<link rel="help" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-and-drop-processing-model">

<script src="../../../resources/testharness.js"></script>
<script src="../../../resources/testharnessreport.js"></script>
<script src="../resources/drag-trigger-dom-move.js"></script>

<style>
  .box {
    display: block;
    border: 1px solid black;
    width: 350px;
    height: 200px;
    text-align: center;
  }
</style>

<p>
  Please drag the "Drag Me" box into the "Drop Here" box.
</p>

<div id="drag-box" class="dragged box" draggable="true">
  Drag me
</div>

<div id="drop-box" class="dropzone box">
  Drop Here
</div>

<div id="moved-item-source" class="box"></div>
<div id="moved-item-destination" class="box"></div>

<p>
  Current test: <code id="test-description"></code>
</p>

<script>
  dragDomMoveTests([
    { load: 'image', expectDragEnd: true, action: 'removeChild' },
    { load: 'image', expectDragEnd: true, action: 'appendChild' },
  ]);
</script>
