<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>A self-detaching frame after a click event.</title>
<script src="/resources/testdriver.js"></script>
<script src="/resources/testdriver-vendor.js"></script>
</head>
<body>
  <a id=link>Click me!</a>
  <script>
    const link = document.getElementById("link");
    link.addEventListener("click", e => {
      // Detach the iframe from its parent
      const container = window.frameElement;
      container.remove();
    });
    window.addEventListener("load", () => {
      setTimeout(() => {
        if (test_driver) {
          test_driver.click(link);
        }
      }, 10);
    });
  </script>
</body>
</html>
