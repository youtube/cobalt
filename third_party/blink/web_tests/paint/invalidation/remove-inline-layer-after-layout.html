<!DOCTYPE html>
<script src="resources/text-based-repaint.js"></script>
<script>
function repaintTest() {
  var target = document.getElementById('target');
  target.style.margin = '100px';
  target.parentNode.offsetHeight;
  target.parentNode.removeChild(target);
}
onload = runRepaintAndPixelTest;
</script>
<div style="height: 100px">
Tests invalidation after layouting and then removing a layered span. The span should disappear without any residue.
</div>
<div style="display: inline-block; width: 100px; height: 100px; background-color: green"></div>
<span id="target" style="opacity: 0.8">
  This span should disappear.
</span>
<div style="display: inline-block; width: 100px; height: 100px; background-color: green"></div>
