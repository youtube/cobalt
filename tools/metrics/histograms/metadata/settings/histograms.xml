<!--
Copyright 2020 The Chromium Authors
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<!--
This file is used to generate a comprehensive list of Settings histograms
along with a detailed description for each histogram.

For best practices on writing histogram descriptions, see
https://chromium.googlesource.com/chromium/src.git/+/HEAD/tools/metrics/histograms/README.md

Please follow the instructions in the OWNERS file in this directory to find a
reviewer. If no OWNERS file exists, please consider signing up at
go/reviewing-metrics (Googlers only), as all subdirectories are expected to
have an OWNERS file. As a last resort you can send the CL to
chromium-metrics-reviews@google.com.
-->

<histogram-configuration>

<histograms>

<variants name="SettingsAllPermissionTypes">
<!-- Should be kept in sync with variants AllPermissionTypes in
  tools/metrics/histograms/metadata/permissions/histograms.xml.
-->

  <variant name="AR"/>
  <variant name="AudioAndVideoCapture"/>
  <variant name="AudioCapture"/>
  <variant name="CameraPanTiltZoom"/>
  <variant name="ClipboardReadWrite"/>
  <variant name="Geolocation"/>
  <variant name="IdleDetection"/>
  <variant name="LocalFonts"/>
  <variant name="MidiSysEx"/>
  <variant name="MultipleDownload"/>
  <variant name="Nfc"/>
  <variant name="Notifications"/>
  <variant name="PaymentHandler"/>
  <variant name="ProtectedMedia"/>
  <variant name="Quota"/>
  <variant name="RegisterProtocolHandler"/>
  <variant name="SecurityKeyAttestation"/>
  <variant name="StorageAccess"/>
  <variant name="TopLevelStorageAccess"/>
  <variant name="U2fApiRequest"/>
  <variant name="VideoCapture"/>
  <variant name="VR"/>
  <variant name="WindowPlacement"/>
</variants>

<histogram name="Settings.AdvancedSpellcheck.OnStartup" enum="BooleanEnabled"
    expires_after="2023-05-07">
  <obsolete>
    Logged on profile open, including for profiles such as guest profiles that
    do not allow modification of this setting. (This value logged on those cases
    is the default value for the setting.) Replaced in M-110 with the histogram
    Settings.AdvancedSpellcheck.OnStartup2, which is similar but only emitted on
    regular profiles.
  </obsolete>
  <owner>harrisonsean@chromium.org</owner>
  <owner>chrome-friendly-settings@google.com</owner>
  <summary>
    The state of the advanced spellcheck setting, recorded on profile open.
  </summary>
</histogram>

<histogram name="Settings.AdvancedSpellcheck.OnStartup2" enum="BooleanEnabled"
    expires_after="2024-02-01">
  <owner>harrisonsean@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    The state of the advanced spellcheck setting, recorded on profile open for
    regular profiles (not Incognito, Guest, etc.).

    Expired in M109, re-instated in M118.
  </summary>
</histogram>

<histogram name="Settings.AllSites.DeprecatedRedirect" enum="BooleanRedirected"
    expires_after="M101">
  <owner>sauski@google.com</owner>
  <owner>chrome-friendly-settings@google.com</owner>
  <summary>
    Whether or not navigations to the All Sites page occured because the user
    was redirected from the deprecated Site Data page.
  </summary>
</histogram>

<histogram name="Settings.AutocompleteSearches.OnStartup" enum="BooleanEnabled"
    expires_after="2023-04-16">
  <obsolete>
    Logged on profile open, including for profiles such as guest profiles that
    do not allow modification of this setting. (This value logged on those cases
    is the default value for the setting.) Replaced in M-110 with the histogram
    Settings.AutocompleteSearches.OnStartup2, which is similar but only emitted
    on regular profiles.
  </obsolete>
  <owner>harrisonsean@chromium.org</owner>
  <owner>chrome-friendly-settings@google.com</owner>
  <summary>
    The state of the autocomplete searches setting, recorded on profile open.
  </summary>
</histogram>

<histogram name="Settings.AutocompleteSearches.OnStartup2"
    enum="BooleanEnabled" expires_after="2024-02-01">
  <owner>harrisonsean@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    The state of the autocomplete searches setting, recorded on profile open,
    only for regular profiles (not Incognito, Guest, etc.).
  </summary>
</histogram>

<histogram name="Settings.ClearBrowsingData.OpenMyActivity"
    enum="ClearBrowsingDataMyActivityNavigation" expires_after="2024-02-11">
  <owner>andzaytsev@google.com</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    Records which MyActivity URLs the user clicked in Clear Browsing Data.
  </summary>
</histogram>

<histogram name="Settings.DefaultBrowserFromSource"
    enum="IOSDefaultBrowserPromoSource" expires_after="2024-02-11">
  <owner>djean@google.com</owner>
  <owner>olivierrobin@google.com</owner>
  <summary>
    The source surface that requested displaying the default browser system
    settings. Logged when the user actually opens the iOS system settings (IOS
    only).
  </summary>
</histogram>

<histogram name="Settings.FirstPartySets.State" enum="FirstPartySetsState"
    expires_after="2024-03-24">
  <owner>alimariam@google.com</owner>
  <owner>olesiamarukhno@google.com</owner>
  <owner>sauski@google.com</owner>
  <summary>
    Records either the state of first party sets (FPS) or not relevant,
    depending on the user's cookie settings. This is logged on startup.
  </summary>
</histogram>

<histogram name="Settings.GivenShowHomeButton_HomePageIsNewTabPage"
    enum="Boolean" expires_after="2023-09-03">
  <obsolete>
    Logged on profile open, including for profiles that do not use this setting
    (such as &quot;system&quot; profiles) and for profiles that do not allow the
    profile-owner to configure this setting (such as &quot;guest&quot;
    profiles). When logged in such cases, reported the default value. Replaced
    in M-114 with the histogram
    Settings.GivenShowHomeButton_HomePageIsNewTabPage2, which is similar only
    emitted for regular profiles.
  </obsolete>
  <owner>mpearson@chromium.org</owner>
  <owner>twellington@chromium.org</owner>
  <summary>
    Whether or not the home page user preference is set to the default NTP value
    when a profile is loaded. This is only logged if the home button is shown.
  </summary>
</histogram>

<histogram name="Settings.GivenShowHomeButton_HomePageIsNewTabPage2"
    enum="Boolean" expires_after="2024-04-30">
  <owner>mpearson@chromium.org</owner>
  <owner>twellington@chromium.org</owner>
  <summary>
    Whether or not the home page user preference is set to the default NTP value
    when a regular profile is loaded. This is only logged if the home button is
    shown.

    To be explicit: not logged when an Incognito profile is opened because that
    inherits the settings from its parent profile. As such, it's not necessary
    to log the Incognito profile's settings.
  </summary>
</histogram>

<histogram name="Settings.Homepage.LocationType" enum="HomepageLocationType"
    expires_after="2024-03-17">
  <owner>bttk@chromium.org</owner>
  <owner>twellington@chromium.org</owner>
  <owner>wenyufu@chromium.org</owner>
  <summary>
    The location type for the homepage if the homepage is enabled. Recorded on
    deferred startup iff the homepage is enabled. Android only.
  </summary>
</histogram>

<histogram name="Settings.HomePageEngineType" enum="OmniboxSearchEngineType"
    expires_after="2023-08-27">
  <obsolete>
    Logged on profile open, including for profiles that do not use this setting
    (such as &quot;system&quot; profiles) and for profiles that do not allow the
    profile-owner to configure this setting (such as &quot;guest&quot;
    profiles). When logged in such cases, reported the default value. Replaced
    in M-114 with the histogram Settings.HomePageEngineType2, which is similar
    only emitted for regular profiles.
  </obsolete>
  <owner>mpearson@chromium.org</owner>
  <owner>csharp@chromium.org</owner>
  <summary>
    Tries to pretend the home page URL is a search URL, and records the search
    engine type of that URL by comparing the TLD+1 of the home page URL with
    those of the different known search engines. Recorded when a profile is
    opened, if a home page URL has been set. Note that at least one profile is
    opened on startup.
  </summary>
</histogram>

<histogram name="Settings.HomePageEngineType2" enum="OmniboxSearchEngineType"
    expires_after="2024-04-30">
  <owner>mpearson@chromium.org</owner>
  <owner>csharp@chromium.org</owner>
  <summary>
    Tries to pretend the home page URL is a search URL, and records the search
    engine type of that URL by comparing the TLD+1 of the home page URL with
    those of the different known search engines. Recorded when a regular profile
    is opened, if a home page URL has been set. Note that at least one profile
    is opened on startup.

    To be explicit: not logged when an Incognito profile is opened because that
    inherits the settings from its parent profile. As such, it's not necessary
    to log the Incognito profile's settings.
  </summary>
</histogram>

<histogram name="Settings.HoverCards.ImagePreview.Enabled"
    enum="BooleanEnabled" expires_after="2024-03-24">
  <owner>charlesmeng@chromium.org</owner>
  <owner>estalin@chromium.org</owner>
  <summary>
    Logged whether the hover card preview images setting is enabled or disabled
    when it is toggled in chrome://settings/appearance.
  </summary>
</histogram>

<histogram name="Settings.OpenSettingsFromMenu.PerProfileType"
    enum="BrowserProfileType" expires_after="2024-02-11">
  <owner>roagarwal@chromium.org</owner>
  <owner>chrome-incognito@google.com</owner>
  <summary>
    Records the profile type for opening the Settings page from menu.
  </summary>
</histogram>

<histogram name="Settings.OverscrollHistoryNavigation.Enabled"
    enum="BooleanEnabled" expires_after="2024-01-21">
  <owner>charlesmeng@chromium.org</owner>
  <owner>estalin@chromium.org</owner>
  <summary>
    Logs whether the overscroll history navigation setting is enabled or
    disabled when it is toggled in chrome://settings/accessibility.
  </summary>
</histogram>

<histogram name="Settings.PinUnlockSetup" enum="LockScreenProgress"
    expires_after="2024-02-25">
  <owner>anastasiian@chromium.org</owner>
  <owner>teresachow@google.com</owner>
  <owner>cros-lurs@google.com</owner>
  <summary>
    The users progress through the pin unlock setup wizard. Each type
    corresponds to the user completing a different stage of the setup wizard.
  </summary>
</histogram>

<histogram name="Settings.Preloading.DeprecatedRedirect" enum="BooleanEnabled"
    expires_after="2024-03-30">
  <owner>fmacintosh@google.com</owner>
  <owner>koilos@google.com</owner>
  <summary>
    Whether or not navigations to the performance page occured because the user
    was redirected from the deprecated preloading page.
  </summary>
</histogram>

<histogram name="Settings.PreloadStatus.OnStartup" enum="BooleanEnabled"
    expires_after="2023-04-30">
  <obsolete>
    Logged on profile open, including for profiles such as guest profiles that
    do not allow modification of this setting. (This value logged on those cases
    is the default value for the setting.) Replaced in M-110 with the histogram
    Settings.PreloadStatus.OnStartup2, which is similar but only emitted on
    regular profiles.
  </obsolete>
  <owner>harrisonsean@chromium.org</owner>
  <owner>chrome-friendly-settings@google.com</owner>
  <summary>
    The status of the preload setting, recorded on profile open. Not recorded
    for iOS where the setting does not exist.
  </summary>
</histogram>

<histogram name="Settings.PreloadStatus.OnStartup2" enum="BooleanEnabled"
    expires_after="2023-07-02">
  <obsolete>
    Replaced in M-110 with the histogram Settings.PreloadStatus.OnStartup3,
    which records the full state of the setting (disabled, standard, and
    extended).
  </obsolete>
  <owner>harrisonsean@chromium.org</owner>
  <owner>chrome-friendly-settings@google.com</owner>
  <summary>
    The status of the preload setting, recorded on regular profile open (not
    Incognito, Guest, etc.). Not recorded for iOS where the setting does not
    exist.
  </summary>
</histogram>

<histogram name="Settings.PreloadStatus.OnStartup3" enum="PreloadPagesState"
    expires_after="2024-02-25">
  <owner>rainhard@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    The status of the preload setting, recorded on regular profile open (not
    Incognito, Guest, etc.). Not recorded for iOS where the setting does not
    exist.
  </summary>
</histogram>

<histogram name="Settings.PrivacyElementInteractions"
    enum="SettingsPrivacyElementInteractions" expires_after="2024-03-31">
  <owner>harrisonsean@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>sauski@chromium.org</owner>
  <summary>
    Which privacy related settings elements a user interacted with. Recorded
    every time a user interacts with an element of interest.
  </summary>
</histogram>

<histogram name="Settings.PrivacyGuide.CanShowNTPPromo" enum="Boolean"
    expires_after="2024-01-31">
  <owner>msramek@chromium.org</owner>
  <owner>rainhard@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    Recorded when we attempt to show a Privacy Guide NTP promotion as instructed
    by the server. True if the conditions to do so are met.
  </summary>
</histogram>

<histogram name="Settings.PrivacyGuide.EntryExit"
    enum="SettingsPrivacyGuideInteractions" expires_after="2024-03-31">
  <owner>harrisonsean@chromium.org</owner>
  <owner>rainhard@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    How the users navigated into the Privacy guide as well as links out of the
    privacy guide.
  </summary>
</histogram>

<histogram name="Settings.PrivacyGuide.FlowLength" units="steps"
    expires_after="2024-03-31">
  <owner>rainhard@chromium.org</owner>
  <owner>aisulu@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    The number of settings steps that can be shown in the Privacy Guide flow.
    This number varies based on the users' setting states. Recorded when the
    user clicks 'Next' in the Privacy Guide welcome card.
  </summary>
</histogram>

<histogram name="Settings.PrivacyGuide.NextNavigation"
    enum="SettingsPrivacyGuideInteractions" expires_after="2024-03-31">
  <owner>harrisonsean@chromium.org</owner>
  <owner>rainhard@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    The step in the Privacy guide from which a user clicked the 'next' button.
  </summary>
</histogram>

<histogram name="Settings.PrivacyGuide.SettingsStates"
    enum="SettingsPrivacyGuideSettingsStates" expires_after="2024-01-31">
  <owner>harrisonsean@chromium.org</owner>
  <owner>rainhard@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    Records whether or not the user kept the same settings or changed it, and
    the corresponding value, on every |Next| or |Back| button click inside of
    Privacy guide.
  </summary>
</histogram>

<histogram name="Settings.PrivacyGuide.StepsEligibleAndReached"
    enum="SettingsPrivacyGuideStepsEligibleAndReached"
    expires_after="2024-03-31">
  <owner>rainhard@chromium.org</owner>
  <owner>aisulu@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    Records which steps were set to be eligible to be shown when user clicks
    'Next' button in the Welcome step. Records which steps were reached when
    user reaches the individual step in the flow.
  </summary>
</histogram>

<histogram name="Settings.PrivacySandbox.AdMeasurement.Enabled"
    enum="BooleanEnabled" expires_after="2024-03-17">
  <owner>sauski@google.com</owner>
  <owner>olesiamarukhno@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>kartoffel-core-eng@google.com</owner>
  <summary>
    Records the startup state of the ad measurement API for Privacy Sandbox GA
    M1. This is recorded during the profile start up.
  </summary>
</histogram>

<histogram
    name="Settings.PrivacySandbox.CanNonNormalBrowserWindowFitConsentWidth"
    enum="Boolean" expires_after="2024-08-25">
  <owner>boujane@google.com</owner>
  <owner>koilos@google.com</owner>
  <summary>
    In case of non normal browser(Pop up or PIP for example), Records whether
    the window width was too small to fit the consent dialog.
  </summary>
</histogram>

<histogram
    name="Settings.PrivacySandbox.CanNonNormalBrowserWindowFitNoticeWidth"
    enum="Boolean" expires_after="2024-08-25">
  <owner>boujane@google.com</owner>
  <owner>koilos@google.com</owner>
  <summary>
    In case of non normal browser(Pop up or PIP for example), Records whether
    the window width was too small to fit the notice dialog.
  </summary>
</histogram>

<histogram name="Settings.PrivacySandbox.DeprecatedRedirect"
    enum="BooleanRedirected" expires_after="2024-02-11">
  <owner>olesiamarukhno@google.com</owner>
  <owner>sauski@google.com</owner>
  <owner>kartoffel-core-eng@google.com</owner>
  <summary>
    Whether or not navigations to the Privacy sandbox settings page occured
    because the user was redirected from the old version of the page. It occurs
    once per navigation to the privacy sandbox settings page.

    Expired after M115, re-instated in M117.
  </summary>
</histogram>

<histogram name="Settings.PrivacySandbox.DialogDisplayHost"
    enum="SettingsPrivacySandboxDialogDisplayHostHash"
    expires_after="2024-02-25">
  <owner>sauski@google.com</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    Records the host portion of the URL of the tab that the Privacy Sandbox
    dialog was displayed over. As the Privacy Sandbox dialog is only shown over
    chrome:// URLs (or about:blank), and we only record the host portion, this
    will never include the user's browsing information (which may be present in
    query parameters of chrome:// urls).
  </summary>
</histogram>

<histogram name="Settings.PrivacySandbox.DialogLoadTime" units="ms"
    expires_after="2024-02-25">
  <owner>olesiamarukhno@google.com</owner>
  <owner>sauski@google.com</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    Records the load time of the Privacy Sandbox Dialog. The load time is the
    time between the dialog view created and HTML loaded (DOMContentLoaded).
  </summary>
</histogram>

<histogram name="Settings.PrivacySandbox.DialogWindowTooSmall" enum="Boolean"
    expires_after="2024-02-25">
  <owner>olesiamarukhno@google.com</owner>
  <owner>sauski@google.com</owner>
  <owner>kartoffel-core-eng@google.com</owner>
  <summary>
    Records whether the window size was too small to fit the Privacy Sandbox
    dialog. If the window is too small, the dialog isn't shown. It is recorded
    after all other conditions to show the dialog were satisfied.
  </summary>
</histogram>

<histogram name="Settings.PrivacySandbox.Enabled"
    enum="SettingsPrivacySandboxEnabled" expires_after="2024-03-17">
  <owner>harrisonsean@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    Whether or not privacy sandbox apis are enabled, including the current state
    of cookie settings, and if it is disabled by policy. Recorded on profile
    startup. Values 8, 9, and 10 were added with M92.
  </summary>
</histogram>

<histogram name="Settings.PrivacySandbox.Fledge.Enabled" enum="BooleanEnabled"
    expires_after="2024-03-17">
  <owner>sauski@google.com</owner>
  <owner>olesiamarukhno@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>kartoffel-core-eng@google.com</owner>
  <summary>
    Records the startup state of the fledge API for Privacy Sandbox GA M1. This
    is recorded during the profile start up.
  </summary>
</histogram>

<histogram name="Settings.PrivacySandbox.InvalidTopicIdLocalized" units="units"
    expires_after="2024-03-31">
  <owner>sauski@google.com</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    Records the Topic ID which was provided for attempted localization, but
    failed because the ID was outside the supported range.

    Any entry in this histogram is unexpected, and indicates that the model
    generating Topic IDs is generating IDs which cannot be handled by Chrome UI.
  </summary>
</histogram>

<histogram name="Settings.PrivacySandbox.PrivacySandboxReferrer"
    enum="PrivacySandboxReferrer" expires_after="2023-02-12">
  <owner>andzaytsev@google.com</owner>
  <owner>harrisonsean@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>chrome-friendly-settings@google.com</owner>
  <summary>
    Referrer of a navigation to the Privacy Sandbox UI Settings view. Recorded
    when the user enters the view.

    Warning: This histogram was expired after M95 and restored M99. Data may be
    missing M96-98.
  </summary>
</histogram>

<histogram name="Settings.PrivacySandbox.PromptHelperEvent"
    enum="SettingsPrivacySandboxPromptHelperEvent" expires_after="2024-02-04">
  <owner>sauski@google.com</owner>
  <owner>olesiamarukhno@google.com</owner>
  <owner>kartoffel-core-eng@google.com</owner>
  <summary>
    Records each event that occurs when the Privacy Sandbox prompt helper is
    attempting to find a suitable location to show any pending Privacy Sandbox
    prompt.

    The helper is only created and attached to the tab when a prompt is
    required, and so these metrics are only recorded when a prompt is required.
    Value 1 is recorded on navigations that occur while the helper still exists,
    but after the prompt has been shown (as the tab that created the helper can
    outlive the prompt)
  </summary>
</histogram>

<histogram name="Settings.PrivacySandbox.PromptStartupState"
    enum="SettingsPrivacySandboxPromptStartupState" expires_after="2024-02-25">
  <owner>sauski@google.com</owner>
  <owner>olesiamarukhno@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>kartoffel-core-eng@google.com</owner>
  <summary>
    Records the startup state of the privacy sandbox prompt for Privacy Sandbox
    GA M1. This is recorded during the profile start up.
  </summary>
</histogram>

<histogram name="Settings.PrivacySandbox.StartupState"
    enum="SettingsPrivacySandboxStartupStates" expires_after="2024-02-25">
  <owner>sauski@google.com</owner>
  <owner>harrisonsean@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    Records the startup state of user prefs controlling Privacy Sandbox.
  </summary>
</histogram>

<histogram name="Settings.PrivacySandbox.Topics.Enabled" enum="BooleanEnabled"
    expires_after="2024-02-25">
  <owner>sauski@google.com</owner>
  <owner>olesiamarukhno@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>kartoffel-core-eng@google.com</owner>
  <summary>
    Records the startup state of the topics API for Privacy Sandbox GA M1. This
    is recorded during the profile start up.
  </summary>
</histogram>

<histogram name="Settings.SafetyCheck.ExtensionsResult"
    enum="SafetyCheckExtensionsStatus" expires_after="2021-06-20">
  <owner>andzaytsev@google.com</owner>
  <owner>msramek@chromium.org</owner>
  <summary>Resulting state of the safety check extensions check.</summary>
</histogram>

<histogram name="Settings.SafetyCheck.Interactions"
    enum="SettingsSafetyCheckInteractions" expires_after="2024-02-11">
  <owner>rainhard@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>anaudrey@chromium.org</owner>
  <summary>
    Which user actions were taken in safety check. Recorded every time a user
    does an interaction in safety check. Value 5 and 6 got added with M86, 7-9
    with M87, 10 with M88, and 11 with M89.
  </summary>
</histogram>

<histogram name="Settings.SafetyCheck.NotificationsListCount"
    units="suggestions" expires_after="2024-02-25">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>hkamila@chromium.org</owner>
  <summary>
    The number of suggestions of notification permissions to revoke, recorded
    when the notification permission list is initialized for the SafetyCheck
    notifications module.
  </summary>
</histogram>

<histogram name="Settings.SafetyCheck.NotificationsModuleEntryPointShown"
    enum="BooleanVisible" expires_after="2023-12-21">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>hkamila@chromium.org</owner>
  <summary>
    Captures whether the entry point for the notification module of Safety Check
    is shown to the user, i.e. whether it is enabled and at least one
    notification permission met the criteria for review. Recorded whenever the
    user visits the Safety Check page in Chrome Settings.
  </summary>
</histogram>

<histogram name="Settings.SafetyCheck.NotificationsModuleInteractions"
    enum="SafetyCheckNotificationsModuleInteractions"
    expires_after="2024-02-25">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>hkamila@chromium.org</owner>
  <summary>
    The user actions taken on the notifications module in safety check in Chrome
    settings. Recorded every time the user interacts with the respective UI
    element.
  </summary>
</histogram>

<histogram name="Settings.SafetyCheck.PasswordsResult2"
    enum="SafetyCheckPasswordsStatus" expires_after="2024-05-23">
  <owner>rainhard@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <summary>
    Resulting state of the safety check password check. Replaced
    Settings.SafetyCheck.PasswordsResult in M116 after fixing a bug on Safety
    Check on iOS that was recording password results multiple times for the same
    password check.
  </summary>
</histogram>

<histogram name="Settings.SafetyCheck.SafeBrowsingResult"
    enum="SafetyCheckSafeBrowsingStatus" expires_after="2023-12-24">
  <owner>andzaytsev@google.com</owner>
  <owner>msramek@chromium.org</owner>
  <summary>Resulting state of the safety check Safe Browsing check.</summary>
</histogram>

<histogram name="Settings.SafetyCheck.UnusedSitePermissionsAllowAgainDays"
    units="days" expires_after="2024-02-20">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <summary>
    The number of days between the revocation of the permissions for an unused
    site and when the user reverts this revocation through the unused site
    permissions module of safety check in Chrome settings. Emitted when the user
    clicks regrants permissions through the permissions review interface in
    Chrome settings.
  </summary>
</histogram>

<histogram name="Settings.SafetyCheck.UnusedSitePermissionsListCount"
    units="suggestions" expires_after="2024-02-20">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <summary>
    The number of suggestions of unused site permissions to revoke, recorded
    when the list of sites with revoked permissions is initialized when the user
    opens the SafetyCheck unused site permissions module.
  </summary>
</histogram>

<histogram
    name="Settings.SafetyCheck.UnusedSitePermissionsModuleEntryPointShown"
    enum="BooleanVisible" expires_after="2024-02-20">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <owner>hkamila@chromium.org</owner>
  <summary>
    Captures whether the entry point for the unused site permissions module of
    Safety Check is shown to the user, i.e. whether it is enabled and at least
    one site permission has been revoked. Recorded whenever the user visits the
    Safety Check page in Chrome Settings.
  </summary>
</histogram>

<histogram name="Settings.SafetyCheck.UnusedSitePermissionsModuleInteractions"
    enum="SafetyCheckUnusedSitePermissionsModuleInteractions"
    expires_after="2024-02-20">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <summary>
    The user actions taken on the unused site permissions module in safety check
    in Chrome settings. Recorded every time the user interacts with the
    respective UI element.
  </summary>
</histogram>

<histogram
    name="Settings.SafetyCheck.UnusedSitePermissionsRegrantDays{SourceUI}.All"
    units="days" expires_after="2023-12-21">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>tov@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <summary>
    Captures the number of days since the permission was revoked for any
    permission type, up until the cleanup threshold for revoked permissions has
    been reached. The metric is recorded when the user regrants a permission
    that was previously revoked by the unused site permission module of
    SafetyCheck.
  </summary>
  <token key="SourceUI">
    <variant name="Prompt"/>
    <variant name="Settings"/>
  </token>
</histogram>

<histogram
    name="Settings.SafetyCheck.UnusedSitePermissionsRegrantDays{SourceUI}.{PermissionType}"
    units="days" expires_after="2023-12-21">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>tov@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <summary>
    Captures the number of days since the permission was revoked for the
    {PermissionType} permission type, up until the cleanup threshold for revoked
    permissions has been reached. The metric is recorded when the user regrants
    a permission that was previously revoked by the unused site permission
    module of SafetyCheck.
  </summary>
  <token key="PermissionType" variants="SettingsAllPermissionTypes"/>
  <token key="SourceUI">
    <variant name="Prompt"/>
    <variant name="Settings"/>
  </token>
</histogram>

<histogram name="Settings.SafetyCheck.UpdatesResult"
    enum="SafetyCheckUpdateStatus" expires_after="2023-04-23">
  <owner>andzaytsev@google.com</owner>
  <owner>msramek@chromium.org</owner>
  <summary>Resulting state of the safety check updates check.</summary>
</histogram>

<histogram name="Settings.SafetyHub.EntryPointImpression"
    enum="SafetyHubEntryPoint" expires_after="2024-11-11">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>tov@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <summary>
    Captures the impressions of the different entry points of Safety Hub.
  </summary>
</histogram>

<histogram name="Settings.SafetyHub.EntryPointInteraction"
    enum="SafetyHubEntryPoint" expires_after="2024-11-11">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>tov@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <summary>
    Captures the interaction with an entry point of Safety Hub, that will
    eventually lead to the Safety Check page, password manager checkup page or
    the extensions page.
  </summary>
</histogram>

<histogram name="Settings.SafetyHub.Impression" enum="SafetyHubSurfaces"
    expires_after="2024-11-11">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>tov@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <summary>
    Captures Safety Hub page visits and three dot menu impressions for any
    Safety Hub module.
  </summary>
</histogram>

<histogram name="Settings.SafetyHub.Interaction" enum="SafetyHubSurfaces"
    expires_after="2024-11-11">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>tov@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <summary>
    Captures Safety Hub page visits and three dot menu clicks for any Safety Hub
    module.
  </summary>
</histogram>

<histogram name="Settings.SafetyHub.MenuNotificationClicked"
    enum="SafetyHubModuleType" expires_after="2024-11-11">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>tov@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <summary>
    Captures the Safety Hub module of which the three-dot menu notification was
    clicked.
  </summary>
</histogram>

<histogram name="Settings.SafetyHub.MenuNotificationImpression"
    enum="SafetyHubModuleType" expires_after="2024-11-11">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>tov@chromium.org</owner>
  <owner>msramek@chromium.org</owner>
  <summary>
    Captures the Safety Hub module for which a notification was shown in the
    three-dot menu.
  </summary>
</histogram>

<histogram name="Settings.SafetyHub.PasswordsCard.StatusOnClick"
    enum="SafetyHubCardState" expires_after="2024-04-08">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>aisulu@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    Passwords Card is located on Safety Check page in settings and can be in one
    of the multiple states. This is the Passwords Card state recorded on click.
  </summary>
</histogram>

<histogram name="Settings.SafetyHub.SafeBrowsingCard.StatusOnClick"
    enum="SafetyHubCardState" expires_after="2024-04-08">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>aisulu@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    Safe Browsing Card is located on Safety Check page in settings and can be in
    one of the multiple states. This is the Safe Browsing Card state recorded on
    click.
  </summary>
</histogram>

<histogram name="Settings.SafetyHub.VersionCard.StatusOnClick"
    enum="SafetyHubCardState" expires_after="2024-04-08">
  <owner>sideyilmaz@chromium.org</owner>
  <owner>aisulu@chromium.org</owner>
  <owner>chrome-privacy-controls@google.com</owner>
  <summary>
    Version Card is located on Safety Check page in settings and can be in one
    of the multiple states. This is the Version Card state recorded on click.
  </summary>
</histogram>

<histogram name="Settings.SearchEngines.Interactions"
    enum="SettingsSearchEnginesInteractions" expires_after="2024-02-11">
  <owner>yoangela@chromium.org</owner>
  <owner>chrome-omnibox-team@google.com</owner>
  <summary>
    Which Search Engines settings page elements a user interacted with. Recorded
    every time a user interacts with an element of interest.
  </summary>
</histogram>

<histogram name="Settings.SearchLength" units="units" expires_after="M85">
  <owner>dschuyler@chromium.org</owner>
  <summary>
    The number of characters typed in the chrome://settings page search box.
    Intended to determine if we are making the user type too much to find what
    they are looking for (the search is incremental).
  </summary>
</histogram>

<histogram name="Settings.SearchLengthNoMatch" units="units"
    expires_after="M85">
  <owner>dschuyler@chromium.org</owner>
  <summary>
    If no matches are found when searching within the chrome://settings page,
    record the length of the search text.
  </summary>
</histogram>

<histogram name="Settings.SearchPageMatchCount" units="units"
    expires_after="M85">
  <owner>dschuyler@chromium.org</owner>
  <summary>
    The number of search page hits within the chrome://settings page. This is
    especially important when the count is zero (i.e. we returned no hits for a
    given search in settings). A search is considered complete via timeout since
    there is no concrete way to define the end of a search (the search is
    incremental).
  </summary>
</histogram>

<histogram name="Settings.SearchSections" enum="SettingsSections"
    expires_after="M85">
  <owner>dschuyler@chromium.org</owner>
  <summary>
    If there is no further activity in the search box for 1 second, this records
    one tick each time a settings section is shown as a result of searching
    withing the chrome://settings page. If multiple matches are found within the
    same section, the section match is only recorded once.
  </summary>
</histogram>

<histogram name="Settings.SearchSubpageMatchCount" units="units"
    expires_after="M85">
  <owner>dschuyler@chromium.org</owner>
  <summary>
    The number of search subpage hits within the chrome://settings page. This is
    different from Settings.SearchPageMatchCount in that it is tracking hits in
    subpages rather than top level pages. See also
    Settings.SearchPageMatchCount.
  </summary>
</histogram>

<histogram name="Settings.ShowHomeButton" enum="BooleanEnabled"
    expires_after="2023-09-10">
  <obsolete>
    Logged on profile open, including for profiles that do not use this setting
    (such as &quot;system&quot; profiles) and for profiles that do not allow the
    profile-owner to configure this setting (such as &quot;guest&quot;
    profiles). When logged in such cases, reported the default value. Replaced
    in M-114 with the histogram Settings.ShowHomeButton2, which is similar only
    emitted for regular profiles.
  </obsolete>
  <owner>mpearson@chromium.org</owner>
  <owner>twellington@chromium.org</owner>
  <summary>
    Whether or not the home button is enabled in user preferences when a profile
    is loaded.
  </summary>
</histogram>

<histogram name="Settings.ShowHomeButton2" enum="BooleanEnabled"
    expires_after="2024-04-30">
  <owner>mpearson@chromium.org</owner>
  <owner>twellington@chromium.org</owner>
  <summary>
    Whether or not the home button is enabled in user preferences when a regular
    profile is loaded.

    To be explicit: not logged when an Incognito profile is opened because that
    inherits the settings from its parent profile. As such, it's not necessary
    to log the Incognito profile's settings.
  </summary>
</histogram>

<histogram name="Settings.StartSetAsDefault" enum="BooleanHit"
    expires_after="2024-02-11">
  <owner>pmonette@chromium.org</owner>
  <owner>robliao@chromium.org</owner>
  <summary>
    The user clicked &quot;Make Google Chrome the default browser&quot; on the
    settings page.
  </summary>
</histogram>

<histogram name="Settings.StartupPageEngineTypes"
    enum="OmniboxSearchEngineType" expires_after="2023-08-08">
  <obsolete>
    Logged on profile open, including for profiles that do not use this setting
    (such as &quot;system&quot; profiles) and for profiles that do not allow the
    profile-owner to configure this setting (such as &quot;guest&quot;
    profiles). When logged in such cases, reported the default value. Replaced
    in M-114 with the histogram Settings.StartupPageEngineTypes2, which is
    similar only emitted for regular profiles.
  </obsolete>
  <owner>mpearson@chromium.org</owner>
  <owner>csharp@chromium.org</owner>
  <summary>
    Tries to pretend the startup page URLs are search URLs, and records the
    search engine types of those URLs by comparing the TLD+1s of the URLs with
    those of the different known search engines. Recorded when a profile is
    opened, if startup page URLs have been set. Note that at least one profile
    is opened on startup.
  </summary>
</histogram>

<histogram name="Settings.StartupPageEngineTypes2"
    enum="OmniboxSearchEngineType" expires_after="2024-04-30">
  <owner>mpearson@chromium.org</owner>
  <owner>csharp@chromium.org</owner>
  <summary>
    Tries to pretend the startup page URLs are search URLs, and records the
    search engine types of those URLs by comparing the TLD+1s of the URLs with
    those of the different known search engines. Recorded when a regular profile
    is opened, if startup page URLs have been set. Note that at least one
    profile is opened on startup.

    To be explicit: not logged when an Incognito profile is opened because that
    inherits the settings from its parent profile. As such, it's not necessary
    to log the Incognito profile's settings.
  </summary>
</histogram>

<histogram name="Settings.StartupPageLoadSettings" enum="SessionStartupPref"
    expires_after="2023-08-27">
  <obsolete>
    Logged on profile open, including for profiles that do not use this setting
    (such as &quot;system&quot; profiles) and for profiles that do not allow the
    profile-owner to configure this setting (such as &quot;guest&quot;
    profiles). When logged in such cases, reported the default value. Replaced
    in M-114 with the histogram Settings.StartupPageLoadSettings2, which is
    similar only emitted for regular profiles.
  </obsolete>
  <owner>mpearson@chromium.org</owner>
  <owner>tiborg@chromium.org</owner>
  <owner>chrome-desktop-ntp@google.com</owner>
  <summary>The startup page settings when a profile is loaded.</summary>
</histogram>

<histogram name="Settings.StartupPageLoadSettings2" enum="SessionStartupPref"
    expires_after="2024-04-30">
  <owner>mpearson@chromium.org</owner>
  <owner>tiborg@chromium.org</owner>
  <owner>chrome-desktop-ntp@google.com</owner>
  <summary>
    The startup page settings when a regular profile is loaded.

    To be explicit: not logged when an Incognito profile is opened because that
    inherits the settings from its parent profile. As such, it's not necessary
    to log the Incognito profile's settings.
  </summary>
</histogram>

<histogram name="Settings.TimeToFirstSearch" units="ms" expires_after="M85">
  <owner>dschuyler@chromium.org</owner>
  <summary>
    The time between when the chrome://settings page is opened to the first time
    a search is done within that page. This is intended to evaluate how long a
    user looks for a setting before giving up and searching for it.
  </summary>
</histogram>

<histogram name="Settings.TimeUntilInteractive" units="ms"
    expires_after="2021-08-22">
  <owner>dbeam@chromium.org</owner>
  <owner>dpapad@chromium.org</owner>
  <summary>
    The time until the settings Web UI is loaded, rendered, and interactive for
    users (as in they can change a setting). Automatically logged each time the
    settings page is opened (if not closed before interactive).
  </summary>
</histogram>

<histogram name="Settings.TrackedPreferenceChanged" enum="TrackedPreference"
    expires_after="2024-03-17">
  <owner>proberge@chromium.org</owner>
  <owner>junhao.huang@microsoft.com</owner>
  <summary>
    The id of a tracked preference whose value has been changed since the last
    time Chrome set it. Without a suffix, this histogram stands for preference
    validation using MACs in the JSON pref files.
  </summary>
</histogram>

<histogram name="Settings.TrackedPreferenceCleared" enum="TrackedPreference"
    expires_after="2022-12-22">
  <expired_intentionally>
    Kept as test chrome/browser/prefs/tracked/pref_hash_browsertest.cc depends
    on this histogram.
  </expired_intentionally>
  <owner>proberge@chromium.org</owner>
  <owner>junhao.huang@microsoft.com</owner>
  <summary>
    The id of a tracked preference whose value has been cleared since the last
    time Chrome set it. Without a suffix, this histogram stands for preference
    validation using MACs in the JSON pref files.
  </summary>
</histogram>

<histogram name="Settings.TrackedPreferenceInitialized"
    enum="TrackedPreference" expires_after="2022-12-22">
  <expired_intentionally>
    Kept as test chrome/browser/prefs/tracked/pref_hash_browsertest.cc depends
    on this histogram.
  </expired_intentionally>
  <owner>proberge@chromium.org</owner>
  <owner>junhao.huang@microsoft.com</owner>
  <summary>
    The id of a tracked preference whose last value isn't known. We may be just
    starting to track the preference, or local state may have been changed
    outside of Chrome. This should only happen once per pref per profile.
    Without a suffix, this histogram stands for preference validation using MACs
    in the JSON pref files.
  </summary>
</histogram>

<histogram name="Settings.TrackedPreferenceMigratedLegacyDeviceId"
    enum="TrackedPreference" expires_after="2022-12-22">
  <expired_intentionally>
    Kept as test chrome/browser/prefs/tracked/pref_hash_browsertest.cc depends
    on this histogram.
  </expired_intentionally>
  <owner>proberge@chromium.org</owner>
  <owner>junhao.huang@microsoft.com</owner>
  <summary>
    The id of a tracked preference whose value has not changed since the last
    time Chrome set it, but which was last set using a legacy device ID. Each
    user should report this at most once per preference id and immediately be
    migrated to the latest hashing model. Without a suffix, this histogram
    stands for preference validation using MACs in the JSON pref files.
  </summary>
</histogram>

<histogram name="Settings.TrackedPreferenceNullInitialized"
    enum="TrackedPreference" expires_after="2022-12-22">
  <expired_intentionally>
    Kept as test chrome/browser/prefs/tracked/pref_hash_browsertest.cc depends
    on this histogram.
  </expired_intentionally>
  <owner>proberge@chromium.org</owner>
  <owner>junhao.huang@microsoft.com</owner>
  <summary>
    The id of a tracked preference which was initialized despite the absence of
    a MAC as its value was NULL. Without a suffix, this histogram stands for
    preference validation using MACs in the JSON pref files.
  </summary>
</histogram>

<histogram name="Settings.TrackedPreferenceReset" enum="TrackedPreference"
    expires_after="2024-01-21">
  <owner>proberge@chromium.org</owner>
  <owner>junhao.huang@microsoft.com</owner>
  <summary>The id of a tracked preference which was reset by Chrome.</summary>
</histogram>

<histogram name="Settings.TrackedPreferencesNoEnforcementOnDomain"
    enum="BooleanEnabled" expires_after="2018-08-30">
  <owner>gab@chromium.org</owner>
  <summary>
    Whether settings enforcement was cancelled for a machine joined to a domain.
    Reported once per session on browser startup (note: this histogram was
    disabled for part of M40).
  </summary>
</histogram>

<histogram name="Settings.TrackedPreferenceTrustedInitialized"
    enum="TrackedPreference" expires_after="2022-12-22">
  <expired_intentionally>
    Kept as test chrome/browser/prefs/tracked/pref_hash_browsertest.cc depends
    on this histogram.
  </expired_intentionally>
  <owner>proberge@chromium.org</owner>
  <owner>junhao.huang@microsoft.com</owner>
  <summary>
    The id of a tracked preference which was initialized despite the absence of
    a MAC as the current MACs are trusted, inferring that this is a newly
    tracked pref. Without a suffix, this histogram stands for preference
    validation using MACs in the JSON pref files.
  </summary>
</histogram>

<histogram name="Settings.TrackedPreferenceUnchanged" enum="TrackedPreference"
    expires_after="2022-12-22">
  <expired_intentionally>
    Kept as test chrome/browser/prefs/tracked/pref_hash_browsertest.cc depends
    on this histogram.
  </expired_intentionally>
  <owner>proberge@chromium.org</owner>
  <owner>junhao.huang@microsoft.com</owner>
  <summary>
    The id of a tracked preference whose value has not changed since the last
    time Chrome set it. Without a suffix, this histogram stands for preference
    validation using MACs in the JSON pref files.
  </summary>
</histogram>

<histogram name="Settings.TrackedPreferenceWantedReset"
    enum="TrackedPreference" expires_after="2024-01-28">
  <owner>proberge@chromium.org</owner>
  <owner>junhao.huang@microsoft.com</owner>
  <summary>
    The id of a tracked preference which Chrome would have reset had the config
    allowed it.
  </summary>
</histogram>

<histogram name="Settings.TrackingProtection.BlockAllThirdParty" enum="Boolean"
    expires_after="2024-09-30">
  <owner>fmacintosh@google.com</owner>
  <owner>koilos@google.com</owner>
  <summary>
    Records the state of the pref that represents whether the user has chosen to
    block all third-party cookies on the Tracking Protection settings page.
    Logged on startup.
  </summary>
</histogram>

<histogram name="Settings.TrackingProtection.Enabled" enum="BooleanEnabled"
    expires_after="2024-09-30">
  <owner>fmacintosh@google.com</owner>
  <owner>koilos@google.com</owner>
  <summary>
    Records the state of the pref that represents whether the user has the new
    Tracking Protection prefs and UX. Logged on startup.
  </summary>
</histogram>

<histogram name="Settings.TrackingProtection.Redirect" enum="BooleanRedirected"
    expires_after="2024-12-30">
  <owner>fmacintosh@google.com</owner>
  <owner>koilos@google.com</owner>
  <summary>
    Whether or not navigations to the tracking protection page occured because
    the user was redirected from the cookies page. Records true on redirect from
    chrome://settings/cookies to chrome://settings/trackingProtection. Records
    false on standard navigation to chrome://settings/trackingProtection.
  </summary>
</histogram>

<histogram name="SettingsResetBubble.NumNoThanksPerReset" units="units"
    expires_after="M85">
  <owner>mad@chromium.org</owner>
  <summary>
    Counts the number of times the user clicked on the No Thanks button of the
    settings reset bubble before clicking on the Reset button in the same Chrome
    session.
  </summary>
</histogram>

</histograms>

</histogram-configuration>
