# Copyright 2019 The Chromium Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

source_set("ui_bundled") {
  sources = [
    "browser_coordinator+Testing.h",
    "browser_coordinator.h",
    "browser_coordinator.mm",
    "browser_view_controller+private.h",
    "browser_view_controller.h",
    "browser_view_controller.mm",
    "browser_view_visibility_consumer.h",
    "key_commands_provider.h",
    "key_commands_provider.mm",
    "safe_area_provider.h",
    "safe_area_provider.mm",
    "tab_consumer.h",
    "tab_events_mediator.h",
    "tab_events_mediator.mm",
    "tab_lifecycle_mediator.h",
    "tab_lifecycle_mediator.mm",
  ]
  deps = [
    "//base",
    "//base:i18n",
    "//components/bookmarks/browser",
    "//components/commerce/core:shopping_service",
    "//components/enterprise/idle",
    "//components/feature_engagement/public",
    "//components/image_fetcher/ios",
    "//components/language/ios/browser",
    "//components/omnibox/browser",
    "//components/password_manager/core/common:features",
    "//components/prefs",
    "//components/profile_metrics",
    "//components/reading_list/core",
    "//components/safe_browsing/core/common",
    "//components/segmentation_platform/embedder/default_model",
    "//components/segmentation_platform/embedder/home_modules/tips_manager:signal_constants",
    "//components/sessions",
    "//components/signin/core/browser",
    "//components/signin/ios/browser",
    "//components/strings",
    "//components/translate/core/browser",
    "//components/ukm/ios:ukm_url_recorder",
    "//components/url_formatter",
    "//ios/chrome/app:tests_hook",
    "//ios/chrome/app/application_delegate:app_state_header",
    "//ios/chrome/app/strings",
    "//ios/chrome/browser/ai_prototyping/coordinator",
    "//ios/chrome/browser/app_launcher/model",
    "//ios/chrome/browser/app_store_rating/ui_bundled:features",
    "//ios/chrome/browser/autofill/model:model_internal",
    "//ios/chrome/browser/autofill/model/bottom_sheet",
    "//ios/chrome/browser/autofill/ui_bundled:coordinator",
    "//ios/chrome/browser/autofill/ui_bundled/authentication:card_unmask_authentication_coordinator",
    "//ios/chrome/browser/autofill/ui_bundled/authentication:otp_input_dialog",
    "//ios/chrome/browser/autofill/ui_bundled/bottom_sheet",
    "//ios/chrome/browser/autofill/ui_bundled/bottom_sheet:virtual_card_enrollment_bottom_sheet_coordinator",
    "//ios/chrome/browser/autofill/ui_bundled/error_dialog",
    "//ios/chrome/browser/autofill/ui_bundled/form_input_accessory",
    "//ios/chrome/browser/autofill/ui_bundled/manual_fill",
    "//ios/chrome/browser/autofill/ui_bundled/progress_dialog",
    "//ios/chrome/browser/bookmarks/model",
    "//ios/chrome/browser/bookmarks/ui_bundled/home",
    "//ios/chrome/browser/browser_container",
    "//ios/chrome/browser/bubble/ui_bundled",
    "//ios/chrome/browser/commerce/model:shopping_service",
    "//ios/chrome/browser/commerce/model/price_notifications",
    "//ios/chrome/browser/commerce/model/push_notification",
    "//ios/chrome/browser/content_settings/model",
    "//ios/chrome/browser/context_menu/ui_bundled:coordinator",
    "//ios/chrome/browser/contextual_panel/coordinator",
    "//ios/chrome/browser/contextual_panel/model",
    "//ios/chrome/browser/contextual_panel/utils",
    "//ios/chrome/browser/crash_report/model",
    "//ios/chrome/browser/credential_provider_promo/ui_bundled:coordinator",
    "//ios/chrome/browser/default_browser/model:utils",
    "//ios/chrome/browser/default_promo/ui_bundled:coordinator",
    "//ios/chrome/browser/default_promo/ui_bundled:ui",
    "//ios/chrome/browser/default_promo/ui_bundled/generic",
    "//ios/chrome/browser/dialogs/ui_bundled:dialogs_internal",
    "//ios/chrome/browser/docking_promo/coordinator",
    "//ios/chrome/browser/download/model",
    "//ios/chrome/browser/download/ui_bundled",
    "//ios/chrome/browser/download/ui_bundled:features",
    "//ios/chrome/browser/drive_file_picker/coordinator",
    "//ios/chrome/browser/favicon/model",
    "//ios/chrome/browser/feature_engagement/model",
    "//ios/chrome/browser/find_bar/ui_bundled",
    "//ios/chrome/browser/find_in_page/model",
    "//ios/chrome/browser/find_in_page/model:util",
    "//ios/chrome/browser/first_run/ui_bundled",
    "//ios/chrome/browser/first_run/ui_bundled:utils",
    "//ios/chrome/browser/first_run/ui_bundled/omnibox_position",
    "//ios/chrome/browser/follow/model:browser_agent",
    "//ios/chrome/browser/follow/model:service",
    "//ios/chrome/browser/follow/model:tab_helper",
    "//ios/chrome/browser/follow/ui_bundled",
    "//ios/chrome/browser/follow/ui_bundled:first_follow",
    "//ios/chrome/browser/geolocation/model",
    "//ios/chrome/browser/history/ui_bundled:coordinator",
    "//ios/chrome/browser/home_customization/coordinator",
    "//ios/chrome/browser/incognito_reauth/ui_bundled:features",
    "//ios/chrome/browser/incognito_reauth/ui_bundled:incognito_reauth_commands",
    "//ios/chrome/browser/incognito_reauth/ui_bundled:incognito_reauth_scene_agent",
    "//ios/chrome/browser/incognito_reauth/ui_bundled:incognito_reauth_util",
    "//ios/chrome/browser/incognito_reauth/ui_bundled:ui",
    "//ios/chrome/browser/infobars/model",
    "//ios/chrome/browser/intents:intents_donation_helper",
    "//ios/chrome/browser/iph_for_new_chrome_user/model",
    "//ios/chrome/browser/itunes_urls/model",
    "//ios/chrome/browser/keyboard/ui_bundled",
    "//ios/chrome/browser/language/model",
    "//ios/chrome/browser/lens/model",
    "//ios/chrome/browser/lens_overlay/coordinator",
    "//ios/chrome/browser/lens_overlay/coordinator:lens_overlay_availability",
    "//ios/chrome/browser/lens_overlay/model",
    "//ios/chrome/browser/link_to_text/model",
    "//ios/chrome/browser/location_bar/ui_bundled",
    "//ios/chrome/browser/main/model",
    "//ios/chrome/browser/metrics/model:metrics_browser_agent",
    "//ios/chrome/browser/metrics/model:metrics_internal",
    "//ios/chrome/browser/mini_map/ui_bundled:coordinator",
    "//ios/chrome/browser/net/model",
    "//ios/chrome/browser/ntp/model",
    "//ios/chrome/browser/ntp/model:util",
    "//ios/chrome/browser/ntp/ui_bundled",
    "//ios/chrome/browser/ntp/ui_bundled:component_factory",
    "//ios/chrome/browser/ntp/ui_bundled:coordinator",
    "//ios/chrome/browser/ntp/ui_bundled:logo",
    "//ios/chrome/browser/overlays/model",
    "//ios/chrome/browser/overlays/model/public/web_content_area",
    "//ios/chrome/browser/overlays/ui_bundled",
    "//ios/chrome/browser/overscroll_actions/model",
    "//ios/chrome/browser/overscroll_actions/ui_bundled",
    "//ios/chrome/browser/parcel_tracking:features",
    "//ios/chrome/browser/parcel_tracking:infobar_delegate",
    "//ios/chrome/browser/parcel_tracking:opt_in_status",
    "//ios/chrome/browser/parcel_tracking:parcel_tracking_step",
    "//ios/chrome/browser/parcel_tracking:prefs",
    "//ios/chrome/browser/parcel_tracking:tracking_source",
    "//ios/chrome/browser/parcel_tracking:util",
    "//ios/chrome/browser/parcel_tracking/ui_bundled:coordinator",
    "//ios/chrome/browser/passwords/model",
    "//ios/chrome/browser/passwords/ui_bundled",
    "//ios/chrome/browser/passwords/ui_bundled/bottom_sheet",
    "//ios/chrome/browser/phone_number/ui_bundled:coordinator",
    "//ios/chrome/browser/plus_addresses/coordinator",
    "//ios/chrome/browser/plus_addresses/ui",
    "//ios/chrome/browser/policy/model:policy_util",
    "//ios/chrome/browser/prefs/model",
    "//ios/chrome/browser/prerender/model",
    "//ios/chrome/browser/print/coordinator",
    "//ios/chrome/browser/promos_manager/model:features",
    "//ios/chrome/browser/qr_scanner/ui_bundled:coordinator",
    "//ios/chrome/browser/reading_list/model",
    "//ios/chrome/browser/sad_tab/ui_bundled",
    "//ios/chrome/browser/sad_tab/ui_bundled:coordinator",
    "//ios/chrome/browser/saved_tab_groups/model",
    "//ios/chrome/browser/segmentation_platform/model",
    "//ios/chrome/browser/send_tab_to_self/model",
    "//ios/chrome/browser/sessions/model",
    "//ios/chrome/browser/settings/model/sync/utils",
    "//ios/chrome/browser/shared/coordinator/alert",
    "//ios/chrome/browser/shared/coordinator/chrome_coordinator",
    "//ios/chrome/browser/shared/coordinator/default_browser_promo",
    "//ios/chrome/browser/shared/coordinator/layout_guide",
    "//ios/chrome/browser/shared/coordinator/scene:scene_state_header",
    "//ios/chrome/browser/shared/model/application_context",
    "//ios/chrome/browser/shared/model/prefs:pref_names",
    "//ios/chrome/browser/shared/model/profile",
    "//ios/chrome/browser/shared/model/url:constants",
    "//ios/chrome/browser/shared/model/web_state_list",
    "//ios/chrome/browser/shared/public/commands",
    "//ios/chrome/browser/shared/public/features",
    "//ios/chrome/browser/shared/public/features:features_utils",
    "//ios/chrome/browser/shared/ui/elements:activity_overlay",
    "//ios/chrome/browser/shared/ui/util",
    "//ios/chrome/browser/shared/ui/util:snackbar_util",
    "//ios/chrome/browser/shared/ui/util:url_with_title",
    "//ios/chrome/browser/shared/ui/util:util_swift",
    "//ios/chrome/browser/side_swipe/ui_bundled",
    "//ios/chrome/browser/signin/model",
    "//ios/chrome/browser/snapshots/model",
    "//ios/chrome/browser/snapshots/model:model_common",
    "//ios/chrome/browser/snapshots/model:model_swift",
    "//ios/chrome/browser/spotlight_debugger/ui_bundled",
    "//ios/chrome/browser/ssl/model",
    "//ios/chrome/browser/start_surface/ui_bundled:feature_flags",
    "//ios/chrome/browser/store_kit/model",
    "//ios/chrome/browser/sync/model:sync_error_browser_agent",
    "//ios/chrome/browser/tab_insertion/model",
    "//ios/chrome/browser/tabs/ui_bundled",
    "//ios/chrome/browser/tabs/ui_bundled:constants",
    "//ios/chrome/browser/tabs/ui_bundled:coordinator",
    "//ios/chrome/browser/tabs/ui_bundled/requirements",
    "//ios/chrome/browser/text_fragments/ui_bundled",
    "//ios/chrome/browser/text_zoom/ui_bundled:coordinator",
    "//ios/chrome/browser/text_zoom/ui_bundled:ui",
    "//ios/chrome/browser/tips_manager/model:factory",
    "//ios/chrome/browser/tips_manager/model:tips_manager",
    "//ios/chrome/browser/tips_notifications/coordinator",
    "//ios/chrome/browser/translate/model",
    "//ios/chrome/browser/ui/authentication",
    "//ios/chrome/browser/ui/authentication:signin_presenter",
    "//ios/chrome/browser/ui/authentication/enterprise/enterprise_prompt",
    "//ios/chrome/browser/ui/browser_container",
    "//ios/chrome/browser/ui/browser_container:ui",
    "//ios/chrome/browser/ui/content_suggestions",
    "//ios/chrome/browser/ui/content_suggestions:content_suggestions_constant",
    "//ios/chrome/browser/ui/fullscreen",
    "//ios/chrome/browser/ui/fullscreen:ui",
    "//ios/chrome/browser/ui/infobars:public",
    "//ios/chrome/browser/ui/lens:coordinator",
    "//ios/chrome/browser/ui/main:default_browser_scene_agent",
    "//ios/chrome/browser/ui/main_content:main_content_ui",
    "//ios/chrome/browser/ui/main_content:main_content_ui_broadcasting_util",
    "//ios/chrome/browser/ui/omnibox",
    "//ios/chrome/browser/ui/omnibox:features",
    "//ios/chrome/browser/ui/omnibox:omnibox_internal",
    "//ios/chrome/browser/ui/omnibox/popup",
    "//ios/chrome/browser/ui/page_info:coordinator",
    "//ios/chrome/browser/ui/page_info/requirements",
    "//ios/chrome/browser/ui/popup_menu",
    "//ios/chrome/browser/ui/popup_menu/overflow_menu:feature_flags",
    "//ios/chrome/browser/ui/presenters",
    "//ios/chrome/browser/ui/price_notifications",
    "//ios/chrome/browser/ui/promos_manager",
    "//ios/chrome/browser/ui/reading_list",
    "//ios/chrome/browser/ui/recent_tabs",
    "//ios/chrome/browser/ui/safe_browsing",
    "//ios/chrome/browser/ui/save_to_drive",
    "//ios/chrome/browser/ui/save_to_photos",
    "//ios/chrome/browser/ui/send_tab_to_self",
    "//ios/chrome/browser/ui/settings/autofill",
    "//ios/chrome/browser/ui/settings/clear_browsing_data",
    "//ios/chrome/browser/ui/settings/clear_browsing_data:features",
    "//ios/chrome/browser/ui/settings/password/password_settings",
    "//ios/chrome/browser/ui/sharing",
    "//ios/chrome/browser/ui/tab_switcher/tab_strip/coordinator",
    "//ios/chrome/browser/ui/tab_switcher/tab_strip/ui:utils",
    "//ios/chrome/browser/ui/toolbar",
    "//ios/chrome/browser/ui/toolbar:toolbar_ui",
    "//ios/chrome/browser/ui/toolbar/accessory",
    "//ios/chrome/browser/ui/toolbar/buttons",
    "//ios/chrome/browser/ui/toolbar/fullscreen",
    "//ios/chrome/browser/ui/toolbar/fullscreen:fullscreen_broadcasting_util",
    "//ios/chrome/browser/ui/toolbar/public",
    "//ios/chrome/browser/ui/whats_new",
    "//ios/chrome/browser/unit_conversion/ui_bundled:coordinator",
    "//ios/chrome/browser/url_loading/model",
    "//ios/chrome/browser/url_loading/model:new_tab_animation_tab_helper",
    "//ios/chrome/browser/view_source/model",
    "//ios/chrome/browser/voice/model",
    "//ios/chrome/browser/voice/ui_bundled:voice",
    "//ios/chrome/browser/web/model",
    "//ios/chrome/browser/web/model:delegate",
    "//ios/chrome/browser/web/model:feature_flags",
    "//ios/chrome/browser/web/model:page_placeholder",
    "//ios/chrome/browser/web/model:tab_helper_delegates",
    "//ios/chrome/browser/web/model/annotations",
    "//ios/chrome/browser/web/model/choose_file",
    "//ios/chrome/browser/web/model/font_size",
    "//ios/chrome/browser/web/model/print",
    "//ios/chrome/browser/web_state_list/model",
    "//ios/chrome/browser/web_state_list/model/web_usage_enabler",
    "//ios/chrome/browser/webui/model",
    "//ios/chrome/browser/webui/ui_bundled:coordinator",
    "//ios/chrome/common",
    "//ios/chrome/common/ui/colors",
    "//ios/chrome/common/ui/promo_style",
    "//ios/chrome/common/ui/reauthentication",
    "//ios/chrome/common/ui/util",
    "//ios/components/security_interstitials",
    "//ios/components/webui:url_constants",
    "//ios/public/provider/chrome/browser/fullscreen:fullscreen_api",
    "//ios/public/provider/chrome/browser/lens:lens_api",
    "//ios/public/provider/chrome/browser/signin:choice_api",
    "//ios/public/provider/chrome/browser/text_zoom:text_zoom_api",
    "//ios/public/provider/chrome/browser/user_feedback:user_feedback_api",
    "//ios/public/provider/chrome/browser/voice_search:voice_search_api",
    "//ios/third_party/material_components_ios",
    "//ios/third_party/webkit",
    "//ios/web",
    "//ios/web/public",
    "//services/metrics/public/cpp:ukm_builders",
    "//ui/base",
    "//ui/gfx",
    "//url",

    # Fake dependencies to break cycles
    "//ios/chrome/browser/ui/settings",
    "//ios/chrome/browser/ui/sharing:sharing_internal",
  ]
  frameworks = [
    "MessageUI.framework",
    "Photos.framework",
    "StoreKit.framework",
    "UIKit.framework",
  ]
}

source_set("unit_tests") {
  testonly = true
  sources = [
    "browser_coordinator_unittest.mm",
    "browser_view_controller_unittest.mm",
    "key_commands_provider_unittest.mm",
  ]
  deps = [
    ":ui_bundled",
    "//components/bookmarks/browser",
    "//components/bookmarks/test",
    "//components/commerce/core:shopping_service_test_support",
    "//components/content_settings/core/browser",
    "//components/omnibox/browser:test_support",
    "//components/open_from_clipboard:test_support",
    "//components/policy/core/common:common_constants",
    "//components/prefs:test_support",
    "//components/reading_list/core",
    "//components/search_engines",
    "//components/sessions",
    "//components/supervised_user/core/common:features",
    "//components/sync_preferences:test_support",
    "//ios/chrome/app/strings",
    "//ios/chrome/browser/bookmarks/model",
    "//ios/chrome/browser/bookmarks/model:test_support",
    "//ios/chrome/browser/bookmarks/ui_bundled/home",
    "//ios/chrome/browser/bubble/ui_bundled",
    "//ios/chrome/browser/commerce/model:shopping_service",
    "//ios/chrome/browser/content_settings/model",
    "//ios/chrome/browser/download/model",
    "//ios/chrome/browser/download/ui_bundled",
    "//ios/chrome/browser/favicon/model",
    "//ios/chrome/browser/feature_engagement/model",
    "//ios/chrome/browser/find_in_page/model",
    "//ios/chrome/browser/find_in_page/model:util",
    "//ios/chrome/browser/history/model",
    "//ios/chrome/browser/incognito_reauth/ui_bundled:incognito_reauth_commands",
    "//ios/chrome/browser/incognito_reauth/ui_bundled:incognito_reauth_scene_agent",
    "//ios/chrome/browser/keyboard/ui_bundled",
    "//ios/chrome/browser/lens/model",
    "//ios/chrome/browser/location_bar/ui_bundled",
    "//ios/chrome/browser/metrics/model:metrics_browser_agent",
    "//ios/chrome/browser/ntp/model",
    "//ios/chrome/browser/ntp/ui_bundled:component_factory",
    "//ios/chrome/browser/ntp/ui_bundled:coordinator",
    "//ios/chrome/browser/omnibox/model",
    "//ios/chrome/browser/policy/model:policy_util",
    "//ios/chrome/browser/prerender/model",
    "//ios/chrome/browser/prerender/model:test_support",
    "//ios/chrome/browser/reading_list/model",
    "//ios/chrome/browser/search_engines/model",
    "//ios/chrome/browser/segmentation_platform/model",
    "//ios/chrome/browser/sessions/model",
    "//ios/chrome/browser/sessions/model:fake",
    "//ios/chrome/browser/shared/coordinator/layout_guide",
    "//ios/chrome/browser/shared/coordinator/scene:scene_state_header",
    "//ios/chrome/browser/shared/model/browser/test:test_support",
    "//ios/chrome/browser/shared/model/profile/test",
    "//ios/chrome/browser/shared/model/url:constants",
    "//ios/chrome/browser/shared/model/web_state_list",
    "//ios/chrome/browser/shared/public/commands",
    "//ios/chrome/browser/shared/public/features",
    "//ios/chrome/browser/shared/ui/util:url_with_title",
    "//ios/chrome/browser/side_swipe/ui_bundled",
    "//ios/chrome/browser/signin/model:authentication_service",
    "//ios/chrome/browser/signin/model:authentication_service_factory",
    "//ios/chrome/browser/signin/model:test_support",
    "//ios/chrome/browser/snapshots/model",
    "//ios/chrome/browser/start_surface/ui_bundled",
    "//ios/chrome/browser/sync/model:sync_error_browser_agent",
    "//ios/chrome/browser/tab_insertion/model",
    "//ios/chrome/browser/tabs/model",
    "//ios/chrome/browser/tabs/ui_bundled:coordinator",
    "//ios/chrome/browser/tabs/ui_bundled:ui_bundled",
    "//ios/chrome/browser/ui/browser_container:ui",
    "//ios/chrome/browser/ui/fullscreen",
    "//ios/chrome/browser/ui/fullscreen:internal",
    "//ios/chrome/browser/ui/fullscreen/test",
    "//ios/chrome/browser/ui/popup_menu",
    "//ios/chrome/browser/ui/save_to_photos",
    "//ios/chrome/browser/ui/sharing",
    "//ios/chrome/browser/ui/tab_switcher/tab_strip/coordinator",
    "//ios/chrome/browser/ui/toolbar",
    "//ios/chrome/browser/ui/toolbar/test",
    "//ios/chrome/browser/url_loading/model",
    "//ios/chrome/browser/url_loading/model:new_tab_animation_tab_helper",
    "//ios/chrome/browser/view_source/model",
    "//ios/chrome/browser/web/model",
    "//ios/chrome/browser/web/model:delegate",
    "//ios/chrome/browser/web/model:page_placeholder",
    "//ios/chrome/browser/web_state_list/model/web_usage_enabler",
    "//ios/chrome/common/ui/reauthentication:reauthentication",
    "//ios/chrome/test:block_cleanup_test",
    "//ios/chrome/test:test_support",
    "//ios/net",
    "//ios/public/provider/chrome/browser/user_feedback:user_feedback_api",
    "//ios/web/common:uikit",
    "//ios/web/public",
    "//ios/web/public/find_in_page",
    "//ios/web/public/test",
    "//ios/web/public/test/fakes",
    "//ios/web/web_state:web_state_impl_header",
    "//ios/web/web_state/ui",
    "//net",
    "//net:test_support",
    "//testing/gmock",
    "//testing/gtest",
    "//third_party/ocmock",
    "//ui/base",
    "//ui/base:test_support",
  ]
}

source_set("eg2_tests") {
  configs += [ "//build/config/ios:xctest_config" ]
  testonly = true
  sources = [ "browser_view_controller_egtest.mm" ]
  deps = [
    "//base",
    "//base/test:test_support",
    "//components/strings",
    "//ios/chrome/app/strings",
    "//ios/chrome/browser/shared/model/prefs:pref_names",
    "//ios/chrome/browser/shared/public/features",
    "//ios/chrome/browser/start_surface/ui_bundled:feature_flags",
    "//ios/chrome/browser/ui/content_suggestions:constants",
    "//ios/chrome/browser/ui/popup_menu:constants",
    "//ios/chrome/test:eg_test_support+eg2",
    "//ios/chrome/test/earl_grey:eg_test_support+eg2",
    "//ios/testing/earl_grey:eg_test_support+eg2",
    "//ios/web/public/test/http_server",
    "//ui/base",
    "//url",
  ]
  frameworks = [ "UIKit.framework" ]
}
