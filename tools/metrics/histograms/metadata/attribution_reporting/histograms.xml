<!--
Copyright 2024 The Chromium Authors
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<!--
This file is used to generate a comprehensive list of others histograms
along with a detailed description for each histogram.

For best practices on writing histogram descriptions, see
https://chromium.googlesource.com/chromium/src.git/+/HEAD/tools/metrics/histograms/README.md

Please follow the instructions in the OWNERS file in this directory to find a
reviewer. If no OWNERS file exists, please consider signing up at
go/reviewing-metrics (Googlers only), as all subdirectories are expected to
have an OWNERS file. As a last resort you can send the CL to
chromium-metrics-reviews@google.com.
-->

<histogram-configuration>

<histograms>

<variants name="AttributionReportingAggregatableContextType">
  <variant name=""/>
  <variant name="ContextID."/>
  <variant name="NoContextID."/>
</variants>

<variants name="AttributionReportingRegistrationType">
  <variant name="Source"/>
  <variant name="Trigger"/>
</variants>

<histogram
    name="Conversions.AggregatableDebugReport.HttpResponseOrNetErrorCode"
    enum="CombinedHttpResponseAndNetErrorCode" expires_after="2025-05-03">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Error info for sending an aggregatable debug report, recorded for each sent
    aggregatable debug report. The net error code is recorded if the HTTP
    response code is unavailable.
  </summary>
</histogram>

<histogram name="Conversions.AggregatableDebugReport.ProcessResult"
    enum="ConversionAggregatableDebugReportProcessResult"
    expires_after="2025-04-10">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often aggregatable debug reports are processed successfully or
    null-ed and why. Recorded once for each aggregatable debug report created
    and processed by the attribution resolver layer.
  </summary>
</histogram>

<histogram
    name="Conversions.AggregatableDebugReporting.SourceRegistrationError"
    enum="ConversionAggregatableDebugReportingRegistrationError"
    expires_after="2025-04-10">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often aggregatable debug reporting parsing in source
    registration failed and why. Recorded only when parsing failed; not recorded
    when parsing succeeded.
  </summary>
</histogram>

<histogram
    name="Conversions.AggregatableDebugReporting.TriggerRegistrationError"
    enum="ConversionAggregatableDebugReportingRegistrationError"
    expires_after="2025-04-10">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often aggregatable debug reporting parsing in trigger
    registration failed and why. Recorded only when parsing failed; not recorded
    when parsing succeeded.
  </summary>
</histogram>

<histogram name="Conversions.AggregatableFilteringIdMaxBytesValue"
    units="count" expires_after="2025-05-04">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    When a trigger is received by the attribution manager, records the
    configured aggregatable filtering id max bytes value. That value defaults to
    1.
  </summary>
</histogram>

<histogram name="Conversions.AggregatableKeysPerSource" units="keys"
    expires_after="2025-04-10">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures the number of aggregation keys provided in attribution source
    registration headers. Recorded once for each source registration header when
    parsed from the attributionsrc response.
  </summary>
</histogram>

<histogram name="Conversions.AggregatableReport.AssembleReportStatus"
    enum="ConversionAssembleAggregatableReportStatus"
    expires_after="2025-03-30">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often aggregatable reports are assembled successfully or failed
    and why. Recorded once for each aggregatable report processed by the
    aggregation service on each send attempt.
  </summary>
</histogram>

<histogram name="Conversions.AggregatableReport.CreateReportStatus4"
    enum="ConversionCreateAggregatableReportStatus" expires_after="never">
<!-- expires-never: critical system health metric for monitoring -->

  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often aggregatable reports are stored successfully or rejected
    and why. Recorded once for each trigger event processed by the attribution
    storage layer. `kNotRegistered` will be logged if the source or trigger
    doesn't declare aggregatable data.

    This is a critical histogram monitored by alerts to
    measurement-api-dev+alerts@google.com. Please make sure future versions of
    this histogram are properly set up for alerting, but prefer not to version
    the histogram if possible.
  </summary>
</histogram>

<histogram name="Conversions.AggregatableReport.DroppedKeysPercentage"
    units="%" expires_after="2025-04-13">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures the percentage of aggregation keys dropped per trigger. Recorded
    when creating the aggregatable histogram. Not recorded if no aggregation
    keys were declared.
  </summary>
</histogram>

<histogram
    name="Conversions.AggregatableReport.ExtraReportDelayForSuccessfulSend"
    units="ms" expires_after="2025-03-09">
  <owner>tquintanilla@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the &quot;extra&quot; non-scheduled time it took to confirm the
    aggregatable attribution report was sent. This is primarily due to a
    report's scheduled report time taking place while the browser is closed or
    there is network issue. Recorded when an aggregatable report is successfully
    sent.
  </summary>
</histogram>

<histogram name="Conversions.AggregatableReport.FilteredTriggerDataPercentage"
    units="%" expires_after="2025-04-13">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures the percentage of aggregatable trigger data filtered per trigger.
    Recorded when creating the aggregatable histogram. Not recorded if no
    trigger data was declared. This is effectively how many trigger side
    dimensions the reporter declared, but were not used for histogram
    generation.
  </summary>
</histogram>

<histogram name="Conversions.AggregatableReport.NumContributionsPerReport2"
    units="contribution" expires_after="2025-03-02">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures the number of aggregatable histogram contributions per report.
    Recorded when creating the aggregatable histogram.
  </summary>
</histogram>

<histogram name="Conversions.AggregatableReport.ReportSendOutcome2"
    enum="ConversionReportSendOutcome" expires_after="never">
<!-- expires-never: critical system health metric for monitoring -->

  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the high level request status of an aggregatable report. Recorded
    once per aggregatable report. For aggregatable report that has been retried,
    only the last retry will be counted.

    This is a critical histogram monitored by alerts to
    measurement-api-dev+alerts@google.com. Please make sure future versions of
    this histogram are properly set up for alerting, but prefer not to version
    the histogram if possible.
  </summary>
</histogram>

<histogram name="Conversions.AggregatableReport.SchedulerReportDelay"
    units="ms" expires_after="2025-03-30">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the time difference from when the report was intended to be sent,
    and the actual report time. This is different from
    Conversions.AggregatableReport.ExtraReportDelay because it uses the send
    attempt report time, rather than initial report time assigned by the API.
    Accounts for any delays in Chrome scheduling the report. Recorded when an
    aggregatabl report is to be assembled.
  </summary>
</histogram>

<histogram
    name="Conversions.AggregatableReport.TimeFromTriggerToReportAssembly2"
    units="ms" expires_after="2025-04-13">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the time between a trigger and its assembly. This is emitted
    whenever an aggregatable report is to be assembled by the aggregation
    service.
  </summary>
</histogram>

<histogram
    name="Conversions.AggregatableReport.TimeFromTriggerToReportSentSuccessfully"
    units="ms" expires_after="2025-04-13">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the time between a trigger and its reporting. This is emitted only
    when an aggregatable report is sent succeessfully to the reporting endpoint,
    and not emitted for debug reports.
  </summary>
</histogram>

<histogram name="Conversions.AggregatableReport.TotalBudgetPerReport"
    units="budget consumed" expires_after="2025-03-16">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures the total budget consumed per aggregatable report. Recorded as
    100,000 when the total budget exceeds 65,536. Recorded when creating the
    aggregatable histogram.
  </summary>
</histogram>

<histogram name="Conversions.AggregatableReport.{ContextType}ExtraReportDelay"
    units="ms" expires_after="2025-05-04">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the &quot;extra&quot; non-scheduled time it took to send a
    particular aggregatable attribution report. This is primarily due to a
    report's scheduled report time taking place while the browser is closed or
    there is network issue. Recorded when an aggregatable report is to be
    assembled.
  </summary>
  <token key="ContextType"
      variants="AttributionReportingAggregatableContextType"/>
</histogram>

<histogram name="Conversions.AllowedByPermissionPolicy" enum="BooleanAllowed"
    expires_after="2025-05-04">
  <owner>tquintanilla@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records whether an attribution event is allowed by the client's permission
    policy. This is emitted whenever the permission policy is checked upon an
    attribution event.
  </summary>
</histogram>

<histogram name="Conversions.AndroidOperationResult2.{Operation}"
    enum="ConversionAndroidOperationResult" expires_after="2025-03-23">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often attribution OS operations were successfully delegated to
    Android or failed and why. Only recorded on Android when the
    AttributionReportingCrossAppWeb feature is enabled. Recorded for each OS
    operation processed by the Java attribution OS-level manager.
  </summary>
  <token key="Operation">
    <variant name="DeleteRegistrations"/>
    <variant name="GetMeasurementApiStatus"/>
    <variant name="RegisterSource"/>
    <variant name="RegisterTrigger"/>
    <variant name="RegisterWebSource"/>
    <variant name="RegisterWebTrigger"/>
  </token>
</histogram>

<histogram name="Conversions.AttributionBehavior"
    enum="ConversionAttributionBehavior" expires_after="2025-09-01">
  <owner>pbirk@chromium.org</owner>
  <owner>jdeabreu@chromium.org</owner>
  <owner>src/android_webview/OWNERS</owner>
  <summary>
    Records the Attribution Behavior for WebView. This behavior can be changed
    via the androidx.webkit WebSettingsCompat#setAttributionRegistrationBehavior
    method, and allows developers to configure whether Attribution sources and
    triggers are registered as coming from the app itself or coming from the web
    content in the WebView, or if Attribution should be disabled.

    The histogram is logged whenever a new WebContents is created for a WebView.
  </summary>
</histogram>

<histogram name="Conversions.AttributionOsLevelApiState"
    enum="ConversionAttributionOsLevelApiState" expires_after="2025-03-23">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records whether OS-level attribution is supported on the device. Only
    recorded on Android when the AttributionReportingCrossAppWeb feature is
    enabled. Recorded once per browser session when the browser starts up.
  </summary>
</histogram>

<histogram name="Conversions.AttributionReportDebugKeyUsage"
    enum="ConversionReportDebugKeyUsage" expires_after="2025-04-10">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures the usage of debug keys in event-level and aggregatable attribution
    reports. Recorded once for each event-level and aggregatable attribution
    report created, not recorded for fake event-level reports or null
    aggregatable reports.

    Note that the debug keys are only set in the report body if both source and
    trigger debug keys are present.
  </summary>
</histogram>

<histogram name="Conversions.AttributionResult"
    enum="ConversionAttributionResult" expires_after="2025-03-30">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often an attribution trigger creates an event-level report, an
    aggregatable report, or both. Recorded once for each attribution trigger
    that would create an attribution rate-limit record.
  </summary>
</histogram>

<histogram name="Conversions.AttributionSrcRequestStatus.{Type}"
    enum="ConversionAttributionSrcRequestStatus" expires_after="2025-05-04">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the status of the attributionsrc requests. Recorded when the request
    started, redirected and finished.
  </summary>
  <token key="Type">
    <variant name="All"/>
    <variant name="Navigation"/>
    <variant name="Navigation.Browser"/>
  </token>
</histogram>

<histogram name="Conversions.BackgroundNavigation.Outcome"
    enum="ConversionBackgroundNavigationOutcome" expires_after="2025-03-23">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    When background registrations tied to a navigation are received, they need
    additional context from the navigation itself to be able to process
    registrations data.

    The histogram emits if we were able to tie/link the navigation context with
    the background registrations request.
  </summary>
</histogram>

<histogram name="Conversions.ClearDataTime" units="ms"
    expires_after="2025-03-09">
  <owner>johnidel@chromium.org</owner>
  <owner>csharrison@chromium.org</owner>
  <summary>
    Records the time it takes to clear conversion data. Logged any time site
    data is cleared in Chrome.

    Warning: this histogram was expired from 2024-05-11 to 2024-09-10; data may
    be missing.
  </summary>
</histogram>

<histogram name="Conversions.CorruptReportsInDatabase5"
    enum="ConversionCorruptReportStatus" expires_after="2025-03-09">
  <owner>tquintanilla@chromium.org</owner>
  <owner>apaseltiner@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the cause of report corruption when deserializing from the database.
    Multiple ReportCorruptionStatus values can be associated to a single report
    as a report can be corrupted for multiple reasons. Reports are scanned
    during database initialization and migration.
  </summary>
</histogram>

<histogram name="Conversions.Corrupt{Types}DeletedOnMigration" units="count"
    expires_after="2025-01-26">
  <owner>tquintanilla@chromium.org</owner>
  <owner>apaseltiner@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the number of corrupted reports/sources with reports deleted from
    the database. Reports/sources are deleted during database migration.
  </summary>
  <token key="Types">
    <variant name="Reports"/>
    <variant name="Sources"/>
  </token>
</histogram>

<histogram name="Conversions.CreateReportStatus9"
    enum="ConversionStorageCreateReportStatus" expires_after="never">
<!-- expires-never: critical system health metric for monitoring -->

  <owner>tquintanilla@chromium.org</owner>
  <owner>apaseltiner@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often event-level triggers are stored successfully or rejected
    and why. Recorded once for each conversion event processed by the
    attribution storage layer.

    This is a critical histogram monitored by alerts to
    measurement-api-dev+alerts@google.com. Please make sure future versions of
    this histogram are properly set up for alerting, but prefer not to version
    the histogram if possible.
  </summary>
</histogram>

<histogram name="Conversions.DataAvailableCall.{MethodCall}"
    enum="DataAvailableCallsite" expires_after="2025-09-01">
  <owner>pbirk@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records when attribution_reporting::mojom::DataHost::OsSourceDataAvailable
    is called in Blink and when a method is received by the browser.

    The purpose of this histogram is to measure the percentage of messages being
    dropped. Messages are dropped if an attribution request is tied to a
    navigation that opens in a different app. This is especially likely to
    happen in WebView when an ad opens in the system browser, which puts the
    WebView app into the background, and the browser process stops processing
    events before the renderer is done sending the registration.

    The histogram is logged with enum value of &quot;Blink&quot; when the
    DataHost is called in attribution_src_loader.cc , and enum value of
    &quot;Browser&quot; when the implementation in
    attribution_data_host_manager_impl.cc is invoked.
  </summary>
  <token key="MethodCall">
    <variant name="OsSource"/>
    <variant name="OsTrigger"/>
    <variant name="Source"/>
    <variant name="Trigger"/>
  </token>
</histogram>

<histogram name="Conversions.DbVersionOnReportSentAndDeleted" units="Report"
    expires_after="2025-03-09">
  <owner>tquintanilla@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the DB version every time `AttributionStorageSql::DeleteReport` is
    invoked, i.e. whenever a report is sent or hits the max number of send
    attempts and is subsequently deleted. This metric was added starting with DB
    version 58.
  </summary>
</histogram>

<histogram name="Conversions.DbVersionOnSourceStored" units="Source"
    expires_after="2025-03-30">
  <owner>tquintanilla@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the DB version on every successful source or noised source stored.
    This metric was added starting with version 56.
  </summary>
</histogram>

<histogram
    name="Conversions.DebugReport.HttpResponseOrNetErrorCodeAggregatable"
    enum="CombinedHttpResponseAndNetErrorCode" expires_after="2025-05-03">
  <owner>apaseltiner@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Error info for sending a debug attribution report, recorded for each sent
    aggregatable report. The HTTP response code is recorded if there is no net
    error code for the request, or the net error code indicates there was a
    response code failure.
  </summary>
</histogram>

<histogram name="Conversions.DebugReport.HttpResponseOrNetErrorCodeEventLevel"
    enum="CombinedHttpResponseAndNetErrorCode" expires_after="2025-04-13">
  <owner>apaseltiner@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Error info for sending a debug attribution report, recorded for each sent
    event-level report. The HTTP response code is recorded if there is no net
    error code for the request, or the net error code indicates there was a
    response code failure.
  </summary>
</histogram>

<histogram name="Conversions.DebugReport.ReportRetrySucceedAggregatable"
    enum="BooleanSuccess" expires_after="2025-04-13">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records whether a particular aggregatable debug attribution report was
    successful. Emitted for all aggregatable debug attribution reports that
    retry.
  </summary>
</histogram>

<histogram name="Conversions.DebugReport.ReportRetrySucceedEventLevel"
    enum="BooleanSuccess" expires_after="2025-04-13">
  <owner>apaseltiner@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records whether a particular event-level debug attribution report was
    successful. Emitted for all event-level debug attribution reports that
    retry.
  </summary>
</histogram>

<histogram name="Conversions.DebugReport.ReportStatusAggregatable"
    enum="ConversionReportStatus" expires_after="2025-04-13">
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the high-level request status of an aggregatable debug attribution
    report. Recorded for every debug aggregatable attribution report sent.
  </summary>
</histogram>

<histogram name="Conversions.DebugReport.ReportStatusEventLevel"
    enum="ConversionReportStatus" expires_after="2025-03-30">
  <owner>apaseltiner@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the high-level request status of an event-level debug attribution
    report. Recorded for every debug event-level attribution report sent.
  </summary>
</histogram>

<histogram name="Conversions.DeferredDataHostProcessedAfterTimeout"
    enum="Boolean" expires_after="2025-01-26">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    When registering an attribution data host, its registration will be deferred
    if it can register triggers and there are pending navigation-source
    registrations from the page that navigated to that page. Receivers are
    deferred until the pending navigation-source registrations complete or a
    timeout is reached.

    When processing a deferred attribution data host registration, this metric
    records if it's due to a timeout.
  </summary>
</histogram>

<histogram name="Conversions.ExtraReportDelay2" units="ms"
    expires_after="2025-04-20">
  <owner>apaseltiner@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>csharrison@chromium.org</owner>
  <summary>
    Records the &quot;extra&quot; non-scheduled time it took to send a
    particular conversion report. This is primarily due to a report's scheduled
    report time taking place while the browser is closed. Recorded when a
    conversion report is to be sent.
  </summary>
</histogram>

<histogram name="Conversions.ExtraReportDelayForSuccessfulSend" units="ms"
    expires_after="2025-03-30">
  <owner>tquintanilla@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the &quot;extra&quot; non-scheduled time it took to confirm the
    particular attribution report was sent. This is primarily due to a report's
    scheduled report time taking place while the browser is closed. Recorded
    when an attribution report is successfully sent.
  </summary>
</histogram>

<histogram name="Conversions.FiltersPerFilterData" units="filters"
    expires_after="2025-04-27">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures filter sizes in source and trigger registrations. This includes
    filter data in source, top-level trigger, event-level and aggregatable
    trigger data. Recorded once for each filter data when parsed from the
    attributionsrc response.
  </summary>
</histogram>

<histogram name="Conversions.GetMeasurementStatusTime" units="ms"
    expires_after="2025-03-30">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the time it took to go througth JNI to invoke Android API to get
    measurement status. Only recorded on Android when the
    AttributionReportingCrossAppWeb feature is enabled. Recorded once per
    browser session when the browser starts up. Only recorded if
    base::ThreadTicks is suppported.
  </summary>
</histogram>

<histogram name="Conversions.GoogleAmpViewer.{Type}" enum="Boolean"
    expires_after="2025-05-04">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how many {Type} registrations are registered from Google AMP
    viewer. Recorded for every registration to be processed by the attribution
    manager.
  </summary>
  <token key="Type" variants="AttributionReportingRegistrationType"/>
</histogram>

<histogram name="Conversions.HasAttributionHeaderInAttributionSrcResponse"
    enum="Boolean" expires_after="2025-05-03">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records whether the response to an attributionsrc request contains
    Attribution Reporting headers. This is emitted whenever a redirect or final
    response to an attributionsrc request is received.
  </summary>
</histogram>

<histogram name="Conversions.HeadersSize.Register{Type}" units="bytes"
    expires_after="2025-03-09">
  <owner>tquintanilla@chromium.org</owner>
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the size of attribution response headers for registering sources or
    triggers in bytes. Recorded when Attribution Response Headers are received
    and handled.
  </summary>
  <token key="Type">
    <variant name="OsSource"/>
    <variant name="OsTrigger"/>
    <variant name="Source"/>
    <variant name="Trigger"/>
  </token>
</histogram>

<histogram name="Conversions.HttpResponseOrNetErrorCodeEventLevel"
    enum="CombinedHttpResponseAndNetErrorCode" expires_after="2025-03-30">
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Error info for sending an attribution report, recorded for each sent
    event-level report. The HTTP response code is recorded if there is no net
    error code for the request, or the net error code indicates there was a
    response code failure.
  </summary>
</histogram>

<histogram name="Conversions.ImpressionNavigationHasDeadInitiator"
    enum="Boolean" expires_after="2025-03-09">
  <owner>johnidel@chromium.org</owner>
  <owner>csharrison@chromium.org</owner>
  <summary>
    Measures how often impressions are ignored because the initiator frame is
    dead by the time the navigation reaches the browser.

    Warning: this histogram was expired from 2024-05-13 to 2024-09-10; data may
    be missing.
  </summary>
</histogram>

<histogram name="Conversions.ImpressionsDeletedInDataClearOperation"
    units="impressions" expires_after="2025-03-30">
  <owner>johnidel@chromium.org</owner>
  <owner>csharrison@chromium.org</owner>
  <owner>linnan@chromium.org</owner>
  <summary>
    Records the number of impressions deleted per clearing operation.
  </summary>
</histogram>

<histogram name="Conversions.IncrementalTaintingFailures"
    units="failed registrations" expires_after="2025-03-30">
  <owner>csharrison@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures the number of failures via the proposed insecure tainting
    mechanism, where a redirect chain will be considered &quot;tainted&quot;
    when it encounters its first insecure redirect, causing any subsequent
    registrations to fail even if they are secure. This metric attempts to
    measure the breakage. It is emitted on the completion of any main frame
    navigation which had at least one secure response register ARA headers. It
    counts how many failed registrations that navigation would have observed
    with tainting enabled.
  </summary>
</histogram>

<histogram name="Conversions.LegacyEventReportWindow" enum="Boolean"
    expires_after="2025-05-30">
  <owner>apaseltiner@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records whether a source registration contains a legacy event_report_window
    field, regardless of whether that field or any other field has an error. See
    https://wicg.github.io/attribution-reporting-api/#source-registration-json-key-event_report_window.
  </summary>
</histogram>

<histogram name="Conversions.NamedBudgetsPer{Type}Registration"
    units="named_budgets" expires_after="2025-03-30">
  <owner>tquintanilla@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how many named budgets are in a {Type} registration. Recorded when
    a {Type} registration is successfully parsed.
  </summary>
  <token key="Type">
    <variant name="Source"/>
    <variant name="Trigger"/>
  </token>
</histogram>

<histogram name="Conversions.NavigationDataHostStatus3"
    enum="ConversionNavigationDataHostStatus" expires_after="2025-04-13">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records status for navigation data hosts. A single navigation data host may
    emit two status, one when the navigation started and the data host was
    registered, and one when the navigation finished or failed.
  </summary>
</histogram>

<histogram
    name="Conversions.NavigationSourceRegistrationsPerReportingOriginPerBatch"
    units="registrations" expires_after="2025-04-13">
  <owner>tquintanilla@chromium.org</owner>
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how many parsable navigation source registrations tied to a single
    reporting origin were received in a single navigation event. Records
    immediately after the source registration is successfully parsed.
  </summary>
</histogram>

<histogram name="Conversions.NavigationSourceScopesLimitOutcome"
    enum="ConversionNavigationSourceScopesLimitOutcome"
    expires_after="2025-05-03">
  <owner>tquintanilla@chromium.org</owner>
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how many parsable navigation source registrations were accepted or
    rejected due to navigation source scopes limit. Records immediately after
    the source registration is successfully parsed.
  </summary>
</histogram>

<histogram name="Conversions.NavigationUnexpectedRegistration"
    enum="ConversionNavigationUnexpectedRegistration"
    expires_after="2025-04-20">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Used to further investigate the root cause of https://crbug.com/1500667.

    Upon starting a foreground navigation registration for a given token, if the
    registration already exists, records `kRegistrationAlreadyExists`.

    Upon trying to register foreground navigation data, if the registration
    isn't available and prevents the data from being processed, records
    `kRegistrationMissingUponReceivingData`.
  </summary>
</histogram>

<histogram name="Conversions.NonAttributionSrcRequestUnsetSupport.Detached"
    enum="Boolean" expires_after="2025-03-02">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records whether a non-attributionsrc request that doesn't have attribution
    support set received response in a detached frame. This is only recorded
    when attribution response headers were registered from a suitable reporting
    origin.
  </summary>
</histogram>

<histogram name="Conversions.NonDefaultAggregatableFilteringId" enum="Boolean"
    expires_after="2025-05-04">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    When a trigger is received by the attribution manager, records whether it
    includes a non-default aggregatable filtering id.
  </summary>
</histogram>

<histogram
    name="Conversions.NumDataHostsRegisteredOnClientBounce.{Interaction}.{Duration}"
    units="data hosts" expires_after="2025-05-11">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    We consider a non-user-initiated navigation to be a client bounce if it
    navigates the page away within {Duration} without any {Interaction}.
    Measures how many non-navigation data hosts were registered on the page when
    client bounce occurred. Recorded when a primary main frame and
    non-same-document navigation happens and is determined to be a client
    bounce. Not recorded if there are no data hosts registered upon client
    bounce.
  </summary>
  <token key="Duration">
    <variant name="1s"/>
    <variant name="5s"/>
    <variant name="10s"/>
  </token>
  <token key="Interaction">
    <variant name="UserActivation"/>
    <variant name="UserInteraction"/>
  </token>
</histogram>

<histogram name="Conversions.OsRegistrationItemsPerBatch" units="count"
    expires_after="2025-03-30">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the number of registration items submitted to the OS per batch (or
    registration chain).

    A registration chain might record more than one event if the chain records
    more than 20 registration items.

    Emitted when submitting OS registrations to the AttributionManager.
  </summary>
</histogram>

<histogram name="Conversions.OsRegistrationItemsPerHeader" units="count"
    expires_after="2025-03-30">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the number of registration items per OS attribution header.

    Emitted when parsing an OS attribution header.
  </summary>
</histogram>

<histogram name="Conversions.OsRegistrationResult.{Type}"
    enum="ConversionOsRegistrationResult" expires_after="never">
<!-- expires-never: critical system health metric for monitoring -->

  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often attribution OS registrations were successfully registered
    with Android or failed and why. Only recorded on Android when the
    AttributionReportingCrossAppWeb feature is enabled. Recorded for each OS
    registration processed by the attribution manager layer.

    This is a critical histogram monitored by alerts to
    measurement-api-dev+alerts@google.com. Please make sure future versions of
    this histogram are properly set up for alerting, but prefer not to version
    the histogram if possible.
  </summary>
  <token key="Type" variants="AttributionReportingRegistrationType"/>
</histogram>

<histogram name="Conversions.OsRegistrationsBufferFlushReason"
    enum="ConversionOsRegistrationsBufferFlushReason"
    expires_after="2025-03-30">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    The OS allows associating a navigation's input event to a single call. As a
    result, all registrations tied to a navigation are buffered before
    delegating them to the OS.

    To ensure that buffered OS registrations are eventually sent to the OS, we
    flush the buffer after 20s if we haven't had confirmation yet that the
    navigation will no longer receive any more registrations.

    When flushing an OS registrations buffer, this histogram emits the reason
    why the buffer was flushed. It will only emit if there actually are buffered
    registrations to flush.
  </summary>
</histogram>

<histogram name="Conversions.OsRegistrationsBufferWithSameContext"
    enum="Boolean" expires_after="2025-04-27">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    The OS allows associating a navigation's input event to a single call. As a
    result, all registrations tied to a navigation are buffered before
    delegating them to the OS.

    Registrations buffered in one buffer should all have equivalent contexts.
    This histogram emits a boolean indicating if the context is considered
    equivalent to the first buffered registration.

    Contexts are considered equivalent if their properties are equal except for
    those influenced by the registration method.
  </summary>
</histogram>

<histogram name="Conversions.OsRegistrationsSkipBufferRegistrationsSize"
    units="count" expires_after="2025-04-27">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    The OS allows associating a navigation's input event to a single call. As a
    result, all registrations tied to a navigation are buffered before
    delegating them to the OS.

    To ensure that buffered OS registrations are eventually sent to the OS, we
    flush the buffer after 20s if we haven't had confirmation yet that the
    navigation will no longer receive any more registrations.

    If we do receive registrations after a buffer has been flushed, we still
    attempt to send them to the OS with a previously used input event and emit
    this histogram.
  </summary>
</histogram>

<histogram name="Conversions.ProcessRegisterDataHostDelay" units="ms"
    expires_after="2025-03-30">
  <owner>apaseltiner@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the delay between a data host registration being deferred by the
    AttributionDataHostManagerImpl and it being processed. Only recorded for
    data host that are deferred rather than processed immediately or dropped.
  </summary>
</histogram>

<histogram name="Conversions.RegisterDataHostOutcome"
    enum="ConversionRegisterDataHostOutcome" expires_after="2025-03-30">
  <owner>apaseltiner@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the status of a data host registraton. Its status is influenced by
    trigger buffering.
  </summary>
</histogram>

<histogram name="Conversions.RegistrationInfoError"
    enum="ConversionRegistrationInfoError" expires_after="2025-03-23">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often registration info parsing failed and why. Recorded only
    when parsing failed; not recorded when parsing succeeded.
  </summary>
</histogram>

<histogram name="Conversions.RegistrationMethod2"
    enum="ConversionsRegistrationMethod" expires_after="2025-03-30">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the method used to register an attribution.

    Recorded once per valid source, trigger or OS registrations header parsed
    and submitted to the AttributionManager.

    For buffered OS registrations, the event is emitted when buffering the
    registrations items. There is negligible probability that items won't reach
    the manager for the case where the AttributionDataHostManager is destroyed
    before flushing the buffer.
  </summary>
</histogram>

<histogram name="Conversions.RegistrationsPerRedirectChain"
    units="registrations" expires_after="2025-03-30">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures the number of sources or triggers registered per redirect chain.
    Recorded when the corresponding resource client finishes.
  </summary>
</histogram>

<histogram name="Conversions.ReportRetrySucceedEventLevel"
    enum="BooleanSuccess" expires_after="2025-03-30">
  <owner>apaseltiner@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records whether a particular event-level attribution report was successful.
    Emitted for all attribution event-level reports which retry.
  </summary>
</histogram>

<histogram name="Conversions.ReportsDeletedInDataClearOperation.Aggregatable"
    units="conversions" expires_after="2025-03-09">
  <owner>johnidel@chromium.org</owner>
  <owner>tquintanilla@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the number of aggregatable attribution reports deleted per clearing
    operation.
  </summary>
</histogram>

<histogram name="Conversions.ReportsDeletedInDataClearOperation.Event"
    units="conversions" expires_after="2025-03-30">
  <owner>johnidel@chromium.org</owner>
  <owner>csharrison@chromium.org</owner>
  <owner>linnan@chromium.org</owner>
  <summary>
    Records the number of event-level attribution reports deleted per clearing
    operation.
  </summary>
</histogram>

<histogram name="Conversions.ReportSendOutcome3"
    enum="ConversionReportSendOutcome" expires_after="never">
<!-- expires-never: critical system health metric for monitoring -->

  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the high level request status of a conversion report. Recorded once
    per conversion report. For conversion report that has been retried, only the
    last retry will be counted.

    This is a critical histogram monitored by alerts to
    measurement-api-dev+alerts@google.com. Please make sure future versions of
    this histogram are properly set up for alerting, but prefer not to version
    the histogram if possible.
  </summary>
</histogram>

<histogram name="Conversions.ReportStatusEventLevel"
    enum="ConversionReportStatus" expires_after="2025-03-30">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the high level request status of an attribution report. Recorded for
    every event-level attribution report sent. For attribution report that has
    been retried, every retry will be counted.
  </summary>
</histogram>

<histogram name="Conversions.RequestSupportHeader"
    enum="ConversionRequestSupportHeader" expires_after="2025-04-13">
  <owner>tquintanilla@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the Attribution-Reporting-Support header value of outgoing
    attribution-eligible requests. This is only recorded when the cross app web
    feature is enabled.
  </summary>
</histogram>

<histogram name="Conversions.SchedulerReportDelay" units="ms"
    expires_after="2025-03-09">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the time difference from when the report was intended to be sent,
    and the actual report time. This is different from
    Conversions.ExtraReportDelay2 because it uses the send attempt report time,
    rather than initial report time assigned by the API. Accounts for any delays
    in Chrome scheduling the report. Recorded when an event-level report is to
    be sent.
  </summary>
</histogram>

<histogram name="Conversions.ScopesPer{Type}Registration" units="scopes"
    expires_after="2025-03-30">
  <owner>tquintanilla@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how many attribution scopes are in a {Type} registration. Recorded
    when a {Type} registration is successfully parsed.
  </summary>
  <token key="Type" variants="AttributionReportingRegistrationType"/>
</histogram>

<histogram name="Conversions.SentVerboseDebugReportType4"
    enum="ConversionVerboseDebugReportType" expires_after="2025-01-05">
  <owner>tquintanilla@chromium.org</owner>
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often verbose debug reports are sent and the corresponding
    report type. Recorded when the verbose debug report is created. As there may
    be more than one report type per report, multiple entries may be logged for
    a report.
  </summary>
</histogram>

<histogram name="Conversions.SourceDestinationLimitResult"
    enum="AttributionSourceDestinationLimitResult" expires_after="2025-04-10">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the result of the destination limit covered by unexpired sources
    (https://wicg.github.io/attribution-reporting-api/#max-destinations-covered-by-unexpired-sources)
    when the destination limit algorithm feature is enabled. Recorded for every
    source that was checked against the destination limit in the storage layer.
  </summary>
</histogram>

<histogram name="Conversions.SourceRegistrationError13"
    enum="ConversionSourceRegistrationError" expires_after="2025-04-13">
  <owner>tquintanilla@chromium.org</owner>
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often source registration parsing failed and why. Recorded only
    when parsing failed; not recorded when parsing succeeded.
  </summary>
</histogram>

<histogram name="Conversions.SourceRegistrationTimeConfig"
    enum="SourceRegistrationTimeConfig" expires_after="2025-05-30">
  <owner>csharrison@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the aggregatable source registration time configuration associated
    with a trigger registration. Recorded for all successful triggers that
    invoke null report generation logic. See
    https://wicg.github.io/attribution-reporting-api/#aggregatable-source-registration-time-configuration.
  </summary>
</histogram>

<histogram name="Conversions.SourceStoredStatus8"
    enum="ConversionStorageSourceStatus" expires_after="never">
<!-- expires-never: critical system health metric for monitoring -->

  <owner>tquintanilla@chromium.org</owner>
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often sources are stored successfully or rejected and why.
    Recorded once for each source event processed by the attribution storage
    layer.

    This is a critical histogram monitored by alerts to
    measurement-api-dev+alerts@google.com. Please make sure future versions of
    this histogram are properly set up for alerting, but prefer not to version
    the histogram if possible.
  </summary>
</histogram>

<histogram name="Conversions.Storage.ClearDataWithFilterDuration" units="ms"
    expires_after="2025-03-09">
  <owner>johnidel@chromium.org</owner>
  <owner>csharrison@chromium.org</owner>
  <summary>
    Records the time it took to do perform a clear operation on the database
    when supplied an origin filter. Recorded when the conversion database
    finishes performing a clear operation. Note that filters may vary in size
    and computation complexity, skewing this metric aribtrarily.

    Warning: this histogram was expired from 2024-05-11 to 2024-09-10; data may
    be missing.
  </summary>
</histogram>

<histogram name="Conversions.Storage.CreationTime" units="ms"
    expires_after="2025-04-13">
  <owner>johnidel@chromium.org</owner>
  <owner>csharrison@chromium.org</owner>
  <summary>
    Records the time it took to initialize a new conversions database from
    scratch. Recorded when the conversion database finishes initialization. Only
    recorded on platforms with base::ThreadTicks support.
  </summary>
</histogram>

<histogram name="Conversions.Storage.FindMatchingSourceTime" units="ms"
    expires_after="2025-03-09">
  <owner>apaseltiner@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <summary>
    Records the time it took to find matching sources for a trigger, regardless
    of whether the query succeeded.
  </summary>
</histogram>

<histogram name="Conversions.Storage.MigrationTime" units="ms"
    expires_after="2025-03-09">
  <owner>johnidel@chromium.org</owner>
  <owner>csharrison@chromium.org</owner>
  <summary>
    Records the time it took to migrate a preexisting conversions database to
    the latest schema. Recorded when the conversion database finishes
    initialization. Only recorded on platforms with base::ThreadTicks support.

    Warning: this histogram was expired from 2024-07-15 to 2024-09-10; data may
    be missing.
  </summary>
</histogram>

<histogram name="Conversions.Storage.Sql.FileSize2" units="KB"
    expires_after="2025-03-30">
  <owner>tquintanilla@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    When the storage database is initialized upon the API's first use, records
    the file size of the database in KB. Only recorded if initialization is
    successful.
  </summary>
</histogram>

<histogram name="Conversions.Storage.Sql.FileSize2.PerSource" units="bytes"
    expires_after="2025-04-13">
  <owner>tquintanilla@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    When the storage database is initialized upon the API's first use, records
    the file size of the database in bytes divided by the number of sources in
    storage. Only recorded if initialization is successful.
  </summary>
</histogram>

<histogram name="Conversions.Storage.Sql.FileSizeSourcesPerOriginLimitReached2"
    units="KB" expires_after="2025-04-13">
  <owner>tquintanilla@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the file size of the storage database in KB when the max sources per
    origin limit is reached. Emitted whenever a source fails to be stored due to
    this limit.
  </summary>
</histogram>

<histogram
    name="Conversions.Storage.Sql.FileSizeSourcesPerOriginLimitReached2.PerSource"
    units="bytes" expires_after="2025-04-13">
  <owner>tquintanilla@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the file size of the storage database in bytes divided by the number
    of sources in storage. Reported when the max sources per origin limit is
    reached. Emitted whenever a source fails to be stored due to this limit.
  </summary>
</histogram>

<histogram name="Conversions.Storage.Sql.InitStatus2"
    enum="ConversionStorageSqlInitStatus" expires_after="2025-04-13">
  <owner>johnidel@chromium.org</owner>
  <owner>csharrison@chromium.org</owner>
  <summary>
    Records initialisation statuses of ConversionStorageSql. Note: currently
    ConversionStorageSql is initialised lazily.
  </summary>
</histogram>

<histogram name="Conversions.TimeFromConversionToReportSend" units="hours"
    expires_after="2025-03-09">
  <owner>johnidel@chromium.org</owner>
  <owner>csharrison@chromium.org</owner>
  <summary>
    Records the time between a conversion and its reporting. This is emitted
    whenever a conversion report is sent.

    Warning: this histogram was expired from 2024-07-15 to 2024-09-10; data may
    be missing.
  </summary>
</histogram>

<histogram name="Conversions.TimeFromTriggerToReportSentSuccessfully"
    units="hours" expires_after="2025-03-23">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the time between a trigger and its reporting. This is emitted only
    when an event-level report is sent successfully to the reporting endpoint,
    and not emitted for debug reports.
  </summary>
</histogram>

<histogram name="Conversions.TriggerRegistrationError11"
    enum="ConversionTriggerRegistrationError" expires_after="2025-04-13">
  <owner>tquintanilla@chromium.org</owner>
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often trigger registration parsing failed and why. Recorded
    only when parsing failed; not recorded when parsing succeeded.
  </summary>
</histogram>

<histogram name="Conversions.TriggerTimeLessThanSourceTime" enum="Boolean"
    expires_after="2025-03-09">
  <owner>tquintanilla@chromium.org</owner>
  <owner>apaseltiner@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often a trigger time is found to be less than the attributed
    source's source time. This will help us determine how often clock changes
    affect attribution and the urgency to which it needs be addressed. Recorded
    when a source is chosen for attribution.
  </summary>
</histogram>

<histogram name="Conversions.UniqueReportingOriginsPerSiteForAttribution"
    units="reporting origins" expires_after="2025-04-15">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures the number of unique reporting origins per (destination site,
    reporting site) within a day for attributions. Recorded once for each
    trigger registration that creates an event-level or aggregatable attribution
    report. Not recorded if no attribution report is generated.
  </summary>
</histogram>

<histogram name="Conversions.ValidReportsInDatabase" units="Reports"
    expires_after="2025-01-05">
  <owner>tquintanilla@chromium.org</owner>
  <owner>apaseltiner@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the number of valid reports in a client's database. Reports are
    scanned during database initialization.
  </summary>
</histogram>

<histogram name="Conversions.ValuesPerFilter" units="values"
    expires_after="2025-04-20">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures the number of values in a filter. This includes filter data in
    source, top-level trigger, event-level and aggregatable trigger data.
    Recorded once for each filter in the filter data when parsed from the
    attributionsrc response.
  </summary>
</histogram>

<histogram name="Conversions.VerboseDebugReport.HttpResponseOrNetErrorCode"
    enum="CombinedHttpResponseAndNetErrorCode" expires_after="2025-04-06">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Error info for sending a verbose debug report, recorded for each sent
    verbose debug report. The net error code is recorded if the HTTP response
    code is unavailable.
  </summary>
</histogram>

<histogram
    name="Conversions.{ContextType}HttpResponseOrNetErrorCodeAggregatable"
    enum="CombinedHttpResponseAndNetErrorCode" expires_after="2025-04-13">
  <owner>apaseltiner@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Error info for sending an attribution report, recorded for each sent
    aggregatable report. The HTTP response code is recorded if there is no net
    error code for the request, or the net error code indicates there was a
    response code failure.
  </summary>
  <token key="ContextType"
      variants="AttributionReportingAggregatableContextType"/>
</histogram>

<histogram
    name="Conversions.{ContextType}HttpResponseOrNetErrorCodeAggregatableNull"
    enum="CombinedHttpResponseAndNetErrorCode" expires_after="2025-03-11">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Error info for sending a null aggregatable report, recorded for each sent
    null aggregatable report. The HTTP response code is recorded if there is no
    net error code for the request, or the net error code indicates there was a
    response code failure.
  </summary>
  <token key="ContextType"
      variants="AttributionReportingAggregatableContextType"/>
</histogram>

<histogram name="Conversions.{ContextType}ReportRetrySucceedAggregatable"
    enum="BooleanSuccess" expires_after="2025-04-13">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records whether a particular aggregatable attribution report was successful.
    Emitted for all conversion aggregatable reports which retry.
  </summary>
  <token key="ContextType"
      variants="AttributionReportingAggregatableContextType"/>
</histogram>

<histogram name="Conversions.{ContextType}ReportStatusAggregatable"
    enum="ConversionReportStatus" expires_after="2025-03-09">
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the high-level request status of an attribution report. Recorded for
    every aggregatable attribution report sent. For attribution report that has
    been retried, every retry will be counted.
  </summary>
  <token key="ContextType"
      variants="AttributionReportingAggregatableContextType"/>
</histogram>

<histogram name="Conversions.{ContextType}ReportStatusAggregatableNull"
    enum="ConversionReportStatus" expires_after="2025-03-11">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the high-level request status of a null aggregatable report.
    Recorded for every null aggregatable report sent. For null aggregatable
    report that has been retried, every retry will be counted.
  </summary>
  <token key="ContextType"
      variants="AttributionReportingAggregatableContextType"/>
</histogram>

<histogram name="Conversions.{ReportType}.NetworkConnectionTypeOnFailure"
    enum="NetworkConnectionType" expires_after="2025-03-30">
  <owner>linnan@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the network connection type in the event that the report failed to
    be sent due to network issues. Recorded for each report sending attempt that
    failed.
  </summary>
  <token key="ReportType">
    <variant name="AggregatableReport"/>
    <variant name="EventLevelReport"/>
  </token>
</histogram>

<histogram name="Conversions.{ReportType}.ReportBodySize" units="bytes"
    expires_after="2025-05-04">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the uncompressed size of non-debug attribution report request
    bodies. Recorded for each sent event-level and aggregatable attribution
    report.
  </summary>
  <token key="ReportType">
    <variant name="AggregatableReport"/>
    <variant name="EventLevelReport"/>
  </token>
</histogram>

<histogram name="Conversions.{ReportType}.ReportRetriesTillSuccessOrFailure"
    enum="ConversionReportSendRetryCount" expires_after="2025-04-13">
  <owner>tquintanilla@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the number of retries before a report is successfully sent or
    records 'Failed' if report delivery fails after reaching the max number of
    retries (2).
  </summary>
  <token key="ReportType">
    <variant name="AggregatableReport"/>
    <variant name="EventLevelReport"/>
  </token>
</histogram>

<histogram
    name="Conversions.{ReportType}.ReportRetriesTillSuccessOrFailure_ThirdRetryEnabled"
    enum="ConversionReportSendRetryCountThirdRetryEnabled"
    expires_after="2025-02-09">
  <owner>tquintanilla@chromium.org</owner>
  <owner>johnidel@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Records the number of retries before a report is successfully sent or
    records 'Failed' if report delivery fails after reaching the max number of
    retries (3).
  </summary>
  <token key="ReportType">
    <variant name="AggregatableReport"/>
    <variant name="EventLevelReport"/>
  </token>
</histogram>

<histogram name="Conversions.{Type}RegistrationRegistrarIssue"
    enum="ConversionRegistrationRegistrarIssue" expires_after="2025-05-03">
  <owner>linnan@chromium.org</owner>
  <owner>measurement-api-dev+metrics@google.com</owner>
  <summary>
    Measures how often an attribution {Type} registration encounters an error
    related to registrars. Recorded only when issue occured. Multiple samples
    may be recorded per attribution {Type} registration.
  </summary>
  <token key="Type" variants="AttributionReportingRegistrationType"/>
</histogram>

</histograms>

</histogram-configuration>
