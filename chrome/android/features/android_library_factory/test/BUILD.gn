# Copyright 2021 The Chromium Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/android/test/missing_symbol_test.gni")
import("//build/config/android/android_nocompile.gni")

# When android_library_factory() is used, the factory class is generated by
# multiple GN build targets. Check that the factory GN dep is suggested when
# a compile fails due to an android_library() not listing the factory GN target
# as a dep.
android_nocompile_test_suite("android_lookup_dep_tests") {
  sources =
      [ rebase_path(missing_symbol_generated_importer_template_nocompile_source,
                    "",
                    "nocompile_gn") ]

  tests = [
    {
      target = "nocompile_gn:android_library_factory_missing_symbol_test_java"
      nocompile_sources = []
      expected_compile_output_regex = "Hint: Try adding the following to //chrome/android/features/android_library_factory/test/nocompile_gn:android_library_factory_missing_symbol_test_java\n *\"//chrome/android/features/android_library_factory/test/nocompile_gn:b_factory_java\""
    },
  ]
}
