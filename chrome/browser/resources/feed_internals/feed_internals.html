<!--
Copyright 2018 The Chromium Authors
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Feed Internals</title>

  <link rel="stylesheet" href="chrome://resources/css/text_defaults.css">
  <link rel="stylesheet" href="feed_internals.css">

  <script type="module" src="feed_internals.js"></script>
</head>

<body>

  <h2>Web Feed</h2>
  <p>
    <label>
      <input type="checkbox" id="enable-webfeed-follow-intro-debug"
             name="enable-webfeed-follow-intro-debug">
      Enable IPH debug mode
    </label>
  </p>
  <p>
    <label>
      <input type="checkbox" id="use-feed-query-requests"
             name="use-feed-query-requests">
      Use legacy endpoint for content fetches
    </label>
  </p>
  <p>
    Following feed order:
    <label>
      <input type="radio" id="following-feed-order-unset"
             name="following-feed-order">
      Unset
    </label>
    <label>
      <input type="radio" id="following-feed-order-grouped"
             name="following-feed-order">
      Grouped
    </label>
    <label>
      <input type="radio" id="following-feed-order-reverse-chron"
             name="following-feed-order">
      Reverse-Chron
    </label>
  </p>

  <h2>Properties</h2>
  <table>
    <tr>
      <td>Is Feed Enabled</td>
      <td id="is-feed-enabled"></td>
    </tr>
    <tr>
      <td>Is Feed Visible</td>
      <td id="is-feed-visible"></td>
    </tr>
    <tr>
      <td>Is Feed Allowed</td>
      <td id="is-feed-allowed"></td>
    </tr>
    <tr>
      <td>Is Prefetching Enabled</td>
      <td id="is-prefetching-enabled"></td>
    </tr>
    <tr>
      <td>Load Stream Status</td>
      <td id="load-stream-status"></td>
    </tr>
    <tr>
      <td>Feed Fetch URL</td>
      <td id="feed-fetch-url"></td>
    </tr>
    <tr>
      <td>Feed Actions URL</td>
      <td id="feed-actions-url"></td>
    </tr>
  </table>

  <h2>Feed Library Actions</h2>
  <button id="refresh-for-you">
    Refresh For-You Feed
  </button>
  <button id="refresh-following">
    Refresh Following Feed
  </button>
  <button id="refresh-webfeed-suggestions">
    Refresh Following Feed Suggestions
  </button>

  <h2>Last Fetch</h2>
  <table>
    <tr>
      <td>Last Fetch Status</td>
      <td id="last-fetch-status"></td>
    </tr>
    <tr>
      <td>Last Fetch Trigger</td>
      <td id="last-fetch-trigger"></td>
    </tr>
    <tr>
      <td>Last Fetch Time</td>
      <td id="last-fetch-time"></td>
    </tr>
    <tr>
      <td>Refresh Suppress Time</td>
      <td id="refresh-suppress-time"></td>
    </tr>
    <tr>
      <td>Bless Nonce</td>
      <td id="last-fetch-bless-nonce"></td>
    </tr>
  </table>

  <h2>Last Action Upload</h2>
  <table>
    <tr>
      <td>Status</td>
      <td id="last-action-upload-status"></td>
    </tr>
    <tr>
      <td>Last Upload Time</td>
      <td id="last-action-upload-time"></td>
    </tr>
  </table>

  <h2>Feed Histograms</h2>
  <button id="load-feed-histograms">
    Load Feed Histograms
  </button>
  <details id="feed-histograms-details">
    <summary>Show/Hide</summary>
    <pre id="feed-histograms-log"></pre>
  </details>

  <h2>Feed Process Scope</h2>
  <button id="dump-feed-process-scope">
    Dump Feed Process Scope
  </button>
  <details id="feed-process-scope-details">
    <summary>Show/Hide</summary>
    <pre id="feed-process-scope-dump"></pre>
  </details>

  <h2>Feed Host Override</h2>
  <p>Cookies will be sent along with Feed requests to this host.</p>
  <input id="feed-host-override">
  <button id="feed-host-override-apply">Apply</button>

  <h2>Discover API Endpoint Override</h2>
  <input id="discover-api-override">
  <button id="discover-api-override-apply">Apply</button>

  <h2>Feed Stream Data</h2>
  <input id="feed-stream-data-file" type="file">
  <button id="feed-stream-data-override">Override</button>
</body>
</html>
