<!DOCTYPE html>
<script src="../../../resources/testharness.js"></script>
<script src="../../../resources/testharnessreport.js"></script>
<style>
    #a + #b * { color: pink }
</style>
<p>Should not assert/crash.</p>
<div id="p">
    <div id="b">
        <div></div>
    </div>
</div>
<script>
    test(() => {
        p.offsetTop;
        var a = document.createElement("div");
        a.id = "a";
        p.insertBefore(a, b);
        assert_true(true, "Reached end of insert without triggering assert.");
    }, "Scheduling sibling set with wholeSubtreeInvalid should not cause asserts.");
</script>
