<!DOCTYPE html>
<canvas id = 'dstCanvas' width='100' height='100' style='background-color:red;'></canvas>
<script>
if (window.testRunner) {
    testRunner.waitUntilDone();
}
var srcCanvas = document.createElement('canvas');
srcCanvas.width = srcCanvas.height = 100;
var ctx = srcCanvas.getContext('2d');
ctx.fillStyle = 'rgba(0, 255, 0, 0.5)';
ctx.fillRect(0, 0, 100, 100);
createImageBitmap(srcCanvas).then(consumeImageBitmap)

function consumeImageBitmap(image) {
    var dstCanvas = document.getElementById('dstCanvas');
    var dstCtx = dstCanvas.getContext('bitmaprenderer', { alpha: true });
    dstCtx.transferFromImageBitmap(image);
    if (window.testRunner) {
        testRunner.notifyDone();
    }
}
</script>