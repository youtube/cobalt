<!--
Copyright 2025 The Cobalt Authors. All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<!--
This file is used to generate a comprehensive list of Cobalt histograms
along with a detailed description for each histogram. See go/cobalt-telemetry
for details on how to modify this file.

For best practices on writing histogram descriptions, see
https://chromium.googlesource.com/chromium/src.git/+/HEAD/tools/metrics/histograms/README.md

Always run the pretty print utility on this file after editing:

  ./tools/metrics/histograms/pretty_print.py tools/metrics/histograms/metadata/cobalt/histograms.xml
-->

<histogram-configuration>

<histograms>

<histogram name="Cobalt.Finch.ConfigAgeInDays" units="days"
    expires_after="never">
  <owner>yijiazhang@google.com</owner>
  <summary>
    Records the age of the Finch configuration in days each time it is checked
    at startup. This data is used to determine an appropriate expiration
    threshold.
  </summary>
</histogram>

<histogram name="Cobalt.Finch.ConfigState" enum="VariationsConfigState"
    expires_after="never">
  <owner>yijiazhang@google.com</owner>
  <summary>
    Records the state of the Finch configuration at startup. This is used to
    monitor the frequency of expired or invalid configurations.
  </summary>
</histogram>

<histogram name="Cobalt.LoaderApp.ElfDecompressionDuration" units="ms"
    expires_after="never">
  <owner>hwarriner@google.com</owner>
  <owner>cobalt-team@google.com</owner>
  <summary>
    The time it takes for the ELF dynamic shared library, stored as a compressed
    file, to be decompressed. This metric is only recorded when the shared
    library is stored as a compressed file.
  </summary>
</histogram>

<histogram name="Cobalt.Memory.DOM" units="MB" expires_after="never">
  <owner>cobalt-team@google.com</owner>
  <summary>
    Memory consumed by DOM nodes and related structures. Recorded periodically
    (every 5 minutes by default).
  </summary>
</histogram>

<histogram name="Cobalt.Memory.Graphics" units="MB" expires_after="never">
  <owner>cobalt-team@google.com</owner>
  <summary>
    Memory used by Skia, GPU resources, textures, etc. Recorded periodically
    (every 5 minutes by default).
  </summary>
</histogram>

<histogram name="Cobalt.Memory.JavaScript" units="MB" expires_after="never">
  <owner>cobalt-team@google.com</owner>
  <summary>
    Track memory used by the V8 heap. Recorded periodically (every 5 minutes by
    default).
  </summary>
</histogram>

<histogram name="Cobalt.Memory.Layout" units="MB" expires_after="never">
  <owner>cobalt-team@google.com</owner>
  <summary>
    Memory for layout trees and rendering data. Recorded periodically (every 5
    minutes by default).
  </summary>
</histogram>

<histogram name="Cobalt.Memory.Media" units="MB" expires_after="never">
  <owner>cobalt-team@google.com</owner>
  <summary>
    Buffers and resources used by the media pipeline. Recorded periodically
    (every 5 minutes by default).
  </summary>
</histogram>

<histogram name="Cobalt.Memory.Native" units="MB" expires_after="never">
  <owner>cobalt-team@google.com</owner>
  <summary>
    Other general native heap allocations. Recorded periodically (every 5
    minutes by default).
  </summary>
</histogram>

<histogram name="Cobalt.Memory.ObjectCounts.{Component}" units="objects"
    expires_after="never">
  <owner>cobalt-team@google.com</owner>
  <summary>
    The number of live {Component} objects in Blink. Recorded periodically
    (every 5 minutes by default).
  </summary>
  <token key="Component">
    <variant name="Document"/>
    <variant name="JSEventListener"/>
    <variant name="LayoutObject"/>
    <variant name="Node"/>
  </token>
</histogram>

<histogram name="Cobalt.Memory.PrivateMemoryFootprint.GrowthRate" units="KB/min"
    expires_after="never">
  <owner>cobalt-team@google.com</owner>
  <summary>
    The rate at which the private memory footprint is growing, in KB per minute.
    Calculated as the difference in private memory footprint between two
    consecutive samples, divided by the time between samples. Recorded
    periodically (every 5 minutes by default).
  </summary>
</histogram>

<histogram name="HangWatcher.IsThreadHung.BrowserProcess.RendererThread"
    enum="BooleanHung" expires_after="never">
  <owner>antonlunev@google.com</owner>
  <summary>
    Every 10 seconds, a boolean is recorded to this histogram to indicate
    whether the RendererThread of a Browser process was hung. The thread is hung
    if the current work unit started running more than 10 seconds ago. This is
    emitted only in single process mode(when renderer is a thread inside
    BrowserProcess).
  </summary>
</histogram>

<histogram name="Cobalt.Finch.RollbackDetected" enum="Boolean"
    expires_after="never">
  <owner>yijiazhang@google.com</owner>
  <summary>
    Records when a rollback is detected and prevented. This happens when the
    cobalt version recorded for a previous Finch config is greater than the
    current version of the Cobalt binary.
  </summary>
</histogram>

<histogram name="Cobalt.Finch.VersionComparisonIsValid" enum="Boolean"
    expires_after="never">
  <owner>yijiazhang@google.com</owner>
  <summary>
    Records whether the version strings in the Finch config are valid and can be
    parsed correctly. A false value indicates a malformed version string was
    received.
  </summary>
</histogram>

</histograms>

</histogram-configuration>
