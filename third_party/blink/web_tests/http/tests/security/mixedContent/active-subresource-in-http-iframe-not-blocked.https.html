<!doctype html>
<html>
<head>
    <script src="/resources/testharness.js"></script>
    <script src="/resources/testharnessreport.js"></script>

    <script>
        if (window.testRunner) {
          // This test checks that active mixed subresources in iframes
          // are allowed if the iframe itself was allowed as mixed content.
          testRunner.setAllowRunningOfInsecureContent(true);
          testRunner.dumpAsText();
        }

        var t = async_test("Testing an insecure script in a mixed iframe");
        window.addEventListener("message", t.step_func(function () {
            t.done();
        }));
    </script>
</head>
<body>
    <p>This test passes if the active subresource in the frame below is allowed.</p>
    <iframe src="http://example.test:8000/security/mixedContent/resources/frame-loads-insecure-script.html"></iframe>
</body>
</html>
