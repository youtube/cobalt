<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <!-- Copyright 2011 Google Inc.  All rights reserved. -->
  <head>
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache" />
    <META HTTP-EQUIV="Expires" CONTENT="-1" />
    <script type="text/javascript" src="nacltest.js"> </script>
    <script type="text/javascript" src="progress_event_listener.js"> </script>
    <title> PPAPI bad manifest/nexe URLs </title>
  </head>
  <body id="body">
<script type="text/javascript">
//<![CDATA[
var tester = new Tester($('body'));

// This nexe should fail validation inside the sel_ldr.
testProgressEventStateMachine(
    tester,
    'partly_invalid',
    1,  // progressMinCount
    1,  // errorCount
    0,  // abortCount
    0,  // loadCount
    'NaCl module load failed: Validation failure. File violates Native Client safety rules.');

// The driver invoked when the body has finished loading.
function runTests() {
  tester.loadErrorsAreOK();
  tester.waitFor($('partly_invalid'));
  tester.run();
}
// Set all the listeners on the body.
setListeners($('body'));
//]]>
</script>
    <embed id="partly_invalid"
      class="naclModule"
      width=100 height=20
      src="partly_invalid.nmf"
      style="background-color:gray"
      type="application/x-nacl" />

  <script type="text/javascript">
  //<![CDATA[
  runTests();
  //]]>
  </script>
  </body>
</html>
