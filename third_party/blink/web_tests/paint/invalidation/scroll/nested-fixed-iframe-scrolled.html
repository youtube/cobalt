<!DOCTYPE html>
<script src="../resources/text-based-repaint.js"></script>
<script>
function repaintTest() {
  frames[0].frames[0].document.getElementById('div').style.backgroundColor = 'green';
}
onload = function() {
  // Scroll before repaint test to test correct scroll offset of invalidation rect
  // for contents of the fixed-position inner-iframe when it needs repaint.
  window.scrollTo(0, 400);
  if (window.testRunner)
    runRepaintAndPixelTest();
  // For manual testing, the background color change is triggered in the iframe content.
};
</script>
<body style="height: 2000px">
  Tests paint invalidation of contents of fixed-position iframe in another iframe after main frame is scrolled.
  Passes if there is a 100x100 green rectangle and no red in the inner-most iframe.
  <iframe style="position: absolute; top: 500px; left: 0" src="../resources/fixed-iframe.html"></iframe>
</body>
