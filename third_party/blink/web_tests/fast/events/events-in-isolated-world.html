<!DOCTYPE html>
<button id="button"></button>
<script>

if (window.testRunner) {
    testRunner.dumpAsText();
    if (window.internals) {
        internals.settings.setScriptEnabled(false);

        document.getElementById('button').addEventListener('keydown', function() { console.log('keydown event in main world') });
        testRunner.evaluateScriptInIsolatedWorld(1, "document.getElementById('button').addEventListener('keydown', function() { console.log('keydown event in isolated world') });");

        document.getElementById("button").focus();
        eventSender.keyDown('e', []);
    } else {
        console.log("This test requires internals.settings.setScriptEnabled, so it can't run in a browser.");
    }
} else {
    console.log("This test requires window.testRunner, so it can't run in a browser.");
}
</script>

