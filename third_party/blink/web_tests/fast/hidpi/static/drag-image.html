<!DOCTYPE html>
<style>
    #image {
        width: 100px;
        height: 50px;
        image-rendering: pixelated;
    }
</style>
<body>
    <!-- Simulate dragging an image and dump the generated drag image at highder pixel density. -->
    <image id="image" srcset="../resources/image-set-1x.png 1x, ../resources/image-set-2x.png 2x">
</body>
<script>
    function drag() {
        testRunner.dumpDragImage();
        var image = document.getElementById('image');
        var startX = image.offsetLeft + image.offsetWidth / 2;
        var startY = image.offsetTop + image.offsetHeight / 2;
        var positionX = startX + image.offsetWidth;
        var positionY = startY + image.offsetHeight;

        eventSender.dragMode = true;
        eventSender.mouseMoveTo(startX, startY);
        eventSender.mouseDown();
        eventSender.mouseMoveTo(positionX, positionY);
        eventSender.mouseUp();
    }

    if (!window.testRunner || !window.eventSender) {
        document.write("This test does not work in manual mode.");
    } else {
        window.onload = drag;
    }
</script>
