<!DOCTYPE html>
<script src="../resources/text-based-repaint.js"></script>
<script>
if (window.testRunner)
  testRunner.dumpAsText();

function repaintTest() {
  var things = document.getElementsByClassName("before");
  while (things.length)
    things[0].classList.remove("before");
}
onload = runRepaintAndPixelTest;
</script>
<style>
.box {
  width: 200px;
  height: 200px;
  margin: 20px;
  background-color: green;
  filter: url(#displacement);
}
.before {
  background-color: red;
}
</style>
<div class="before box"></div>
<svg width="0" height="0">
  <filter id="displacement" x="-0.5" y="-0.5" width="2" height="2"
          color-interpolation-filters="sRGB">
    <feFlood/>
    <feDisplacementMap in="SourceGraphic" scale="40"/>
  </filter>
</svg>
