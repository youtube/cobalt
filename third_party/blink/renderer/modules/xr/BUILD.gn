# Copyright 2017 The Chromium Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//device/vr/buildflags/buildflags.gni")
import("//third_party/blink/renderer/modules/modules.gni")

blink_modules_sources("xr") {
  sources = [
    "average_timer.cc",
    "average_timer.h",
    "global_event_handlers_xr.h",
    "vr_service_type_converters.cc",
    "vr_service_type_converters.h",
    "xr_anchor.cc",
    "xr_anchor.h",
    "xr_anchor_set.cc",
    "xr_anchor_set.h",
    "xr_bounded_reference_space.cc",
    "xr_bounded_reference_space.h",
    "xr_camera.cc",
    "xr_camera.h",
    "xr_canvas_input_provider.cc",
    "xr_canvas_input_provider.h",
    "xr_composition_layer.cc",
    "xr_composition_layer.h",
    "xr_cpu_depth_information.cc",
    "xr_cpu_depth_information.h",
    "xr_cube_layer.cc",
    "xr_cube_layer.h",
    "xr_cube_map.cc",
    "xr_cube_map.h",
    "xr_cylinder_layer.cc",
    "xr_cylinder_layer.h",
    "xr_depth_information.cc",
    "xr_depth_information.h",
    "xr_depth_manager.cc",
    "xr_depth_manager.h",
    "xr_dom_overlay_state.cc",
    "xr_dom_overlay_state.h",
    "xr_enter_fullscreen_observer.cc",
    "xr_enter_fullscreen_observer.h",
    "xr_equirect_layer.cc",
    "xr_equirect_layer.h",
    "xr_exit_fullscreen_observer.cc",
    "xr_exit_fullscreen_observer.h",
    "xr_frame.cc",
    "xr_frame.h",
    "xr_frame_provider.cc",
    "xr_frame_provider.h",
    "xr_frame_request_callback_collection.cc",
    "xr_frame_request_callback_collection.h",
    "xr_gpu_binding.cc",
    "xr_gpu_binding.h",
    "xr_gpu_drawing_context.cc",
    "xr_gpu_drawing_context.h",
    "xr_gpu_sub_image.h",
    "xr_gpu_swap_chain.cc",
    "xr_gpu_swap_chain.h",
    "xr_gpu_texture_array_swap_chain.cc",
    "xr_gpu_texture_array_swap_chain.h",
    "xr_graphics_binding.cc",
    "xr_graphics_binding.h",
    "xr_grip_space.cc",
    "xr_grip_space.h",
    "xr_hand.cc",
    "xr_hand.h",
    "xr_hit_test_result.cc",
    "xr_hit_test_result.h",
    "xr_hit_test_source.cc",
    "xr_hit_test_source.h",
    "xr_id_hash_traits.h",
    "xr_image_tracking_result.cc",
    "xr_image_tracking_result.h",
    "xr_input_source.cc",
    "xr_input_source.h",
    "xr_input_source_array.cc",
    "xr_input_source_array.h",
    "xr_input_source_event.cc",
    "xr_input_source_event.h",
    "xr_input_sources_change_event.cc",
    "xr_input_sources_change_event.h",
    "xr_joint_pose.cc",
    "xr_joint_pose.h",
    "xr_joint_space.cc",
    "xr_joint_space.h",
    "xr_layer.cc",
    "xr_layer.h",
    "xr_layer_client.h",
    "xr_layer_drawing_context.h",
    "xr_layer_event.cc",
    "xr_layer_event.h",
    "xr_layer_shared_image_manager.cc",
    "xr_layer_shared_image_manager.h",
    "xr_light_estimate.cc",
    "xr_light_estimate.h",
    "xr_light_probe.cc",
    "xr_light_probe.h",
    "xr_object_space.h",
    "xr_plane.cc",
    "xr_plane.h",
    "xr_plane_manager.cc",
    "xr_plane_manager.h",
    "xr_plane_set.cc",
    "xr_plane_set.h",
    "xr_pose.cc",
    "xr_pose.h",
    "xr_projection_layer.cc",
    "xr_projection_layer.h",
    "xr_quad_layer.cc",
    "xr_quad_layer.h",
    "xr_ray.cc",
    "xr_ray.h",
    "xr_reference_space.cc",
    "xr_reference_space.h",
    "xr_reference_space_event.cc",
    "xr_reference_space_event.h",
    "xr_render_state.cc",
    "xr_render_state.h",
    "xr_rigid_transform.cc",
    "xr_rigid_transform.h",
    "xr_session.cc",
    "xr_session.h",
    "xr_session_event.cc",
    "xr_session_event.h",
    "xr_session_viewport_scaler.cc",
    "xr_session_viewport_scaler.h",
    "xr_setlike.h",
    "xr_shaped_layer.cc",
    "xr_shaped_layer.h",
    "xr_space.cc",
    "xr_space.h",
    "xr_sub_image.h",
    "xr_swap_chain.h",
    "xr_system.cc",
    "xr_system.h",
    "xr_target_ray_space.cc",
    "xr_target_ray_space.h",
    "xr_transient_input_hit_test_result.cc",
    "xr_transient_input_hit_test_result.h",
    "xr_transient_input_hit_test_source.cc",
    "xr_transient_input_hit_test_source.h",
    "xr_utils.cc",
    "xr_utils.h",
    "xr_view.cc",
    "xr_view.h",
    "xr_view_geometry.cc",
    "xr_view_geometry.h",
    "xr_viewer_pose.cc",
    "xr_viewer_pose.h",
    "xr_viewport.h",
    "xr_visibility_mask_change_event.cc",
    "xr_visibility_mask_change_event.h",
    "xr_webgl_binding.cc",
    "xr_webgl_binding.h",
    "xr_webgl_cubemap_swap_chain.cc",
    "xr_webgl_cubemap_swap_chain.h",
    "xr_webgl_depth_information.cc",
    "xr_webgl_depth_information.h",
    "xr_webgl_drawing_buffer_swap_chain.cc",
    "xr_webgl_drawing_buffer_swap_chain.h",
    "xr_webgl_drawing_context.cc",
    "xr_webgl_drawing_context.h",
    "xr_webgl_frame_transport_context_impl.cc",
    "xr_webgl_frame_transport_context_impl.h",
    "xr_webgl_layer.cc",
    "xr_webgl_layer.h",
    "xr_webgl_sub_image.cc",
    "xr_webgl_sub_image.h",
    "xr_webgl_swap_chain.cc",
    "xr_webgl_swap_chain.h",
    "xr_webgl_texture_array_swap_chain.cc",
    "xr_webgl_texture_array_swap_chain.h",
  ]

  deps = [
    "//device/vr/buildflags",
    "//device/vr/public/mojom:vr_service_blink",
    "//services/metrics/public/cpp:ukm_builders",
  ]

  if (enable_vr) {
    deps += [ "//device/vr/public/cpp:features" ]
  }

  public_deps = [
    "//third_party/blink/renderer/modules/gamepad",
    "//third_party/blink/renderer/modules/webgpu",
  ]
}
