<!DOCTYPE html>
<html>
<body>
<script src="../resources/common.js"></script>
<style>
input::-webkit-calendar-picker-indicator {
    opacity: 1;
}
</style>
<dl>
<dt>Datalist follows:
<dd><input list="dl1">
<dt>Empty datalist:
<dd><input list="dl-empty">
<dt>Datalist without valid options:
<dd><input list="dl-invalid" maxlength=3>
<dt>Empty datalist becomes non-empty:
<dd><input list="dl-empty-valid">
<dt>Datalist becomes empty:
<dd><input list="dl-valid-empty">
<dt>Datalist disappears:
<dd><input list="dl-disappear">
<dt>No datalist with the speicified ID:
<dd><input list="dl-no-id">
<dt>No datalist with the speicified ID, then it appears:
<dd><input list="dl-no-id-then-added">
</dl>

<datalist id="dl1">
<option>Suggestion</option>
</datalist>
<datalist id="dl-empty">
</datalist>
<datalist id="dl-invalid">
<option>Suggestion</option>
</datalist>
<datalist id="dl-empty-valid">
</datalist>
<datalist id="dl-valid-empty">
<option>Suggestion</option>
</datalist>
<datalist id="dl-disappear">
<option>Suggestion</option>
</datalist>
<datalist id="dl-no-id-then-added-pre">
<option>Suggestion</option>
</datalist>

<script>
function change() {
    $('dl-empty-valid').innerHTML = '<option>foo</option>';
    $('dl-valid-empty').innerHTML = '';
    $('dl-disappear').remove();
    $('dl-no-id-then-added-pre').id = 'dl-no-id-then-added';
    document.body.offsetLeft;
    testRunner.notifyDone();
}

window.onload = function() {
    document.body.offsetLeft;
    setTimeout(change, 0);
};
testRunner.waitUntilDone();
</script>
</body>
</html>
