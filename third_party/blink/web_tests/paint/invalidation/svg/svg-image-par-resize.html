<!DOCTYPE html>
<script src="../resources/text-based-repaint.js"></script>
<script>
window.testIsAsync = true;
</script>
<body onload="runRepaintAndPixelTest()">
<svg width="300" height="200">
  <image width="200" height="200" preserveAspectRatio="none"
         xlink:href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='50' height='50'><rect width='100%' height='100%' fill='green'/></svg>"></image>
</svg>
<script>
function repaintTest() {
  document.querySelector('image').setAttribute('width', 100);
  requestAnimationFrame(function() {
    finishRepaintTest();
  });
}
</script>
</body>
