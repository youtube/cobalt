<!doctype html>
<meta charset="utf-8">
<title>Drag and Drop: interaction between effectAllowed and dropEffect</title>
<link rel="help" href="https://html.spec.whatwg.org/multipage/interaction.html#drag-and-drop-processing-model">
<script src="../../resources/testharness.js"></script>
<script src="../../resources/testharnessreport.js"></script>
<script src="resources/dropEffect-common.js"></script>
<style>
.box {
  display: block;
  border: 1px solid black;
  width: 100px;
  height: 100px;
}
</style>

<p>
  Please drag the "Drag Me" box into the "Drop Here" box repeatedly, until the
  test ends.
</p>

<div class="dragged box" draggable="true">
  Drag Me
</div>

<div class="dropzone box">
  Drop Here
</div>

<p>
  Current test: <code id="test-description"></code>
</p>

<script>

dropEffectTests([
  { allowed: 'uninitialized', drop: 'copy', operation: 'copy' },
  { allowed: 'copy',          drop: 'copy', operation: 'copy' },
  { allowed: 'copyLink',      drop: 'copy', operation: 'copy' },
  { allowed: 'copyMove',      drop: 'copy', operation: 'copy' },
  { allowed: 'link',          drop: 'copy' },
  { allowed: 'linkMove',      drop: 'copy' },
  { allowed: 'move',          drop: 'copy' },
  { allowed: 'all',           drop: 'copy', operation: 'copy' },
  { allowed: 'none',          drop: 'copy' },
  { allowed: 'dummy',         drop: 'copy', operation: 'copy' },
  {                           drop: 'copy', operation: 'copy' },

  { allowed: 'uninitialized', drop: 'link', operation: 'link' },
  { allowed: 'copy',          drop: 'link' },
  { allowed: 'copyLink',      drop: 'link', operation: 'link' },
  { allowed: 'copyMove',      drop: 'link' },
  { allowed: 'link',          drop: 'link', operation: 'link' },
  { allowed: 'linkMove',      drop: 'link', operation: 'link' },
  { allowed: 'move',          drop: 'link' },
  { allowed: 'all',           drop: 'link', operation: 'link' },
  { allowed: 'none',          drop: 'link' },
  { allowed: 'dummy',         drop: 'link', operation: 'link' },
  {                           drop: 'link', operation: 'link' },

  { allowed: 'uninitialized', drop: 'move', operation: 'move' },
  { allowed: 'copy',          drop: 'move' },
  { allowed: 'copyLink',      drop: 'move' },
  { allowed: 'copyMove',      drop: 'move', operation: 'move' },
  { allowed: 'link',          drop: 'move' },
  { allowed: 'linkMove',      drop: 'move', operation: 'move' },
  { allowed: 'move',          drop: 'move', operation: 'move' },
  { allowed: 'all',           drop: 'move', operation: 'move' },
  { allowed: 'none',          drop: 'move' },
  { allowed: 'dummy',         drop: 'move', operation: 'move' },
  {                           drop: 'move', operation: 'move' },

  { allowed: 'uninitialized', drop: 'none' },
  { allowed: 'copy',          drop: 'none' },
  { allowed: 'copyLink',      drop: 'none' },
  { allowed: 'copyMove',      drop: 'none' },
  { allowed: 'link',          drop: 'none' },
  { allowed: 'linkMove',      drop: 'none' },
  { allowed: 'move',          drop: 'none' },
  { allowed: 'all',           drop: 'none' },
  { allowed: 'none',          drop: 'none' },
  { allowed: 'dummy',         drop: 'none' },
  {                           drop: 'none' },

  { allowed: 'uninitialized', drop: 'dummy', operation: 'copy' },
  { allowed: 'copy',          drop: 'dummy', operation: 'copy' },
  { allowed: 'copyLink',      drop: 'dummy', operation: 'copy' },
  { allowed: 'copyMove',      drop: 'dummy', operation: 'move' },
  { allowed: 'link',          drop: 'dummy', operation: 'link' },
  { allowed: 'linkMove',      drop: 'dummy', operation: 'move' },
  { allowed: 'move',          drop: 'dummy', operation: 'move' },
  { allowed: 'all',           drop: 'dummy', operation: 'copy' },
  { allowed: 'none',          drop: 'dummy' },
  { allowed: 'dummy',         drop: 'dummy', operation: 'copy' },
  {                           drop: 'dummy', operation: 'copy' },
]);

</script>
