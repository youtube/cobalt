<!DOCTYPE html>
<html>
  <head>
    <title>getEnvironmentIntegrity</title>
    <script>
      function returnResult(success, resultString) {
        window.document.title = 'Done|' + (success ? 'Success' : 'Fail') + '|'+ resultString;
      }

      function doGetEnvironmentIntegrity(contentBinding) {
        if (navigator.getEnvironmentIntegrity === undefined) {
          returnResult(false, 'navigator.getEnvironmentIntegrity === undefined');
          return;
        }

        navigator.getEnvironmentIntegrity(contentBinding).then(token => {
          returnResult(true, token.encode());
        }).catch(e => {
          returnResult(false, e);
        });
      }
    </script>
  </head>
  <body>
  </body>
</html>
