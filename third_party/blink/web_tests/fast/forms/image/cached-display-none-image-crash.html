<!DOCTYPE html>
<script src="../../../resources/testharness.js"></script>
<script src="../../../resources/testharnessreport.js"></script>
<img src="resources/blue_rect.jpg">
<input type="image" id="img" style="display:none">
<script>
  const crash_test = async_test("Setting src to cached image on display:none image input should not crash.");

  onload = crash_test.step_func_done(() => {
    img.setAttribute("src", "resources/blue_rect.jpg");
    document.body.style.display = "inline";
  });
</script>
