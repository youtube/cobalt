<html>
<head>
  <script src="../resources/text-based-repaint.js" type="text/javascript"></script>
  <script type="text/javascript">
  window.testIsAsync = true;
  // These svg files are animated automatically, so have flaky repaint rect
  // output depending on when repaint rect capturing starts.
  window.outputRepaintRects = false;
  function repaintTest() {
    if (!window.testRunner)
      return;

    // The animation lasts 100ms so skip 12 (12*1s/120=100ms) frames to be sure.
    for (var i = 0; i < 12; i++) {
      internals.advanceImageAnimation(imageA);
      internals.advanceImageAnimation(imageB);
    }

    window.requestAnimationFrame(function() {
      finishRepaintTest();
    });
  }
  </script>
  <style type="text/css" media="screen">
    img {
      margin: 10px;
    }
  </style>
</head>
<body onload="runRepaintAndPixelTest()">
  <p>Images should redraw correctly when SVG animation runs</p>
  <img id="imageA" height="250px" width="350px" border="2" src="../../../svg/as-image/resources/animated-rect-same-image.svg"><br>
  <img id="imageB" height="250px" width="350px" border="2" src="../../../svg/as-image/resources/animated-rect-same-image.svg">
</body>
</html>
