// Copyright 2024 The Chromium Authors
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

module blink.mojom;

import "mojo/public/mojom/base/values.mojom";
import "url/mojom/origin.mojom";

// The value of a local resource.
union LocalResourceValue {
  // The ID of the resource in the ResourceBundle.
  int32 resource_id;

  // The response body of the resource generated by the browser.
  string response_body;
};

// Contains the information necessary for a renderer process to procure the
// binary data for a resource given just the URL without further communication
// with the browser process.
struct LocalResourceSource {
  // HTTP response headers associated with all content served from this source.
  // The format is that of net::HttpResponseHeaders::raw_headers_.
  string headers;

  bool should_replace_i18n_in_js;

  // Map from URL path to resource value.
  map<string, LocalResourceValue> path_to_resource_map;

  // Used to replace template expressions in fetched resources, e.g. for i18n.
  map<string, string> replacement_strings;
};

struct LocalResourceLoaderConfig {
  // The key is an origin used to determine which URLs the data source serves.
  map<url.mojom.Origin, LocalResourceSource> sources;
};
