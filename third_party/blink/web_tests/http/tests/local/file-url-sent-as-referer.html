<!DOCTYPE html>
<html>
<head>
    <script>
        if (window.testRunner)
            testRunner.waitUntilDone();

        function getImage()
        {
            var frameObj = document.getElementById("myFrame");
            frameObj.contentWindow.document.write("<img src=\"http://127.0.0.1:8000/security/resources/showRefererImage.php\"/>");
            frameObj.contentWindow.document.close();
            frameObj.onload = function() {
                if (window.testRunner)
                    testRunner.notifyDone();
            };
        }
    </script>
</head>
<body>
<br>This is a test to see if a file:// url is sent out as the referrer for a subresource load<br>
<iframe id="myFrame" src="about:blank" onLoad="setTimeout(getImage, 0);"></iframe>
<br>The above image will tell you success or failure - green or red<br>
</body>
</html>
